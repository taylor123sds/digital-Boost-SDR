<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ORBION • Dashboard Pro</title>

  <!-- Fontes profissionais premium -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Icons pro -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    /* === SISTEMA DE TEMAS PREMIUM 2024 === */
    :root {
      /* Tema padrão: Executive Professional */
      --primary-color: #0066cc;
      --primary-light: #1a75d9;
      --primary-dark: #0052a3;
      --primary-gradient: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
      --secondary-color: #64748b;
      --accent-color: #06b6d4;
      --accent-gradient: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
      
      --background-primary: #fefefe;
      --background-secondary: #f9fafb;
      --background-tertiary: #f1f5f9;
      --surface: #ffffff;
      --surface-elevated: #ffffff;
      --surface-glass: rgba(255, 255, 255, 0.25);
      --surface-glass-border: rgba(255, 255, 255, 0.18);
      
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --text-inverse: #ffffff;
      --text-gradient: linear-gradient(135deg, #0f172a 0%, #475569 100%);
      
      --border-light: #e2e8f0;
      --border-medium: #cbd5e1;
      --border-strong: #94a3b8;
      --border-glass: rgba(255, 255, 255, 0.2);
      
      --success: #10b981;
      --success-light: #34d399;
      --warning: #f59e0b;
      --warning-light: #fbbf24;
      --error: #ef4444;
      --error-light: #f87171;
      --info: #3b82f6;
      --info-light: #60a5fa;
      
      /* Glassmorphism shadows */
      --shadow-glass: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      --shadow-glass-inset: inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
      --shadow-premium: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-glass: 20px;
      
      --blur-sm: blur(4px);
      --blur-md: blur(8px);
      --blur-lg: blur(16px);
      --blur-glass: blur(20px);
      
      --sidebar-width: 280px;
      --header-height: 72px;
      
      /* Animation timings */
      --transition-fast: 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-normal: 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-slow: 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-bounce: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    /* Tema Escuro Premium */
    .theme-dark {
      --primary-color: #3b82f6;
      --primary-light: #60a5fa;
      --primary-dark: #2563eb;
      --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      --secondary-color: #6b7280;
      --accent-color: #06b6d4;
      --accent-gradient: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
      
      --background-primary: #0f172a;
      --background-secondary: #1e293b;
      --background-tertiary: #334155;
      --surface: #1e293b;
      --surface-elevated: #334155;
      --surface-glass: rgba(15, 23, 42, 0.25);
      --surface-glass-border: rgba(255, 255, 255, 0.1);
      
      --text-primary: #f8fafc;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
      --text-inverse: #0f172a;
      --text-gradient: linear-gradient(135deg, #f8fafc 0%, #cbd5e1 100%);
      
      --border-light: #334155;
      --border-medium: #475569;
      --border-strong: #64748b;
      --border-glass: rgba(255, 255, 255, 0.1);
    }

    /* Tema Tech/Glassmorphism */
    .theme-tech {
      --primary-color: #8b5cf6;
      --primary-light: #a78bfa;
      --primary-dark: #7c3aed;
      --primary-gradient: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      --secondary-color: #64748b;
      --accent-color: #06d6a0;
      --accent-gradient: linear-gradient(135deg, #06d6a0 0%, #059669 100%);
      
      --background-primary: #0a0a0a;
      --background-secondary: #111111;
      --background-tertiary: #1a1a1a;
      --surface: #1a1a1a;
      --surface-elevated: #262626;
      --surface-glass: rgba(139, 92, 246, 0.1);
      --surface-glass-border: rgba(139, 92, 246, 0.2);
      
      --text-primary: #ffffff;
      --text-secondary: #d4d4d8;
      --text-muted: #a1a1aa;
      --text-inverse: #000000;
      --text-gradient: linear-gradient(135deg, #ffffff 0%, #d4d4d8 100%);
      
      --border-light: #262626;
      --border-medium: #404040;
      --border-strong: #525252;
      --border-glass: rgba(139, 92, 246, 0.3);
    }

    /* Base Reset com melhorias */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      scroll-behavior: smooth;
    }

    body {
      height: 100%;
      font-family: 'Manrope', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--background-primary);
      color: var(--text-primary);
      transition: all var(--transition-normal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    /* Glassmorphism Background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
      z-index: -1;
      pointer-events: none;
      opacity: 0.4;
    }

    /* Layout Principal com Glassmorphism */
    .app {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar com Glassmorphism */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--surface-glass);
      backdrop-filter: var(--blur-glass);
      -webkit-backdrop-filter: var(--blur-glass);
      border-right: 1px solid var(--border-glass);
      display: flex;
      flex-direction: column;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-glass);
      -webkit-backdrop-filter: var(--blur-glass);
      z-index: -1;
    }

    .sidebar.collapsed {
      width: 80px;
    }

    /* Brand com gradient elegante */
    .brand {
      padding: 24px;
      border-bottom: 1px solid var(--border-glass);
      display: flex;
      align-items: center;
      gap: 16px;
      min-height: var(--header-height);
      position: relative;
    }

    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-glass);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-inverse);
      font-weight: 700;
      font-size: 16px;
      flex-shrink: 0;
      box-shadow: var(--shadow-glass);
      transition: all var(--transition-bounce);
      position: relative;
      overflow: hidden;
    }

    .brand-logo::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 100%);
      border-radius: var(--radius-glass);
    }

    .brand-logo:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: var(--shadow-premium);
    }

    .brand-name {
      font-weight: 800;
      font-size: 20px;
      background: var(--text-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.025em;
      transition: all var(--transition-normal);
    }

    /* Navegação com micro-interações */
    .nav {
      flex: 1;
      padding: 24px 16px;
      overflow-y: auto;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      border-radius: var(--radius-lg);
      color: var(--text-secondary);
      text-decoration: none;
      margin-bottom: 6px;
      transition: all var(--transition-normal);
      cursor: pointer;
      position: relative;
      font-weight: 500;
      overflow: hidden;
    }

    .nav-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left var(--transition-slow);
    }

    .nav-item:hover::before {
      left: 100%;
    }

    .nav-item:hover {
      background: var(--surface-glass);
      backdrop-filter: var(--blur-md);
      -webkit-backdrop-filter: var(--blur-md);
      color: var(--text-primary);
      transform: translateX(4px);
      box-shadow: var(--shadow-lg);
    }

    .nav-item.active {
      background: var(--primary-gradient);
      color: var(--text-inverse);
      box-shadow: var(--shadow-glass);
      transform: translateX(6px);
    }

    .nav-item.active::after {
      content: '';
      position: absolute;
      right: -1px;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 60%;
      background: var(--accent-color);
      border-radius: 2px;
    }

    .nav-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all var(--transition-normal);
    }

    .nav-item:hover .nav-icon,
    .nav-item.active .nav-icon {
      transform: scale(1.1);
    }

    /* === NAVEGAÇÃO EXECUTIVA AVANÇADA === */
    
    /* Seções de navegação */
    .nav-section {
      margin-bottom: 24px;
    }

    .nav-section-title {
      font-size: 11px;
      font-weight: 700;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 8px 16px;
      margin-bottom: 8px;
      border-bottom: 1px solid var(--border-glass);
      position: relative;
    }

    .nav-section-title::before {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 16px;
      width: 20px;
      height: 2px;
      background: var(--primary-gradient);
      border-radius: 1px;
    }

    /* Override navegação existente para novo layout */
    .nav {
      flex: 1;
      padding: 16px 8px;
      overflow-y: auto;
    }

    .nav .nav-item {
      font-size: 13px;
      font-weight: 500;
      padding: 10px 16px;
      margin-bottom: 3px;
      position: relative;
    }

    .nav .nav-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -8px;
      width: 3px;
      height: 100%;
      background: transparent;
      border-radius: 2px;
      transition: all var(--transition-normal);
    }

    .nav .nav-item:hover::before {
      background: var(--accent-color);
      opacity: 0.6;
    }

    .nav .nav-item.active::before {
      background: var(--accent-color);
      opacity: 1;
      box-shadow: 0 0 8px var(--accent-color);
    }

    .nav .nav-item.active {
      font-weight: 600;
    }

    /* Sidebar colapsada */
    .sidebar.collapsed .nav-section-title {
      display: none;
    }

    .sidebar.collapsed .nav-item span {
      display: none;
    }

    .sidebar.collapsed .nav-item {
      justify-content: center;
      padding: 12px 8px;
    }

    /* Main Content com Glassmorphism */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    /* Header Premium */
    .header {
      height: var(--header-height);
      background: var(--surface-glass);
      backdrop-filter: var(--blur-glass);
      -webkit-backdrop-filter: var(--blur-glass);
      border-bottom: 1px solid var(--border-glass);
      display: flex;
      align-items: center;
      justify-content: between;
      padding: 0 32px;
      gap: 24px;
      position: relative;
      z-index: 10;
    }

    .header::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: var(--accent-gradient);
      opacity: 0.6;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-title {
      font-size: 24px;
      font-weight: 700;
      background: var(--text-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.025em;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-left: auto;
    }

    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: var(--surface-glass);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      font-size: 14px;
      font-weight: 500;
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
    }

    /* Botões Premium */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-glass);
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left var(--transition-fast);
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-color);
    }

    .btn-primary {
      background: var(--primary-gradient);
      color: var(--text-inverse);
      border-color: var(--primary-color);
      box-shadow: var(--shadow-glass);
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-premium);
    }

    .btn-ghost {
      border: none;
      background: transparent;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
    }

    .btn-small {
      padding: 8px 14px;
      font-size: 13px;
    }

    /* Content Area */
    .content {
      flex: 1;
      padding: 32px;
      overflow-y: auto;
      background: transparent;
      position: relative;
    }

    /* Cards Premium com Glassmorphism */
    .card {
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-glass);
      padding: 28px;
      box-shadow: var(--shadow-glass);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
      border-color: var(--primary-color);
    }

    .card-header {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border-glass);
      position: relative;
    }

    .card-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 6px;
      letter-spacing: -0.025em;
    }

    .card-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 500;
    }

    /* Grid System Responsivo */
    .grid {
      display: grid;
      gap: 28px;
    }

    .grid-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-3 { grid-template-columns: repeat(3, 1fr); }
    .grid-4 { grid-template-columns: repeat(4, 1fr); }

    /* Estatísticas Premium */
    .stat-card {
      text-align: center;
      position: relative;
    }

    .stat-card::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 80px;
      background: var(--accent-gradient);
      opacity: 0.1;
      border-radius: 50%;
      z-index: -1;
    }

    .stat-value {
      font-size: 36px;
      font-weight: 800;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 10px;
      line-height: 1.2;
      font-family: 'JetBrains Mono', monospace;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .stat-change {
      font-size: 12px;
      margin-top: 12px;
      padding: 6px 12px;
      border-radius: var(--radius-lg);
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .stat-change.positive {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .stat-change.negative {
      background: rgba(239, 68, 68, 0.15);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    /* Forms Premium */
    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 10px;
      font-size: 14px;
      letter-spacing: 0.025em;
    }

    .form-input {
      width: 100%;
      padding: 14px 18px;
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 500;
      transition: all var(--transition-normal);
      font-family: inherit;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
      transform: translateY(-1px);
    }

    .form-input::placeholder {
      color: var(--text-muted);
      font-weight: 400;
    }

    .form-select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 16px center;
      background-repeat: no-repeat;
      background-size: 16px;
      padding-right: 48px;
    }

    /* Chat Interface Premium */
    .chat-container {
      height: 520px;
      display: flex;
      flex-direction: column;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-md);
      -webkit-backdrop-filter: var(--blur-md);
      border-radius: var(--radius-glass);
      margin-bottom: 20px;
      border: 1px solid var(--border-glass);
    }

    .message {
      margin-bottom: 18px;
      display: flex;
      gap: 12px;
      animation: messageSlideIn var(--transition-normal) ease-out;
    }

    @keyframes messageSlideIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message.user {
      justify-content: flex-end;
    }

    .message-bubble {
      max-width: 75%;
      padding: 14px 18px;
      border-radius: var(--radius-glass);
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      border: 1px solid var(--border-glass);
      font-weight: 500;
      line-height: 1.5;
    }

    .message.user .message-bubble {
      background: var(--primary-gradient);
      color: var(--text-inverse);
      border-color: var(--primary-color);
    }

    .chat-input-container {
      display: flex;
      gap: 16px;
      align-items: flex-end;
    }

    .chat-input {
      flex: 1;
      min-height: 48px;
      max-height: 120px;
      resize: vertical;
      padding: 14px 18px;
    }

    /* Configurações de Tema Premium */
    .theme-selector {
      display: flex;
      gap: 16px;
      margin-bottom: 28px;
    }

    .theme-option {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-glass);
      cursor: pointer;
      border: 2px solid transparent;
      transition: all var(--transition-bounce);
      position: relative;
      overflow: hidden;
    }

    .theme-option::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(255,255,255,0.8);
      transition: all var(--transition-normal);
      opacity: 0;
    }

    .theme-option:hover {
      transform: scale(1.1);
    }

    .theme-option:hover::before {
      opacity: 1;
    }

    .theme-option.active {
      border-color: var(--primary-color);
      transform: scale(1.15);
      box-shadow: var(--shadow-glass);
    }

    .theme-option.active::before {
      opacity: 1;
    }

    .theme-light { 
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
      border: 1px solid #e2e8f0;
    }
    .theme-dark { 
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      border: 1px solid #334155;
    }
    .theme-tech { 
      background: linear-gradient(135deg, #8b5cf6 0%, #06d6a0 100%);
      border: 1px solid #8b5cf6;
    }

    /* Responsive Premium */
    @media (max-width: 1024px) {
      .grid-4 { grid-template-columns: repeat(2, 1fr); }
      .grid-3 { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: -100%;
        z-index: 1000;
        height: 100vh;
        transition: left var(--transition-normal);
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .main {
        width: 100%;
      }
      
      .content {
        padding: 20px;
      }
      
      .grid-2, .grid-3, .grid-4 {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .header {
        padding: 0 20px;
      }

      .header-title {
        font-size: 20px;
      }
    }

    /* Status Indicators Premium */
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
      position: relative;
    }

    .status-dot::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 50%;
      animation: statusPulse 2s infinite;
    }

    @keyframes statusPulse {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.8); opacity: 0; }
    }

    .status-online { background: var(--success); }
    .status-online::after { background: var(--success); }
    .status-offline { background: var(--error); }
    .status-offline::after { background: var(--error); }
    .status-busy { background: var(--warning); }
    .status-busy::after { background: var(--warning); }

    /* Animações Premium */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .fade-in-up {
      animation: fadeInUp 0.6s ease-out;
    }

    .slide-in-right {
      animation: slideInRight 0.5s ease-out;
    }

    .scale-in {
      animation: scaleIn 0.4s ease-out;
    }

    /* Scrollbar Premium */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--surface-glass);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-strong);
      border-radius: 4px;
      transition: background var(--transition-normal);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-color);
    }

    /* Loading States */
    .loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 2px solid var(--primary-color);
      border-radius: 50%;
      border-top-color: transparent;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Micro-interactions para inputs */
    .form-input:not(:placeholder-shown) + .form-label {
      color: var(--primary-color);
      transform: scale(0.9);
    }

    /* Hover effects premium */
    .interactive:hover {
      transform: translateY(-2px);
      transition: all var(--transition-normal);
    }

    /* Focus states melhorados */
    .focusable:focus-visible {
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
    }

    /* === WHATSAPP TAB SPECIFIC STYLES === */
    
    /* Small stats for WhatsApp */
    .stat-small {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 16px;
    }

    .stat-small-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
    }

    .stat-small-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 500;
    }

    /* Audio recording states */
    .recording {
      background: var(--error) !important;
      color: var(--text-inverse) !important;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    /* Audio preview */
    .audio-preview {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--surface-glass);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-glass);
    }

    .audio-preview audio {
      flex: 1;
      height: 32px;
    }

    .audio-info {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Campaign status */
    .campaign-active {
      padding: 16px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--success);
      border-radius: var(--radius-lg);
      color: var(--success);
    }

    .campaign-progress {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .campaign-bar {
      height: 6px;
      background: var(--surface-glass);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 8px;
    }

    .campaign-bar-fill {
      height: 100%;
      background: var(--success);
      transition: width 0.3s ease;
    }

    /* Call script conditional display */
    .script-conditional {
      transition: all var(--transition-normal);
    }

    /* Button groups */
    .button-group {
      display: flex;
      gap: 8px;
    }

    .button-group .btn {
      flex: 1;
    }

    /* File input styling */
    .file-input-area {
      border: 2px dashed var(--border-medium);
      border-radius: var(--radius-lg);
      padding: 24px;
      text-align: center;
      transition: all var(--transition-normal);
      cursor: pointer;
    }

    .file-input-area:hover {
      border-color: var(--primary-color);
      background: var(--surface-glass);
    }

    .file-input-area.dragover {
      border-color: var(--primary-color);
      background: rgba(37, 99, 235, 0.1);
    }

    /* Status indicators específicos */
    .whatsapp-online {
      color: var(--success);
    }

    .whatsapp-offline {
      color: var(--error);
    }

    /* Responsive WhatsApp Tab */
    @media (max-width: 1024px) {
      .grid-3 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .grid-3 {
        grid-template-columns: 1fr;
      }
      
      .button-group {
        flex-direction: column;
      }
    }

    /* === ANALYTICS & LEADS ADVANCED STYLES === */
    
    /* Chart containers */
    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
    }

    .chart-container canvas {
      border-radius: var(--radius-lg);
    }

    .chart-small {
      height: 200px;
    }

    .chart-large {
      height: 400px;
    }

    /* Mapa de calor */
    .heatmap-container {
      height: 500px;
      width: 100%;
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid var(--border-glass);
      background: var(--surface-glass);
    }

    .leaflet-container {
      border-radius: var(--radius-lg);
    }

    /* Filtros avançados */
    .advanced-filters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-md);
      -webkit-backdrop-filter: var(--blur-md);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-glass);
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .date-range {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .date-range input {
      flex: 1;
    }

    /* Lead cards avançados */
    .lead-card-advanced {
      display: flex;
      gap: 16px;
      padding: 20px;
      margin-bottom: 16px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      transition: all var(--transition-normal);
      position: relative;
    }

    .lead-card-advanced:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .lead-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-inverse);
      font-weight: 700;
      font-size: 20px;
      flex-shrink: 0;
    }

    .lead-info {
      flex: 1;
    }

    .lead-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .lead-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 8px;
      margin-bottom: 8px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .lead-detail {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .lead-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-left: auto;
    }

    .lead-status {
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 4px 8px;
      border-radius: var(--radius-sm);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-novo {
      background: rgba(59, 130, 246, 0.15);
      color: var(--info);
      border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .status-ativo {
      background: rgba(239, 68, 68, 0.15);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .status-perdido {
      background: rgba(107, 114, 128, 0.15);
      color: var(--text-muted);
      border: 1px solid rgba(107, 114, 128, 0.3);
    }

    .status-convertido {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    /* Métricas resumo */
    .metrics-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .metric-card {
      text-align: center;
      padding: 16px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-glass);
    }

    .metric-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .metric-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Paginação */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 24px;
    }

    .pagination-btn {
      padding: 8px 16px;
      border: 1px solid var(--border-medium);
      background: var(--surface);
      color: var(--text-primary);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .pagination-btn:hover {
      background: var(--primary-color);
      color: var(--text-inverse);
      border-color: var(--primary-color);
    }

    .pagination-btn.active {
      background: var(--primary-color);
      color: var(--text-inverse);
      border-color: var(--primary-color);
    }

    .pagination-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Legenda do mapa */
    .map-legend {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      padding: 16px;
      z-index: 1000;
    }

    .legend-title {
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--text-primary);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .legend-red { background: #ef4444; }
    .legend-blue { background: #3b82f6; }
    .legend-gray { background: #9ca3af; }

    /* Loading charts */
    .chart-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 300px;
      color: var(--text-muted);
    }

    .chart-loading i {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    /* Responsive para analytics e leads */
    @media (max-width: 768px) {
      .advanced-filters {
        grid-template-columns: 1fr;
      }
      
      .chart-container {
        height: 250px;
      }
      
      .heatmap-container {
        height: 400px;
      }
      
      .lead-card-advanced {
        flex-direction: column;
        text-align: center;
      }
      
      .lead-actions {
        flex-direction: row;
        justify-content: center;
      }
      
      .metrics-summary {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* === ESTILOS EXECUTIVOS === */
    
    /* Header executivo */
    .executive-header {
      margin-bottom: 32px;
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      position: relative;
      overflow: hidden;
    }

    .executive-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .executive-title {
      font-size: 28px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .executive-subtitle {
      font-size: 16px;
      color: var(--text-muted);
      font-weight: 500;
    }

    /* KPIs Executivos */
    .executive-kpis {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .executive-kpi-card {
      padding: 24px;
      border-radius: var(--radius-xl);
      border: 1px solid var(--border-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .executive-kpi-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      transition: all var(--transition-normal);
    }

    .executive-kpi-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .executive-kpi-card.primary {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);
    }
    .executive-kpi-card.primary::before { background: var(--primary-gradient); }

    .executive-kpi-card.success {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%);
    }
    .executive-kpi-card.success::before { background: linear-gradient(90deg, #10b981, #059669); }

    .executive-kpi-card.warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.05) 100%);
    }
    .executive-kpi-card.warning::before { background: linear-gradient(90deg, #f59e0b, #d97706); }

    .executive-kpi-card.info {
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(8, 145, 178, 0.05) 100%);
    }
    .executive-kpi-card.info::before { background: linear-gradient(90deg, #06b6d4, #0891b2); }

    .executive-kpi-card.accent {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(124, 58, 237, 0.05) 100%);
    }
    .executive-kpi-card.accent::before { background: linear-gradient(90deg, #8b5cf6, #7c3aed); }

    .kpi-icon {
      width: 64px;
      height: 64px;
      border-radius: var(--radius-lg);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      flex-shrink: 0;
      box-shadow: var(--shadow-md);
    }

    .executive-kpi-card.success .kpi-icon { background: linear-gradient(135deg, #10b981, #059669); }
    .executive-kpi-card.warning .kpi-icon { background: linear-gradient(135deg, #f59e0b, #d97706); }
    .executive-kpi-card.info .kpi-icon { background: linear-gradient(135deg, #06b6d4, #0891b2); }
    .executive-kpi-card.accent .kpi-icon { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

    .kpi-content {
      flex: 1;
    }

    .kpi-value {
      font-size: 32px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 6px;
      font-family: 'JetBrains Mono', monospace;
      line-height: 1.1;
    }

    .kpi-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .kpi-change {
      font-size: 13px;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: var(--radius-lg);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .kpi-change.positive {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    /* Charts executivos */
    .executive-chart {
      border: 1px solid var(--border-glass);
      position: relative;
    }

    .executive-chart::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--accent-gradient);
      opacity: 0.6;
    }

    /* Insights executivos */
    .executive-insights {
      position: relative;
    }

    .insights-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .insight-card {
      padding: 24px;
      border-radius: var(--radius-lg);
      border-left: 4px solid;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-sm);
      -webkit-backdrop-filter: var(--blur-sm);
      transition: all var(--transition-normal);
      position: relative;
    }

    .insight-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .insight-card.critical {
      border-left-color: #ef4444;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, transparent 100%);
    }

    .insight-card.high {
      border-left-color: #f59e0b;
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, transparent 100%);
    }

    .insight-card.medium {
      border-left-color: #06b6d4;
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.05) 0%, transparent 100%);
    }

    .insight-priority {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 4px 12px;
      border-radius: var(--radius-sm);
      display: inline-block;
      margin-bottom: 12px;
    }

    .insight-card.critical .insight-priority {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .insight-card.high .insight-priority {
      background: rgba(245, 158, 11, 0.15);
      color: #f59e0b;
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .insight-card.medium .insight-priority {
      background: rgba(6, 182, 212, 0.15);
      color: #06b6d4;
      border: 1px solid rgba(6, 182, 212, 0.3);
    }

    /* Estilos para Performance de Prospecção */
    .activity-metric-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .activity-metric-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-color);
      opacity: 0.8;
    }

    .activity-metric-card.success::before { background: var(--success); }
    .activity-metric-card.warning::before { background: var(--warning); }
    .activity-metric-card.info::before { background: var(--info); }

    .metric-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 16px;
      color: var(--text-muted);
      font-size: 14px;
      font-weight: 500;
    }

    .metric-header i {
      font-size: 18px;
      color: var(--primary-color);
    }

    .metric-value {
      font-size: 32px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 8px;
      line-height: 1;
    }

    .metric-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .metric-change {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      font-size: 12px;
      font-weight: 600;
      padding: 4px 8px;
      border-radius: 6px;
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .performance-chart-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
      height: 100%;
    }

    .chart-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .chart-card-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0;
    }

    .chart-period {
      font-size: 12px;
      color: var(--text-muted);
      background: rgba(255, 255, 255, 0.05);
      padding: 4px 8px;
      border-radius: 6px;
    }

    .chart-controls {
      display: flex;
      gap: 8px;
    }

    .chart-control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .chart-control-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .timing-heatmap-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 24px;
    }

    .timing-legend {
      display: flex;
      gap: 16px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .legend-item::before {
      content: '';
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }

    .legend-item.high::before { background: #ef4444; }
    .legend-item.medium::before { background: #f59e0b; }
    .legend-item.low::before { background: #6b7280; }

    .timing-heatmap {
      display: grid;
      grid-template-columns: repeat(24, 1fr);
      gap: 4px;
      margin-top: 20px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
    }

    .heatmap-cell {
      aspect-ratio: 1;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .heatmap-cell:hover {
      transform: scale(1.1);
      z-index: 10;
      position: relative;
    }

    .chart-container-large {
      height: 300px;
      position: relative;
    }

    /* === ESTILOS PROFISSIONAIS PARA CONFIGURAÇÕES === */
    .settings-header {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 32px;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .settings-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      opacity: 0.3;
    }

    .settings-header-content {
      display: flex;
      align-items: center;
      gap: 24px;
      position: relative;
      z-index: 1;
    }

    .settings-icon {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .settings-header h1 {
      font-size: 48px;
      font-weight: 800;
      margin: 0 0 8px 0;
      background: linear-gradient(45deg, #ffffff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .settings-header p {
      font-size: 18px;
      opacity: 0.9;
      margin: 0;
      font-weight: 400;
    }

    .settings-section {
      margin-bottom: 48px;
    }

    .professional-grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }

    .professional-grid-3 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }

    .professional-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      padding: 32px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .professional-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    }

    .professional-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .card-header-pro {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 32px;
    }

    .header-icon {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .card-header-pro h3 {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 4px 0;
    }

    .card-header-pro p {
      font-size: 14px;
      color: var(--text-muted);
      margin: 0;
    }

    /* Logo Upload Section */
    .logo-upload-section {
      margin-bottom: 32px;
    }

    .logo-preview {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px auto;
      position: relative;
      overflow: hidden;
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .logo-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }

    .logo-placeholder i {
      font-size: 32px;
      margin-bottom: 8px;
      opacity: 0.8;
    }

    .logo-placeholder span {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .logo-controls {
      text-align: center;
    }

    .btn-upload {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 0 auto 12px auto;
      font-size: 14px;
    }

    .btn-upload:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .upload-info {
      font-size: 12px;
      color: var(--text-muted);
      text-align: center;
    }

    /* Form Elements */
    .form-group-pro {
      margin-bottom: 24px;
    }

    .label-pro {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .input-pro {
      width: 100%;
      padding: 16px 20px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      font-size: 16px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .input-pro:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(var(--primary-color), 0.1);
      background: rgba(255, 255, 255, 0.08);
    }

    /* Color Controls */
    .color-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .color-item {
      display: flex;
      flex-direction: column;
    }

    .color-input-wrapper {
      display: flex;
      align-items: center;
      gap: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 8px 12px;
      transition: all 0.3s ease;
    }

    .color-input-wrapper:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(var(--primary-color), 0.1);
    }

    .color-input {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .color-input:hover {
      transform: scale(1.1);
    }

    .color-text {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text-primary);
      font-size: 14px;
      font-family: 'Courier New', monospace;
      text-transform: uppercase;
    }

    .color-text:focus {
      outline: none;
    }

    /* Color Presets */
    .color-presets {
      padding: 24px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .preset-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 16px;
    }

    .preset-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 16px;
    }

    .color-preset {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .color-preset:hover {
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .color-preset.active {
      border-color: var(--primary-color);
      background: rgba(var(--primary-color), 0.1);
    }

    .preset-colors {
      display: flex;
      gap: 4px;
      margin-bottom: 8px;
      justify-content: center;
    }

    .preset-colors span {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .preset-name {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-primary);
    }

    /* Theme Grid */
    .theme-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }

    .theme-card {
      background: rgba(255, 255, 255, 0.05);
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .theme-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .theme-card.active {
      border-color: var(--primary-color);
      background: rgba(var(--primary-color), 0.05);
    }

    .theme-card.active::after {
      content: '✓';
      position: absolute;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      background: var(--primary-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
    }

    .theme-preview {
      height: 120px;
      border-radius: 12px;
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .light-preview {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    }

    .dark-preview {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    }

    .gradient-preview {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .glass-preview {
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
      backdrop-filter: blur(10px);
    }

    .minimal-preview {
      background: #ffffff;
    }

    .contrast-preview {
      background: linear-gradient(135deg, #000000 0%, #ffffff 100%);
    }

    .preview-header {
      height: 20px;
      background: rgba(0, 0, 0, 0.1);
      margin: 8px;
      border-radius: 4px;
    }

    .preview-content {
      display: flex;
      gap: 8px;
      margin: 8px;
    }

    .preview-card {
      flex: 1;
      height: 60px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .theme-info {
      text-align: center;
    }

    .theme-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .theme-desc {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.4;
    }

    /* Background Section */
    .background-section {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 32px;
      margin-top: 24px;
    }

    .background-type-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      padding: 4px;
    }

    .bg-type-btn {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text-muted);
      padding: 12px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .bg-type-btn.active {
      background: var(--primary-color);
      color: white;
    }

    .gradient-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .gradient-option {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .gradient-option:hover {
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .gradient-preview {
      width: 100%;
      height: 60px;
      border-radius: 8px;
      margin-bottom: 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .gradient-option span {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
    }

    /* Preference Cards */
    .preference-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 24px;
      transition: all 0.3s ease;
    }

    .preference-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .preference-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .preference-header i {
      font-size: 20px;
      color: var(--primary-color);
    }

    .preference-header h4 {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0;
    }

    .switch-label {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      cursor: pointer;
      user-select: none;
    }

    .switch {
      position: relative;
      width: 50px;
      height: 26px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 13px;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .switch::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    input[type="checkbox"]:checked + .switch {
      background: var(--primary-color);
      border-color: var(--primary-color);
    }

    input[type="checkbox"]:checked + .switch::before {
      transform: translateX(24px);
    }

    input[type="checkbox"] {
      display: none;
    }

    .switch-label span:last-child {
      font-size: 14px;
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Action Buttons */
    .settings-actions {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-top: 48px;
      padding-top: 32px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-action {
      padding: 16px 32px;
      border: 2px solid transparent;
      border-radius: 16px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      min-width: 200px;
      justify-content: center;
    }

    .btn-action.primary {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      color: white;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .btn-action.primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }

    .btn-action.secondary {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .btn-action.secondary:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    .btn-action.success {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
    }

    .btn-action.success:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(16, 185, 129, 0.3);
    }

    /* Upload Area */
    .upload-area {
      border: 3px dashed rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 48px 24px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 24px;
    }

    .upload-area:hover {
      border-color: var(--primary-color);
      background: rgba(var(--primary-color), 0.05);
    }

    .upload-area i {
      font-size: 48px;
      color: var(--primary-color);
      margin-bottom: 16px;
    }

    .upload-area h3 {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 8px 0;
    }

    .upload-area p {
      font-size: 16px;
      color: var(--text-muted);
      margin: 0 0 16px 0;
    }

    .upload-area small {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Image Settings */
    .image-settings {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .setting-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .setting-item label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .setting-item input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
      cursor: pointer;
    }

    .setting-item select {
      padding: 12px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      font-size: 14px;
      cursor: pointer;
    }

    .setting-item select:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .insight-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    /* === ESTILOS AVANÇADOS PARA CHAT === */
    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      margin-bottom: 24px;
    }

    .chat-status {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: relative;
    }

    .status-indicator.online {
      background: var(--success);
      animation: pulse-online 2s infinite;
    }

    @keyframes pulse-online {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .status-info h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 4px 0;
    }

    .status-info p {
      font-size: 14px;
      color: var(--text-muted);
      margin: 0;
    }

    .chat-controls {
      display: flex;
      gap: 12px;
    }

    .btn-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-icon:hover {
      background: rgba(255, 255, 255, 0.15);
      color: var(--text-primary);
      transform: scale(1.05);
    }

    .chat-grid {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 24px;
      height: calc(100vh - 200px);
    }

    .chat-main {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .chat-container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      scroll-behavior: smooth;
    }

    .chat-messages::-webkit-scrollbar {
      width: 6px;
    }

    .chat-messages::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    .chat-messages::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    .message {
      display: flex;
      margin-bottom: 24px;
      animation: fadeInUp 0.3s ease;
    }

    .message.user-message {
      flex-direction: row-reverse;
    }

    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 16px;
      margin: 0 12px 0 0;
      flex-shrink: 0;
    }

    .user-message .message-avatar {
      background: rgba(255, 255, 255, 0.1);
      margin: 0 0 0 12px;
    }

    .message-content {
      flex: 1;
      max-width: 70%;
    }

    .message-bubble {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 16px 20px;
      position: relative;
    }

    .user-message .message-bubble {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      border-color: transparent;
    }

    .message-text {
      color: var(--text-primary);
      line-height: 1.5;
      font-size: 15px;
    }

    .user-message .message-text {
      color: white;
    }

    .message-time {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 8px;
      text-align: right;
    }

    .user-message .message-time {
      color: rgba(255, 255, 255, 0.7);
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      align-items: center;
      padding: 0 24px 16px 24px;
    }

    .typing-avatar {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      margin-right: 12px;
    }

    .typing-animation {
      display: flex;
      gap: 4px;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
    }

    .typing-animation span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-animation span:nth-child(2) { animation-delay: 0.2s; }
    .typing-animation span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
      0%, 80%, 100% { opacity: 0.3; transform: scale(1); }
      40% { opacity: 1; transform: scale(1.2); }
    }

    /* Chat Input Area */
    .chat-input-area {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.02);
      padding: 20px;
    }

    .quick-responses {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 8px;
    }

    .quick-response-btn {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .quick-response-btn:hover {
      background: rgba(var(--primary-color), 0.1);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .chat-input-container {
      display: flex;
      gap: 12px;
      align-items: end;
    }

    .input-wrapper {
      flex: 1;
      position: relative;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 12px 16px;
      transition: all 0.3s ease;
    }

    .input-wrapper:focus-within {
      border-color: var(--primary-color);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 0 0 4px rgba(var(--primary-color), 0.1);
    }

    .chat-input {
      width: 100%;
      background: transparent;
      border: none;
      color: var(--text-primary);
      font-size: 15px;
      line-height: 1.4;
      resize: none;
      outline: none;
      min-height: 20px;
      max-height: 120px;
    }

    .chat-input::placeholder {
      color: var(--text-muted);
    }

    .input-actions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn-action {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-action:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .send-btn {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      border: none;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .send-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .send-btn:active {
      transform: scale(0.95);
    }

    .chat-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
    }

    .character-count {
      font-size: 12px;
      color: var(--text-muted);
    }

    .powered-by {
      font-size: 12px;
      color: var(--text-muted);
      opacity: 0.7;
    }

    /* Chat Sidebar */
    .chat-sidebar {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 24px;
      overflow-y: auto;
    }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-header h4 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0;
    }

    .btn-new-chat {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.3s ease;
    }

    .btn-new-chat:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .conversations-list {
      margin-bottom: 24px;
    }

    .conversation-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .conversation-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .conversation-item.active {
      background: rgba(var(--primary-color), 0.1);
      border: 1px solid rgba(var(--primary-color), 0.3);
    }

    .conversation-info {
      flex: 1;
      min-width: 0;
    }

    .conversation-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .conversation-preview {
      font-size: 12px;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .conversation-time {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .conversation-actions {
      display: flex;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .conversation-item:hover .conversation-actions {
      opacity: 1;
    }

    .btn-mini {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      transition: all 0.3s ease;
    }

    .btn-mini:hover {
      background: var(--primary-color);
      color: white;
    }

    /* AI Insights */
    .ai-insights {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 16px;
      padding: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .insights-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .insights-header i {
      color: var(--warning);
    }

    .insight-item {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .insight-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      flex-shrink: 0;
    }

    .insight-icon.success {
      background: rgba(var(--success), 0.2);
      color: var(--success);
    }

    .insight-icon.warning {
      background: rgba(var(--warning), 0.2);
      color: var(--warning);
    }

    .insight-icon.info {
      background: rgba(var(--info), 0.2);
      color: var(--info);
    }

    .insight-text {
      flex: 1;
    }

    .insight-text strong {
      font-size: 13px;
      color: var(--text-primary);
      display: block;
      margin-bottom: 4px;
    }

    .insight-text p {
      font-size: 11px;
      color: var(--text-muted);
      margin: 0;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsividade do Chat */
    @media (max-width: 1024px) {
      .chat-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .chat-sidebar {
        display: none;
      }

      .quick-responses {
        flex-wrap: wrap;
      }
    }

    .insight-content {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .insight-impact {
      font-size: 13px;
      font-weight: 600;
      color: var(--success);
      background: rgba(16, 185, 129, 0.1);
      padding: 8px 12px;
      border-radius: var(--radius-md);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    /* Responsive executivo */
    @media (max-width: 768px) {
      .executive-kpis {
        grid-template-columns: 1fr;
      }
      
      .insights-grid {
        grid-template-columns: 1fr;
      }
      
      .executive-title {
        font-size: 22px;
      }
      
      .kpi-value {
        font-size: 24px;
      }
    }

    /* =========================== */
    /* EXECUTIVE TABS STYLES       */
    /* =========================== */

    /* --- Intelligence & Personalization --- */
    .executive-grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
      margin-bottom: 32px;
    }

    .sentiment-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      text-align: center;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .sentiment-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .sentiment-card.positive::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .sentiment-card.neutral::before {
      background: linear-gradient(90deg, #6b7280, #4b5563);
    }

    .sentiment-card.negative::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .sentiment-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .sentiment-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .sentiment-header i {
      font-size: 24px;
      color: var(--primary-color);
    }

    .sentiment-header span {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .sentiment-value {
      font-size: 32px;
      font-weight: 900;
      color: var(--primary-color);
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .sentiment-meta {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .sentiment-trend {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: var(--radius-lg);
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    /* Archetype Cards */
    .archetype-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .archetype-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .archetype-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .archetype-card.master::before {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .archetype-card.explorer::before {
      background: linear-gradient(90deg, #06b6d4, #0891b2);
    }

    .archetype-card.sage::before {
      background: linear-gradient(90deg, #8b5cf6, #7c3aed);
    }

    .archetype-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .archetype-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .archetype-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-lg);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    }

    .archetype-card.master .archetype-icon {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }

    .archetype-card.explorer .archetype-icon {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
    }

    .archetype-card.sage .archetype-icon {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    }

    .archetype-info h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .archetype-info p {
      font-size: 14px;
      color: var(--text-muted);
    }

    .archetype-stats {
      display: flex;
      gap: 24px;
      margin-bottom: 16px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary-color);
      display: block;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .archetype-strategy h4 {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .archetype-strategy p {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* AI Models Grid */
    .ai-models-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .ai-model-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .ai-model-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-gradient);
    }

    .ai-model-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .model-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .model-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .model-status {
      padding: 4px 12px;
      border-radius: var(--radius-lg);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .model-status.active {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .model-metrics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .metric {
      text-align: center;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-md);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .metric-label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 6px;
      display: block;
    }

    .metric-value {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    /* --- Conversion & Qualification --- */
    .funnel-container {
      margin-bottom: 32px;
    }

    .funnel-stage {
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      padding: 24px;
      margin-bottom: 16px;
      transition: all var(--transition-normal);
    }

    .funnel-stage:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .stage-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .stage-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .stage-count {
      font-size: 24px;
      font-weight: 900;
      color: var(--primary-color);
      font-family: 'JetBrains Mono', monospace;
    }

    .stage-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: 8px;
    }

    .stage-fill {
      height: 100%;
      border-radius: var(--radius-lg);
      transition: width 1s ease-in-out;
    }

    .stage-meta {
      font-size: 14px;
      color: var(--text-muted);
      text-align: right;
    }

    /* Score Distribution */
    .score-distribution {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .score-segment {
      padding: 20px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      text-align: center;
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .score-segment::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .score-segment.hot::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .score-segment.warm::before {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .score-segment.cold::before {
      background: linear-gradient(90deg, #06b6d4, #0891b2);
    }

    .score-segment.frozen::before {
      background: linear-gradient(90deg, #6b7280, #4b5563);
    }

    .score-segment:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .score-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .score-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }

    .score-segment.hot .score-icon {
      background: linear-gradient(135deg, #ef4444, #dc2626);
    }

    .score-segment.warm .score-icon {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }

    .score-segment.cold .score-icon {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
    }

    .score-segment.frozen .score-icon {
      background: linear-gradient(135deg, #6b7280, #4b5563);
    }

    .score-info h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .score-info p {
      font-size: 13px;
      color: var(--text-muted);
    }

    .score-stats {
      margin-bottom: 16px;
    }

    .score-count {
      font-size: 28px;
      font-weight: 900;
      color: var(--text-primary);
      display: block;
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
    }

    .score-percentage {
      font-size: 14px;
      color: var(--text-muted);
      display: block;
      margin-bottom: 8px;
    }

    .score-conversion {
      font-size: 13px;
      font-weight: 600;
      padding: 4px 8px;
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
      border-radius: var(--radius-md);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    /* Scoring Factors */
    .scoring-factors {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .factor-card {
      padding: 20px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      transition: all var(--transition-normal);
    }

    .factor-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .factor-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .factor-weight {
      font-size: 14px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .factor-desc {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* --- Competitive Analysis --- */
    .competitive-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .market-share-card,
    .competitor-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .market-share-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .competitor-card.leader::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .market-share-card:hover,
    .competitor-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .share-header,
    .competitor-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .company-logo {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
    }

    .company-logo.our-company {
      background: var(--primary-gradient);
    }

    .company-logo.competitor {
      background: linear-gradient(135deg, #6b7280, #4b5563);
    }

    .company-info h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .market-position {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .share-metrics {
      text-align: center;
    }

    .share-value {
      font-size: 32px;
      font-weight: 900;
      color: var(--primary-color);
      display: block;
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .share-label {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .share-trend {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: var(--radius-lg);
    }

    .share-trend.positive {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .competitor-metrics {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .metric-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
    }

    .metric-row span:first-child {
      color: var(--text-muted);
    }

    .metric-row span:last-child {
      font-weight: 600;
      color: var(--text-primary);
    }

    .metric-row .positive {
      color: var(--success);
    }

    /* SWOT Grid */
    .swot-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
      margin-bottom: 32px;
    }

    .swot-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .swot-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .swot-card.strengths::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .swot-card.weaknesses::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .swot-card.opportunities::before {
      background: linear-gradient(90deg, #06b6d4, #0891b2);
    }

    .swot-card.threats::before {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .swot-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .swot-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .swot-header i {
      font-size: 20px;
      color: var(--primary-color);
    }

    .swot-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .swot-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .swot-list li {
      padding: 8px 0;
      font-size: 14px;
      color: var(--text-muted);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      padding-left: 20px;
    }

    .swot-list li:last-child {
      border-bottom: none;
    }

    .swot-list li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: var(--primary-color);
      font-weight: bold;
    }

    /* Comparison Table */
    .comparison-table {
      overflow-x: auto;
      margin-bottom: 32px;
    }

    .competitive-matrix {
      width: 100%;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
    }

    .competitive-matrix th,
    .competitive-matrix td {
      padding: 16px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .competitive-matrix th {
      background: rgba(255, 255, 255, 0.05);
      font-weight: 600;
      color: var(--text-primary);
      font-size: 14px;
    }

    .competitive-matrix th.our-company {
      background: rgba(59, 130, 246, 0.2);
      color: var(--primary-color);
    }

    .competitive-matrix td {
      font-size: 13px;
      color: var(--text-muted);
    }

    .rating {
      font-size: 16px;
      text-align: center;
    }

    .rating.excellent {
      color: #10b981;
    }

    .rating.good {
      color: #06b6d4;
    }

    .rating.average {
      color: #f59e0b;
    }

    .rating.poor {
      color: #ef4444;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .executive-grid-3 {
        grid-template-columns: 1fr;
      }

      .swot-grid {
        grid-template-columns: 1fr;
      }

      .competitive-grid {
        grid-template-columns: 1fr;
      }

      .score-distribution {
        grid-template-columns: 1fr;
      }
    }

    /* --- Automation & Workflows --- */
    .workflows-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .workflow-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .workflow-card.active::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .workflow-card.paused::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .workflow-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .workflow-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .workflow-status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
    }

    .workflow-status.running {
      color: var(--success);
      animation: pulse 2s infinite;
    }

    .workflow-status.paused {
      color: var(--warning-color);
    }

    .workflow-info h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .workflow-type {
      font-size: 13px;
      color: var(--text-muted);
    }

    .workflow-actions {
      display: flex;
      gap: 8px;
    }

    .btn-icon {
      width: 32px;
      height: 32px;
      border: 1px solid var(--border-glass);
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .btn-icon:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .workflow-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }

    .workflow-stats .stat {
      text-align: center;
    }

    .workflow-progress {
      margin-top: 16px;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: 8px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #059669);
      border-radius: var(--radius-lg);
      transition: width 1s ease-in-out;
    }

    .progress-bar.paused-bar .progress-fill {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .progress-text {
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Triggers Grid */
    .triggers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .trigger-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }

    .trigger-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-gradient);
    }

    .trigger-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .trigger-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-lg);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
      flex-shrink: 0;
    }

    .trigger-content {
      flex: 1;
    }

    .trigger-content h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .trigger-content p {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .trigger-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }

    .action-tag {
      padding: 4px 8px;
      background: rgba(59, 130, 246, 0.1);
      color: var(--primary-color);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: var(--radius-md);
      font-size: 12px;
      font-weight: 500;
    }

    .trigger-stats {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Performance Metrics */
    .automation-performance {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .performance-metric {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .performance-metric::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--accent-gradient);
    }

    .performance-metric:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .metric-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .metric-header i {
      font-size: 20px;
      color: var(--primary-color);
    }

    .metric-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .metric-value {
      text-align: center;
      margin-bottom: 20px;
    }

    .value-number {
      font-size: 32px;
      font-weight: 900;
      color: var(--text-primary);
      display: block;
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
    }

    .value-label {
      font-size: 14px;
      color: var(--text-muted);
    }

    .metric-breakdown {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
    }

    .breakdown-item span:first-child {
      color: var(--text-muted);
    }

    .breakdown-item span:last-child {
      font-weight: 600;
      color: var(--text-primary);
    }

    .breakdown-item.success span:last-child {
      color: var(--success);
    }

    .breakdown-item.warning span:last-child {
      color: var(--warning-color);
    }

    .breakdown-item.error span:last-child {
      color: var(--error);
    }

    /* --- Advanced Analytics --- */
    .predictive-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .prediction-card {
      padding: 28px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .prediction-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .prediction-card.revenue::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .prediction-card.churn::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .prediction-card.conversion::before {
      background: linear-gradient(90deg, #06b6d4, #0891b2);
    }

    .prediction-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-premium);
    }

    .prediction-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .prediction-header i {
      font-size: 24px;
      color: var(--primary-color);
    }

    .prediction-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .prediction-content {
      text-align: center;
    }

    .prediction-value {
      font-size: 36px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .prediction-value.warning {
      color: var(--warning-color);
    }

    .prediction-value.success {
      color: var(--success);
    }

    .prediction-period {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .confidence-score {
      font-size: 13px;
      font-weight: 600;
      padding: 6px 12px;
      background: rgba(59, 130, 246, 0.1);
      color: var(--primary-color);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: var(--radius-lg);
      display: inline-block;
      margin-bottom: 16px;
    }

    .prediction-factors {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .factor {
      padding: 4px 8px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Advanced Charts */
    .advanced-charts-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
      margin-bottom: 32px;
    }

    .advanced-charts-grid .chart-card {
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      padding: 24px;
      transition: all var(--transition-normal);
    }

    .advanced-charts-grid .chart-card.full-width {
      grid-column: 1 / -1;
    }

    .advanced-charts-grid .chart-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .chart-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .chart-controls select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-md);
      padding: 8px 12px;
      color: var(--text-primary);
      font-size: 14px;
    }

    .chart-container.large {
      height: 300px;
    }

    /* Reports Grid */
    .reports-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .report-template {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .report-template::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-gradient);
    }

    .report-template:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .report-icon {
      width: 60px;
      height: 60px;
      border-radius: var(--radius-lg);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      flex-shrink: 0;
    }

    .report-info {
      flex: 1;
    }

    .report-info h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .report-info p {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .report-meta {
      display: flex;
      gap: 16px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .report-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .report-actions .btn {
      padding: 8px 16px;
      font-size: 13px;
      min-width: 80px;
    }

    /* --- Team Management --- */
    .team-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .team-member-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .team-member-card.top-performer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .team-member-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .member-avatar {
      position: relative;
      width: 60px;
      height: 60px;
      margin: 0 auto 16px;
    }

    .member-avatar img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 3px solid var(--border-glass);
    }

    .performance-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #f59e0b, #d97706);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      border: 2px solid var(--surface);
    }

    .member-info {
      text-align: center;
    }

    .member-info h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .member-role {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 16px;
      display: block;
    }

    .member-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 16px;
    }

    .performance-score {
      text-align: center;
    }

    .performance-score span {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 8px;
      display: block;
    }

    .score-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .score-fill {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #059669);
      border-radius: var(--radius-lg);
      transition: width 1s ease-in-out;
    }

    /* Goals Grid */
    .goals-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .goal-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .goal-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary-gradient);
    }

    .goal-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .goal-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .goal-header i {
      font-size: 20px;
      color: var(--primary-color);
    }

    .goal-header h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .goal-progress {
      text-align: center;
    }

    .goal-numbers {
      font-size: 24px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 12px;
      font-family: 'JetBrains Mono', monospace;
    }

    .goal-numbers .current {
      color: var(--primary-color);
    }

    .goal-numbers .separator {
      color: var(--text-muted);
      margin: 0 8px;
    }

    .goal-numbers .target {
      color: var(--text-muted);
    }

    .progress-bar.goal-bar {
      margin-bottom: 12px;
    }

    .goal-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
    }

    .progress-text {
      color: var(--text-muted);
    }

    .progress-text.success {
      color: var(--success);
    }

    .days-remaining {
      color: var(--text-muted);
    }

    .achievement {
      color: var(--success);
    }

    /* Training Grid */
    .training-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .training-module {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .training-module::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-gradient);
    }

    .training-module:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .module-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .module-header i {
      font-size: 20px;
      color: var(--primary-color);
    }

    .module-header h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .module-progress {
      margin-bottom: 16px;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .progress-info span:first-child {
      color: var(--text-muted);
    }

    .percentage {
      font-weight: 600;
      color: var(--text-primary);
    }

    .percentage.success {
      color: var(--success);
    }

    .module-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      color: var(--text-muted);
    }

    .participants {
      color: var(--text-muted);
    }

    .duration {
      color: var(--text-muted);
    }

    .completion {
      color: var(--success);
      font-weight: 600;
    }

    /* --- Compliance & Governance --- */
    .compliance-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .compliance-card {
      padding: 28px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .compliance-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .compliance-card.status-good::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .compliance-card.status-warning::before {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .compliance-card.status-error::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .compliance-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-premium);
    }

    .compliance-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .compliance-header i {
      font-size: 24px;
      color: var(--primary-color);
    }

    .compliance-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .compliance-stats {
      margin-bottom: 24px;
    }

    .compliance-percentage {
      font-size: 36px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .compliance-percentage.warning {
      color: var(--warning-color);
    }

    .compliance-label {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 20px;
    }

    .compliance-details {
      text-align: left;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .detail-row span:first-child {
      color: var(--text-muted);
    }

    .detail-row span:last-child {
      font-weight: 600;
    }

    .detail-row .success {
      color: var(--success);
    }

    .detail-row .warning {
      color: var(--warning-color);
    }

    .detail-row .info {
      color: var(--primary-color);
    }

    /* Audit Timeline */
    .audit-timeline {
      margin-bottom: 32px;
    }

    .audit-entry {
      display: flex;
      gap: 20px;
      margin-bottom: 24px;
      padding: 20px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-lg);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .audit-entry::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary-gradient);
    }

    .audit-entry:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .audit-time {
      text-align: center;
      min-width: 80px;
    }

    .audit-time .time {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      display: block;
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
    }

    .audit-time .date {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .audit-content {
      flex: 1;
    }

    .audit-action {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .audit-action i {
      font-size: 18px;
      color: var(--primary-color);
    }

    .audit-action h4 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .audit-action.data-access i {
      color: var(--primary-color);
    }

    .audit-action.data-modification i {
      color: var(--warning-color);
    }

    .audit-action.consent i {
      color: var(--success);
    }

    .audit-action.data-export i {
      color: var(--accent-color);
    }

    .audit-details {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Policies Grid */
    .policies-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .policy-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }

    .policy-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-gradient);
    }

    .policy-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .policy-icon {
      width: 56px;
      height: 56px;
      border-radius: var(--radius-lg);
      background: var(--primary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 22px;
      flex-shrink: 0;
    }

    .policy-content {
      flex: 1;
    }

    .policy-content h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .policy-compliance {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .compliance-rate {
      font-size: 24px;
      font-weight: 900;
      font-family: 'JetBrains Mono', monospace;
    }

    .compliance-rate.success {
      color: var(--success);
    }

    .compliance-rate.warning {
      color: var(--warning-color);
    }

    .compliance-label {
      font-size: 13px;
      color: var(--text-muted);
    }

    .policy-requirements {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .policy-requirements li {
      padding: 6px 0;
      font-size: 14px;
      color: var(--text-muted);
      position: relative;
      padding-left: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .policy-requirements li:last-child {
      border-bottom: none;
    }

    .policy-requirements li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--success);
      font-weight: bold;
      font-size: 12px;
    }

    /* --- Admin & Configuration --- */
    .system-status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .status-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
      text-align: center;
    }

    .status-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .status-card.healthy::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .status-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .status-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .status-header i {
      font-size: 24px;
      color: var(--primary-color);
    }

    .status-header h3 {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .status-indicator {
      margin-bottom: 20px;
    }

    .status-value {
      font-size: 32px;
      font-weight: 900;
      color: var(--text-primary);
      margin-bottom: 8px;
      font-family: 'JetBrains Mono', monospace;
    }

    .status-label {
      font-size: 14px;
      color: var(--text-muted);
    }

    .status-details {
      text-align: left;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .detail-item span:first-child {
      color: var(--text-muted);
    }

    .detail-item span:last-child {
      font-weight: 600;
    }

    .detail-item .good {
      color: var(--success);
    }

    .detail-item .warning {
      color: var(--warning-color);
    }

    .detail-item .error {
      color: var(--error);
    }

    /* User Management */
    .user-management {
      margin-bottom: 32px;
    }

    .users-summary {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 32px;
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
    }

    .summary-item {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .summary-item i {
      font-size: 24px;
      color: var(--primary-color);
    }

    .summary-value {
      font-size: 28px;
      font-weight: 900;
      color: var(--text-primary);
      font-family: 'JetBrains Mono', monospace;
    }

    .summary-label {
      font-size: 13px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .users-table-container {
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      overflow: hidden;
    }

    .users-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }

    .users-table th,
    .users-table td {
      padding: 16px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .users-table th {
      background: rgba(255, 255, 255, 0.05);
      font-weight: 600;
      color: var(--text-primary);
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .users-table td {
      font-size: 14px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-info img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid var(--border-glass);
    }

    .user-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 2px;
    }

    .user-email {
      font-size: 12px;
      color: var(--text-muted);
    }

    .role-badge {
      padding: 4px 12px;
      border-radius: var(--radius-lg);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .role-badge.admin {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .role-badge.user {
      background: rgba(59, 130, 246, 0.15);
      color: var(--primary-color);
      border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .role-badge.supervisor {
      background: rgba(245, 158, 11, 0.15);
      color: var(--warning-color);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .status-badge {
      padding: 4px 12px;
      border-radius: var(--radius-lg);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-badge.online {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .status-badge.offline {
      background: rgba(107, 114, 128, 0.15);
      color: #6b7280;
      border: 1px solid rgba(107, 114, 128, 0.3);
    }

    /* Integrations */
    .integrations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .integration-card {
      padding: 24px;
      background: var(--surface-glass);
      backdrop-filter: var(--blur-lg);
      -webkit-backdrop-filter: var(--blur-lg);
      border: 1px solid var(--border-glass);
      border-radius: var(--radius-xl);
      transition: all var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .integration-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .integration-card.connected::before {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    .integration-card.warning::before {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }

    .integration-card.error::before {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }

    .integration-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-premium);
    }

    .integration-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .integration-logo {
      width: 24px;
      height: 24px;
      filter: brightness(0) invert(1);
      margin-right: 12px;
    }

    .integration-info h3 {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .integration-type {
      font-size: 13px;
      color: var(--text-muted);
    }

    .integration-status {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-size: 16px;
    }

    .integration-status.connected {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success);
    }

    .integration-status.warning {
      background: rgba(245, 158, 11, 0.15);
      color: var(--warning-color);
    }

    .integration-status.error {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
    }

    .integration-stats {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
    }

    .stat-row span:first-child {
      color: var(--text-muted);
    }

    .stat-row span:last-child {
      font-weight: 600;
      color: var(--text-primary);
    }

    /* Responsive adjustments for new styles */
    @media (max-width: 768px) {
      .workflows-grid {
        grid-template-columns: 1fr;
      }

      .predictive-grid {
        grid-template-columns: 1fr;
      }

      .team-stats-grid {
        grid-template-columns: 1fr;
      }

      .compliance-grid {
        grid-template-columns: 1fr;
      }

      .system-status-grid {
        grid-template-columns: 1fr;
      }

      .integrations-grid {
        grid-template-columns: 1fr;
      }

      .policies-grid {
        grid-template-columns: 1fr;
      }

      .users-summary {
        flex-direction: column;
        gap: 20px;
      }

      .advanced-charts-grid {
        grid-template-columns: 1fr;
      }

      .reports-grid {
        grid-template-columns: 1fr;
      }
    }

    /* === FUNIL TAB STYLES === */
    .funnel-header {
      text-align: center;
      margin-bottom: 48px;
      padding: 32px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
      border-radius: 24px;
      border: 1px solid var(--border-color);
    }

    .funnel-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 8px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
    }

    .funnel-title i {
      color: var(--primary-color);
      font-size: 36px;
    }

    .funnel-subtitle {
      color: var(--text-muted);
      font-size: 16px;
      margin: 0;
    }

    /* Funil Visual */
    .funnel-visualization {
      max-width: 800px;
      margin: 0 auto 64px;
      padding: 48px;
      background: var(--card-bg);
      border-radius: 24px;
      border: 1px solid var(--border-color);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }

    .funnel-stage {
      position: relative;
      padding: 24px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 24px;
      background: var(--background-secondary);
      border-radius: 16px;
      border: 2px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .funnel-stage:hover {
      transform: translateX(8px);
      border-color: var(--primary-color);
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
    }

    .funnel-stage[data-stage="awareness"] {
      width: 100%;
    }

    .funnel-stage[data-stage="interest"] {
      width: 90%;
    }

    .funnel-stage[data-stage="qualification"] {
      width: 75%;
    }

    .funnel-stage[data-stage="opportunity"] {
      width: 60%;
    }

    .funnel-stage[data-stage="customer"] {
      width: 45%;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
      border-color: rgba(16, 185, 129, 0.3);
    }

    .stage-icon {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .stage-icon i {
      font-size: 24px;
      color: white;
    }

    .funnel-stage.success .stage-icon {
      background: var(--success-color);
    }

    .stage-content {
      flex: 1;
    }

    .stage-name {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .stage-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary-color);
    }

    .stage-percentage {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .stage-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color) 0%, var(--accent-color) 100%);
      border-radius: 0 0 14px 14px;
      transition: width 0.3s ease;
    }

    .stage-bar.success {
      background: linear-gradient(90deg, var(--success-color) 0%, #34d399 100%);
    }

    .funnel-arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 16px auto;
      color: var(--text-muted);
    }

    .funnel-arrow i {
      font-size: 20px;
      animation: bounce 2s infinite;
    }

    .conversion-rate {
      background: var(--primary-color);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    /* Métricas do Funil */
    .funnel-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 24px;
      margin-bottom: 48px;
    }

    .funnel-metric-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 24px;
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.3s ease;
    }

    .funnel-metric-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
    }

    .metric-icon {
      width: 56px;
      height: 56px;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .metric-icon i {
      font-size: 24px;
      color: white;
    }

    .metric-content {
      flex: 1;
    }

    .metric-label {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .metric-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .metric-change {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .metric-change.positive {
      color: var(--success-color);
    }

    .metric-change.negative {
      color: var(--error-color);
    }

    /* Análise por Canal */
    .funnel-channels {
      margin-bottom: 48px;
    }

    .channels-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }

    .channel-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 24px;
      transition: all 0.3s ease;
    }

    .channel-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
    }

    .channel-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .channel-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .channel-icon.google {
      background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
    }

    .channel-icon.facebook {
      background: linear-gradient(135deg, #1877f2 0%, #0c63d4 100%);
    }

    .channel-icon.linkedin {
      background: linear-gradient(135deg, #0077b5 0%, #005885 100%);
    }

    .channel-icon.organic {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .channel-icon i {
      font-size: 20px;
      color: white;
    }

    .channel-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .channel-stats {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 16px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-muted);
    }

    .stat-value {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .channel-performance {
      height: 8px;
      background: var(--background-secondary);
      border-radius: 4px;
      overflow: hidden;
    }

    .performance-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color) 0%, var(--accent-color) 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .performance-bar.success {
      background: linear-gradient(90deg, var(--success-color) 0%, #34d399 100%);
    }

    /* Evolução do Funil */
    .funnel-evolution {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 24px;
      padding: 32px;
    }

    .funnel-evolution .chart-container {
      height: 400px;
      margin-top: 24px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .funnel-visualization {
        padding: 24px 16px;
      }

      .funnel-stage {
        flex-direction: column;
        text-align: center;
      }

      .funnel-metrics {
        grid-template-columns: 1fr;
      }

      .channels-grid {
        grid-template-columns: 1fr;
      }
    }

    /* === BRANDING TAB STYLES === */
    .branding-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    .branding-section {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 32px;
      backdrop-filter: blur(20px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .section-header {
      margin-bottom: 24px;
      text-align: center;
    }

    .section-header h3 {
      color: var(--text-primary);
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 8px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    .section-header p {
      color: var(--text-muted);
      margin: 0;
      font-size: 16px;
    }

    /* Logo Upload Section */
    .logo-upload-area {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      align-items: start;
    }

    .current-logo {
      display: flex;
      justify-content: center;
    }

    .logo-preview {
      width: 200px;
      height: 200px;
      border: 2px dashed var(--border-color);
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--background-secondary);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .logo-preview:hover {
      border-color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
    }

    .logo-preview i {
      font-size: 48px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .logo-preview span {
      color: var(--text-muted);
      font-size: 14px;
      text-align: center;
    }

    .logo-controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .logo-settings {
      margin-top: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .setting-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .setting-group label {
      font-weight: 600;
      color: var(--text-primary);
      font-size: 14px;
    }

    .range-slider {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: var(--background-secondary);
      outline: none;
      -webkit-appearance: none;
    }

    .range-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--primary-color);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }

    .range-value {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 600;
    }

    .form-select {
      padding: 12px 16px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text-primary);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .form-select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    /* Color Scheme Section */
    .color-scheme-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .color-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .color-input-wrapper {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .color-input-wrapper input[type="color"] {
      width: 60px;
      height: 40px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: none;
      padding: 0;
    }

    .color-text {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background: var(--card-bg);
      color: var(--text-primary);
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
    }

    .preset-colors {
      margin-top: 24px;
    }

    .preset-colors h4 {
      color: var(--text-primary);
      margin-bottom: 16px;
      font-size: 16px;
      font-weight: 600;
    }

    .preset-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .preset-item {
      padding: 16px;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--background-secondary);
    }

    .preset-item:hover {
      border-color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.15);
    }

    .preset-colors-preview {
      display: flex;
      gap: 4px;
      margin-bottom: 8px;
    }

    .preset-colors-preview span {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      flex: 1;
    }

    /* Theme Selection */
    .theme-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 24px;
    }

    .theme-option {
      padding: 20px;
      border: 2px solid var(--border-color);
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--background-secondary);
      text-align: center;
    }

    .theme-option.active {
      border-color: var(--primary-color);
      background: rgba(59, 130, 246, 0.05);
    }

    .theme-option:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .theme-preview {
      width: 100%;
      height: 120px;
      border-radius: 8px;
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
      border: 1px solid var(--border-color);
    }

    .dark-preview {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    }

    .light-preview {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    }

    .auto-preview {
      background: linear-gradient(90deg, #1a1a1a 0%, #1a1a1a 50%, #ffffff 50%, #ffffff 100%);
    }

    .preview-header {
      height: 20px;
      background: rgba(255, 255, 255, 0.1);
      margin: 8px;
      border-radius: 4px;
    }

    .preview-sidebar {
      width: 30px;
      height: 80px;
      background: rgba(255, 255, 255, 0.15);
      margin: 8px;
      border-radius: 4px;
      position: absolute;
      left: 0;
      top: 28px;
    }

    .preview-content {
      margin-left: 46px;
      margin-top: 28px;
      margin-right: 8px;
      height: 60px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 4px;
    }

    /* Background Options */
    .bg-type-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 24px;
      justify-content: center;
    }

    .bg-type-btn {
      padding: 12px 20px;
      border: 1px solid var(--border-color);
      background: var(--background-secondary);
      color: var(--text-primary);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .bg-type-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .bg-type-btn:hover:not(.active) {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .bg-options-content {
      position: relative;
    }

    .bg-option-panel {
      display: none;
    }

    .bg-option-panel.active {
      display: block;
    }

    .gradient-presets,
    .pattern-presets {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
    }

    .gradient-item,
    .pattern-item {
      text-align: center;
      cursor: pointer;
      padding: 12px;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.2s ease;
    }

    .gradient-item.active,
    .pattern-item.active {
      border-color: var(--primary-color);
    }

    .gradient-item:hover,
    .pattern-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .gradient-preview,
    .pattern-preview {
      width: 100%;
      height: 60px;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .dots-pattern {
      background-image: radial-gradient(circle, var(--text-muted) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    .grid-pattern {
      background-image: 
        linear-gradient(var(--text-muted) 1px, transparent 1px),
        linear-gradient(90deg, var(--text-muted) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    .waves-pattern {
      background: linear-gradient(45deg, var(--primary-color) 25%, transparent 25%),
                  linear-gradient(-45deg, var(--primary-color) 25%, transparent 25%),
                  linear-gradient(45deg, transparent 75%, var(--primary-color) 75%),
                  linear-gradient(-45deg, transparent 75%, var(--primary-color) 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    }

    .hexagon-pattern {
      background-image: 
        repeating-conic-gradient(from 30deg at 50% 50%, var(--primary-color) 0deg 60deg, transparent 60deg 120deg);
      background-size: 30px 30px;
    }

    .btn-upload {
      padding: 16px 24px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-upload:hover {
      background: var(--primary-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
    }

    /* Live Preview */
    .live-preview {
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 24px;
      background: var(--background-secondary);
    }

    .preview-dashboard {
      display: flex;
      height: 300px;
      border-radius: 12px;
      overflow: hidden;
      background: var(--card-bg);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .preview-sidebar {
      width: 200px;
      background: var(--sidebar-bg);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .preview-logo {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-placeholder {
      background: var(--primary-color);
      color: white;
      width: 100%;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }

    .preview-nav {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .preview-nav .nav-item {
      height: 32px;
      border-radius: 6px;
      background: var(--background-secondary);
    }

    .preview-nav .nav-item.active {
      background: var(--primary-color);
    }

    .preview-main {
      flex: 1;
      padding: 16px;
      background: var(--card-bg);
    }

    .preview-header {
      height: 50px;
      background: var(--background-secondary);
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .header-content {
      height: 30px;
      background: var(--primary-color);
      border-radius: 4px;
      margin: 10px;
      opacity: 0.3;
    }

    .preview-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      height: 200px;
    }

    .preview-card {
      background: var(--background-secondary);
      border-radius: 8px;
      position: relative;
    }

    .preview-card::after {
      content: '';
      position: absolute;
      top: 12px;
      left: 12px;
      right: 12px;
      height: 20px;
      background: var(--primary-color);
      border-radius: 4px;
      opacity: 0.5;
    }

    /* Action Buttons */
    .branding-actions {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 32px;
      padding-top: 32px;
      border-top: 1px solid var(--border-color);
    }

    .btn-primary {
      padding: 14px 28px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary:hover {
      background: var(--primary-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
    }

    .btn-secondary {
      padding: 14px 28px;
      background: var(--background-secondary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-secondary:hover {
      background: var(--card-bg);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .btn-outline {
      padding: 14px 28px;
      background: transparent;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-outline:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .branding-container {
        padding: 16px;
      }

      .branding-section {
        padding: 24px 16px;
      }

      .logo-upload-area {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .color-scheme-grid {
        grid-template-columns: 1fr;
      }

      .theme-selector {
        grid-template-columns: 1fr;
      }

      .preset-grid {
        grid-template-columns: 1fr;
      }

      .bg-type-selector {
        flex-direction: column;
      }

      .branding-actions {
        flex-direction: column;
        align-items: stretch;
      }

      .preview-dashboard {
        height: 200px;
      }

      .preview-sidebar {
        width: 120px;
        padding: 12px;
      }

      .preview-content {
        grid-template-columns: 1fr;
        gap: 8px;
      }
    }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <!-- Brand -->
      <div class="brand">
        <div class="brand-logo interactive" id="brandLogo">O</div>
        <div class="brand-name" id="brandName">ORBION</div>
      </div>

      <!-- Navigation -->
      <nav class="nav">
        <!-- EXECUTIVO -->
        <div class="nav-section">
          <div class="nav-section-title">EXECUTIVO</div>
          <a href="#overview" class="nav-item active focusable" data-tab="overview">
            <div class="nav-icon"><i class="fas fa-tachometer-alt"></i></div>
            <span>Dashboard</span>
          </a>
          <a href="#funnel" class="nav-item focusable" data-tab="funnel">
            <div class="nav-icon"><i class="fas fa-filter"></i></div>
            <span>Funil de Vendas</span>
          </a>
          <a href="#prospecting" class="nav-item focusable" data-tab="prospecting">
            <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
            <span>Prospecção</span>
          </a>
          <a href="#intelligence" class="nav-item focusable" data-tab="intelligence">
            <div class="nav-icon"><i class="fas fa-brain"></i></div>
            <span>Inteligência IA</span>
          </a>
          <a href="#conversion" class="nav-item focusable" data-tab="conversion">
            <div class="nav-icon"><i class="fas fa-funnel-dollar"></i></div>
            <span>Conversão</span>
          </a>
          <a href="#competitive" class="nav-item focusable" data-tab="competitive">
            <div class="nav-icon"><i class="fas fa-chess"></i></div>
            <span>Competitivo</span>
          </a>
        </div>

        <!-- OPERACIONAL -->
        <div class="nav-section">
          <div class="nav-section-title">OPERACIONAL</div>
          <a href="#automation" class="nav-item focusable" data-tab="automation">
            <div class="nav-icon"><i class="fas fa-cogs"></i></div>
            <span>Automação</span>
          </a>
          <a href="#advanced-analytics" class="nav-item focusable" data-tab="advanced-analytics">
            <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
            <span>Analytics Avançado</span>
          </a>
          <a href="#team" class="nav-item focusable" data-tab="team">
            <div class="nav-icon"><i class="fas fa-users-cog"></i></div>
            <span>Gestão Equipe</span>
          </a>
          <a href="#compliance" class="nav-item focusable" data-tab="compliance">
            <div class="nav-icon"><i class="fas fa-shield-alt"></i></div>
            <span>Compliance</span>
          </a>
          <a href="#admin" class="nav-item focusable" data-tab="admin">
            <div class="nav-icon"><i class="fas fa-cog"></i></div>
            <span>Configurações</span>
          </a>
          <a href="#branding" class="nav-item focusable" data-tab="branding">
            <div class="nav-icon"><i class="fas fa-palette"></i></div>
            <span>Personalização</span>
          </a>
        </div>

        <!-- FERRAMENTAS (Mantidas do sistema original) -->
        <div class="nav-section">
          <div class="nav-section-title">FERRAMENTAS</div>
          <a href="#whatsapp" class="nav-item focusable" data-tab="whatsapp">
            <div class="nav-icon"><i class="fab fa-whatsapp"></i></div>
            <span>WhatsApp</span>
          </a>
          <a href="#leads" class="nav-item focusable" data-tab="leads">
            <div class="nav-icon"><i class="fas fa-map-marked-alt"></i></div>
            <span>Mapa Leads</span>
          </a>
          <a href="#chat" class="nav-item focusable" data-tab="chat">
            <div class="nav-icon"><i class="fas fa-comments"></i></div>
            <span>Chat IA</span>
          </a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <button class="btn btn-ghost btn-small focusable" id="sidebarToggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1 class="header-title" id="pageTitle">Dashboard</h1>
        </div>
        <div class="header-right">
          <div class="status-indicator">
            <span class="status-dot status-online"></span>
            <span>Sistema Online</span>
          </div>
          <button class="btn btn-ghost btn-small focusable" id="themeToggle">
            <i class="fas fa-palette"></i>
          </button>
        </div>
      </header>

      <!-- Content -->
      <div class="content">
        <!-- ABA 1: OVERVIEW EXECUTIVO -->
        <div id="tab-overview" class="tab-content active fade-in-up">
          <!-- KPIs Executivos Principais -->
          <div class="executive-header">
            <h2 class="executive-title">
              <i class="fas fa-tachometer-alt" style="margin-right: 12px; color: var(--primary-color);"></i>
              Overview Executivo • IA SDR Performance
            </h2>
            <div class="executive-subtitle">Dashboard executivo com métricas de alto nível e ROI da inteligência artificial</div>
          </div>

          <!-- KPIs Principais -->
          <div class="executive-kpis">
            <div class="executive-kpi-card primary">
              <div class="kpi-icon"><i class="fas fa-dollar-sign"></i></div>
              <div class="kpi-content">
                <div class="kpi-value" id="pipeline-value">R$ 0</div>
                <div class="kpi-label">Pipeline Gerado por IA</div>
                <div class="kpi-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +35% vs mês anterior
                </div>
              </div>
            </div>

            <div class="executive-kpi-card success">
              <div class="kpi-icon"><i class="fas fa-percentage"></i></div>
              <div class="kpi-content">
                <div class="kpi-value" id="conversion-rate">0%</div>
                <div class="kpi-label">Taxa de Conversão Geral</div>
                <div class="kpi-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +8% vs benchmark
                </div>
              </div>
            </div>

            <div class="executive-kpi-card warning">
              <div class="kpi-icon"><i class="fas fa-users"></i></div>
              <div class="kpi-content">
                <div class="kpi-value" id="mql-sql-ratio">0 / 0</div>
                <div class="kpi-label">MQL / SQL Qualificados</div>
                <div class="kpi-change positive">
                  <i class="fas fa-arrow-up"></i>
                  +22% qualificação
                </div>
              </div>
            </div>

            <div class="executive-kpi-card info">
              <div class="kpi-icon"><i class="fas fa-chart-line"></i></div>
              <div class="kpi-content">
                <div class="kpi-value" id="roi-value">0%</div>
                <div class="kpi-label">ROI da IA SDR</div>
                <div class="kpi-change positive">
                  <i class="fas fa-arrow-up"></i>
                  vs equipe humana
                </div>
              </div>
            </div>

            <div class="executive-kpi-card accent">
              <div class="kpi-icon"><i class="fas fa-clock"></i></div>
              <div class="kpi-content">
                <div class="kpi-value" id="response-time">0 min</div>
                <div class="kpi-label">Primeira Resposta</div>
                <div class="kpi-change positive">
                  <i class="fas fa-arrow-up"></i>
                  98% dentro do SLA
                </div>
              </div>
            </div>
          </div>

          <!-- Gráficos Principais -->
          <div class="grid grid-2" style="margin-top: 32px;">
            <!-- Funil Completo -->
            <div class="card executive-chart">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-funnel-dollar" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Funil de Conversão Completo
                </div>
                <div class="card-subtitle">Leads → Oportunidades → Fechamentos</div>
              </div>
              <div class="chart-container">
                <canvas id="funnelChart"></canvas>
              </div>
            </div>

            <!-- Performance Mensal -->
            <div class="card executive-chart">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-bar" style="margin-right: 8px; color: var(--success);"></i>
                  Performance Mensal Comparativa
                </div>
                <div class="card-subtitle">Últimos 6 meses vs metas</div>
              </div>
              <div class="chart-container">
                <canvas id="monthlyPerformanceChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Distribuição e Eficiência -->
          <div class="grid grid-2" style="margin-top: 32px;">
            <!-- Distribuição por Fonte -->
            <div class="card executive-chart">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-pie-chart" style="margin-right: 8px; color: var(--accent-color);"></i>
                  Distribuição de Leads por Fonte
                </div>
                <div class="card-subtitle">Performance por canal de aquisição</div>
              </div>
              <div class="chart-container">
                <canvas id="leadsSourceChart"></canvas>
              </div>
            </div>

            <!-- Radar Eficiência -->
            <div class="card executive-chart">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-radar" style="margin-right: 8px; color: var(--warning);"></i>
                  Radar: Eficiência vs Volume vs Qualidade
                </div>
                <div class="card-subtitle">Análise multidimensional da IA</div>
              </div>
              <div class="chart-container">
                <canvas id="radarChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Insights Executivos -->
          <div style="margin-top: 32px;">
            <div class="card executive-insights">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-lightbulb" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Insights Executivos • IA
                </div>
                <div class="card-subtitle">Recomendações estratégicas baseadas em dados</div>
              </div>
              <div class="insights-grid">
                <div class="insight-card critical">
                  <div class="insight-priority">CRÍTICO</div>
                  <div class="insight-title">Oportunidade de Escala</div>
                  <div class="insight-content">
                    A IA identificou 23% de aumento na demanda no setor tecnológico. 
                    Recomendação: Alocar 40% mais recursos para este segmento nos próximos 30 dias.
                  </div>
                  <div class="insight-impact">Impacto estimado: +R$ 890k no pipeline</div>
                </div>

                <div class="insight-card high">
                  <div class="insight-priority">ALTO</div>
                  <div class="insight-title">Otimização de Timing</div>
                  <div class="insight-content">
                    Análise de padrões indica que contatos feitos entre 14h-16h têm 35% mais conversão. 
                    Sistema já otimizou automaticamente os horários de prospecção.
                  </div>
                  <div class="insight-impact">Melhoria esperada: +12% taxa conversão</div>
                </div>

                <div class="insight-card medium">
                  <div class="insight-priority">MÉDIO</div>
                  <div class="insight-title">Personalização Avançada</div>
                  <div class="insight-content">
                    IA detectou que mensagens com referência a notícias do setor têm 67% mais engajamento. 
                    Nova integração com feeds RSS implementada.
                  </div>
                  <div class="insight-impact">Aumento esperado: +8% taxa resposta</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Chat Tab -->
        <div id="tab-chat" class="tab-content" style="display: none;">
          <!-- Header de Status e Controles -->
          <div class="chat-header">
            <div class="chat-status">
              <div class="status-indicator online" id="agentStatus"></div>
              <div class="status-info">
                <h3>ORBION AI Agent</h3>
                <p>Online • Respondendo em tempo real</p>
              </div>
            </div>
            <div class="chat-controls">
              <button class="btn-icon" onclick="clearChatHistory()" title="Limpar histórico">
                <i class="fas fa-trash-alt"></i>
              </button>
              <button class="btn-icon" onclick="exportChatHistory()" title="Exportar conversa">
                <i class="fas fa-download"></i>
              </button>
              <button class="btn-icon" onclick="toggleChatSettings()" title="Configurações">
                <i class="fas fa-cog"></i>
              </button>
            </div>
          </div>

          <!-- Grid Principal -->
          <div class="chat-grid">
            <!-- Chat Container Principal -->
            <div class="chat-main">
              <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                  <div class="message ai-message">
                    <div class="message-avatar">
                      <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                      <div class="message-bubble">
                        <div class="message-text">
                          <i class="fas fa-sparkles" style="margin-right: 6px; color: var(--primary-color);"></i>
                          Olá! Sou o ORBION, seu assistente de vendas inteligente. Posso ajudá-lo com:
                          <ul style="margin: 12px 0 0 20px; padding: 0;">
                            <li>📊 Análise de leads e prospects</li>
                            <li>📈 Estratégias de vendas personalizadas</li>
                            <li>🤖 Automação de follow-ups</li>
                            <li>💬 Scripts de WhatsApp otimizados</li>
                            <li>📞 Planejamento de ligações</li>
                          </ul>
                        </div>
                        <div class="message-time">Agora</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Área de digitação -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                  <div class="typing-avatar">
                    <i class="fas fa-robot"></i>
                  </div>
                  <div class="typing-animation">
                    <span></span>
                    <span></span>
                    <span></span>
                  </div>
                </div>
                
                <!-- Input Area -->
                <div class="chat-input-area">
                  <div class="quick-responses" id="quickResponses">
                    <button class="quick-response-btn" onclick="sendQuickMessage('Analisar pipeline de vendas')">
                      📊 Analisar Pipeline
                    </button>
                    <button class="quick-response-btn" onclick="sendQuickMessage('Criar script de WhatsApp')">
                      💬 Script WhatsApp
                    </button>
                    <button class="quick-response-btn" onclick="sendQuickMessage('Estratégia para leads frios')">
                      🧊 Leads Frios
                    </button>
                    <button class="quick-response-btn" onclick="sendQuickMessage('Otimizar follow-ups')">
                      🔄 Follow-ups
                    </button>
                  </div>
                  
                  <div class="chat-input-container">
                    <div class="input-wrapper">
                      <textarea 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="Digite sua pergunta sobre vendas, estratégias ou análises..."
                        rows="1"
                        maxlength="1000"
                      ></textarea>
                      <div class="input-actions">
                        <button class="btn-action" onclick="attachFile()" title="Anexar arquivo">
                          <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="btn-action" onclick="recordVoice()" title="Gravar áudio">
                          <i class="fas fa-microphone"></i>
                        </button>
                      </div>
                    </div>
                    <button class="send-btn" id="sendMessage" onclick="sendChatMessage()">
                      <i class="fas fa-paper-plane"></i>
                    </button>
                  </div>
                  
                  <div class="chat-footer">
                    <span class="character-count" id="characterCount">0/1000</span>
                    <span class="powered-by">Powered by ORBION AI Engine</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sidebar de Conversas -->
            <div class="chat-sidebar">
              <div class="sidebar-header">
                <h4>Conversas Recentes</h4>
                <button class="btn-new-chat" onclick="startNewChat()">
                  <i class="fas fa-plus"></i>
                  Nova Conversa
                </button>
              </div>
              
              <div class="conversations-list" id="conversationsList">
                <div class="conversation-item active">
                  <div class="conversation-info">
                    <div class="conversation-title">Estratégia de Vendas</div>
                    <div class="conversation-preview">Como posso melhorar minha...</div>
                    <div class="conversation-time">Hoje, 14:30</div>
                  </div>
                  <div class="conversation-actions">
                    <button class="btn-mini" onclick="pinConversation(this)">
                      <i class="fas fa-thumbtack"></i>
                    </button>
                    <button class="btn-mini" onclick="deleteConversation(this)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
                
                <div class="conversation-item">
                  <div class="conversation-info">
                    <div class="conversation-title">Pipeline Analysis</div>
                    <div class="conversation-preview">Analise meus leads do...</div>
                    <div class="conversation-time">Ontem, 16:45</div>
                  </div>
                  <div class="conversation-actions">
                    <button class="btn-mini">
                      <i class="fas fa-thumbtack"></i>
                    </button>
                    <button class="btn-mini">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
                
                <div class="conversation-item">
                  <div class="conversation-info">
                    <div class="conversation-title">WhatsApp Scripts</div>
                    <div class="conversation-preview">Preciso de templates...</div>
                    <div class="conversation-time">Segunda, 10:15</div>
                  </div>
                  <div class="conversation-actions">
                    <button class="btn-mini">
                      <i class="fas fa-thumbtack"></i>
                    </button>
                    <button class="btn-mini">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- IA Insights -->
              <div class="ai-insights">
                <div class="insights-header">
                  <i class="fas fa-lightbulb"></i>
                  <span>Insights da IA</span>
                </div>
                <div class="insight-item">
                  <div class="insight-icon success">
                    <i class="fas fa-chart-up"></i>
                  </div>
                  <div class="insight-text">
                    <strong>Performance em Alta</strong>
                    <p>Taxa de resposta 23% acima da média</p>
                  </div>
                </div>
                <div class="insight-item">
                  <div class="insight-icon warning">
                    <i class="fas fa-clock"></i>
                  </div>
                  <div class="insight-text">
                    <strong>Oportunidade</strong>
                    <p>3 leads não contatados há 48h</p>
                  </div>
                </div>
                <div class="insight-item">
                  <div class="insight-icon info">
                    <i class="fas fa-target"></i>
                  </div>
                  <div class="insight-text">
                    <strong>Meta do Mês</strong>
                    <p>87% da meta alcançada</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- WhatsApp Tab -->
        <div id="tab-whatsapp" class="tab-content" style="display: none;">
          <!-- Status Row -->
          <div class="grid grid-3" style="margin-bottom: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fab fa-whatsapp" style="margin-right: 8px; color: #25d366;"></i>
                  Status API
                </div>
                <div class="card-subtitle">Conexão Evolution</div>
              </div>
              <div id="whatsappStatus">
                <button class="btn btn-primary interactive focusable" onclick="checkWhatsAppStatus()">
                  <i class="fas fa-sync"></i>
                  Verificar Status
                </button>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-phone" style="margin-right: 8px; color: var(--success);"></i>
                  Ligações Rápidas
                </div>
                <div class="card-subtitle">Ações diretas</div>
              </div>
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <button class="btn btn-primary interactive focusable" onclick="callRandomLead()">
                  <i class="fas fa-random"></i>
                  Lead Aleatório
                </button>
                <button class="btn btn-ghost interactive focusable" onclick="makeDirectCall()">
                  <i class="fas fa-phone-alt"></i>
                  Ligação Direta
                </button>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.2s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-pie" style="margin-right: 8px; color: var(--warning);"></i>
                  Estatísticas Hoje
                </div>
                <div class="card-subtitle">Performance diária</div>
              </div>
              <div id="whatsappStats">
                <div class="stat-small">
                  <span class="stat-small-value" id="dailyMessages">-</span>
                  <span class="stat-small-label">Mensagens</span>
                </div>
                <div class="stat-small">
                  <span class="stat-small-value" id="dailyCalls">-</span>
                  <span class="stat-small-label">Ligações</span>
                </div>
                <div class="stat-small">
                  <span class="stat-small-value" id="dailyAudios">-</span>
                  <span class="stat-small-label">Áudios</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Main Functions Row -->
          <div class="grid grid-2">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-paper-plane" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Enviar Mensagem
                </div>
                <div class="card-subtitle">Texto simples para WhatsApp</div>
              </div>
              <div class="form-group">
                <label class="form-label">Número (com DDI)</label>
                <input type="text" class="form-input focusable" id="whatsappNumber" placeholder="5511999999999">
              </div>
              <div class="form-group">
                <label class="form-label">Mensagem</label>
                <textarea class="form-input focusable" id="whatsappMessage" rows="3" placeholder="Digite sua mensagem..."></textarea>
              </div>
              <button class="btn btn-primary interactive focusable" onclick="sendWhatsAppMessage()">
                <i class="fab fa-whatsapp"></i>
                Enviar Mensagem
              </button>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-microphone" style="margin-right: 8px; color: var(--accent-color);"></i>
                  Enviar Áudio
                </div>
                <div class="card-subtitle">Gravação ou upload de arquivo</div>
              </div>
              <div class="form-group">
                <label class="form-label">Número para Áudio</label>
                <input type="text" class="form-input focusable" id="audioWhatsappNumber" placeholder="5511999999999">
              </div>
              <div class="form-group">
                <label class="form-label">Tipo de Áudio</label>
                <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                  <button class="btn btn-ghost interactive focusable" id="recordAudioBtn" onclick="toggleAudioRecording()">
                    <i class="fas fa-microphone"></i>
                    <span id="recordText">Gravar</span>
                  </button>
                  <button class="btn btn-ghost interactive focusable" onclick="document.getElementById('audioFileInput').click()">
                    <i class="fas fa-upload"></i>
                    Upload
                  </button>
                </div>
                <input type="file" id="audioFileInput" accept="audio/*" style="display: none;" onchange="handleAudioFile(this)">
                <div id="audioPreview" style="display: none; margin-top: 12px;"></div>
              </div>
              <button class="btn btn-primary interactive focusable" id="sendAudioBtn" onclick="sendWhatsAppAudio()" disabled>
                <i class="fas fa-volume-up"></i>
                Enviar Áudio
              </button>
            </div>
          </div>

          <!-- Advanced Functions Row -->
          <div class="grid grid-2" style="margin-top: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-phone-volume" style="margin-right: 8px; color: var(--success);"></i>
                  Chamada Personalizada
                </div>
                <div class="card-subtitle">Ligação com script personalizado</div>
              </div>
              <div class="form-group">
                <label class="form-label">Número ou Lead</label>
                <input type="text" class="form-input focusable" id="customCallNumber" placeholder="5511999999999 ou nome do lead">
              </div>
              <div class="form-group">
                <label class="form-label">Roteiro/Objetivo</label>
                <select class="form-input form-select focusable" id="callScript">
                  <option value="prospeccao">Prospecção Comercial</option>
                  <option value="followup">Follow-up de Proposta</option>
                  <option value="demo">Agendamento de Demo</option>
                  <option value="cobranca">Cobrança Amigável</option>
                  <option value="pesquisa">Pesquisa de Satisfação</option>
                  <option value="reativacao">Reativação de Cliente</option>
                  <option value="custom">Personalizado</option>
                </select>
              </div>
              <div class="form-group" id="customScriptGroup" style="display: none;">
                <label class="form-label">Script Personalizado</label>
                <textarea class="form-input focusable" id="customScriptText" rows="2" placeholder="Descreva o objetivo da ligação..."></textarea>
              </div>
              <button class="btn btn-primary interactive focusable" onclick="makeCustomCall()">
                <i class="fas fa-headset"></i>
                Iniciar Ligação
              </button>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-robot" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Campanha Automática
                </div>
                <div class="card-subtitle">Ligações em massa inteligentes</div>
              </div>
              <div class="form-group">
                <label class="form-label">Tipo de Campanha</label>
                <select class="form-input form-select focusable" id="campaignType">
                  <option value="leads_frios">Leads Frios (5 ligações)</option>
                  <option value="leads_mornos">Leads Mornos (3 ligações)</option>
                  <option value="followup_pendentes">Follow-ups Pendentes</option>
                  <option value="reativacao_clientes">Reativação de Clientes</option>
                  <option value="pesquisa_satisfacao">Pesquisa de Satisfação</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Intervalo entre Ligações</label>
                <select class="form-input form-select focusable" id="campaignInterval">
                  <option value="30">30 segundos</option>
                  <option value="60">1 minuto</option>
                  <option value="120" selected>2 minutos</option>
                  <option value="300">5 minutos</option>
                </select>
              </div>
              <div style="display: flex; gap: 12px;">
                <button class="btn btn-primary interactive focusable" onclick="startCampaign()">
                  <i class="fas fa-play"></i>
                  Iniciar Campanha
                </button>
                <button class="btn btn-ghost interactive focusable" onclick="stopCampaign()" id="stopCampaignBtn" disabled>
                  <i class="fas fa-stop"></i>
                  Parar
                </button>
              </div>
              <div id="campaignStatus" style="margin-top: 16px; display: none;"></div>
            </div>
          </div>
        </div>

        <!-- Leads Tab -->
        <div id="tab-leads" class="tab-content" style="display: none;">
          <!-- Advanced Filters -->
          <div class="advanced-filters">
            <div class="filter-group">
              <div class="filter-label">Busca Geral</div>
              <input type="text" class="form-input focusable" id="leadsSearch" placeholder="Nome, email, telefone...">
            </div>
            
            <div class="filter-group">
              <div class="filter-label">Status</div>
              <select class="form-input form-select focusable" id="statusFilter">
                <option value="">Todos os Status</option>
                <option value="novo">Novos</option>
                <option value="ativo">Ativos</option>
                <option value="perdido">Perdidos</option>
                <option value="convertido">Convertidos</option>
              </select>
            </div>
            
            <div class="filter-group">
              <div class="filter-label">Cidade/Local</div>
              <select class="form-input form-select focusable" id="cityFilter">
                <option value="">Todas as Cidades</option>
                <option value="natal">Natal</option>
                <option value="mossoro">Mossoró</option>
                <option value="parnamirim">Parnamirim</option>
                <option value="caico">Caicó</option>
                <option value="pau-dos-ferros">Pau dos Ferros</option>
                <option value="currais-novos">Currais Novos</option>
              </select>
            </div>
            
            <div class="filter-group">
              <div class="filter-label">Período</div>
              <div class="date-range">
                <input type="date" class="form-input focusable" id="dateFrom">
                <span>até</span>
                <input type="date" class="form-input focusable" id="dateTo">
              </div>
            </div>
            
            <div class="filter-group">
              <div class="filter-label">Origem</div>
              <select class="form-input form-select focusable" id="sourceFilter">
                <option value="">Todas as Origens</option>
                <option value="whatsapp">WhatsApp</option>
                <option value="website">Website</option>
                <option value="facebook">Facebook</option>
                <option value="instagram">Instagram</option>
                <option value="indicacao">Indicação</option>
              </select>
            </div>
            
            <div class="filter-group">
              <div class="filter-label">Score</div>
              <select class="form-input form-select focusable" id="scoreFilter">
                <option value="">Todos os Scores</option>
                <option value="hot">Quente (90-100)</option>
                <option value="warm">Morno (70-89)</option>
                <option value="cold">Frio (50-69)</option>
                <option value="frozen">Congelado (0-49)</option>
              </select>
            </div>
            
            <div class="filter-group" style="display: flex; align-items: end; gap: 12px;">
              <button class="btn btn-primary interactive focusable" onclick="applyLeadsFilters()">
                <i class="fas fa-search"></i>
                Filtrar
              </button>
              <button class="btn btn-ghost interactive focusable" onclick="clearLeadsFilters()">
                <i class="fas fa-times"></i>
                Limpar
              </button>
            </div>
          </div>

          <!-- Mapa de Calor do RN -->
          <div class="card fade-in-up">
            <div class="card-header">
              <div class="card-title">
                <i class="fas fa-map-marked-alt" style="margin-right: 8px; color: var(--primary-color);"></i>
                Mapa de Calor - Rio Grande do Norte
              </div>
              <div class="card-subtitle">Distribuição geográfica dos leads por status</div>
            </div>
            <div class="heatmap-container">
              <div id="leadsHeatmap"></div>
              <div class="map-legend">
                <div class="legend-title">Legenda</div>
                <div class="legend-item">
                  <div class="legend-color legend-red"></div>
                  <span>Leads Ativos</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color legend-blue"></div>
                  <span>Leads Novos</span>
                </div>
                <div class="legend-item">
                  <div class="legend-color legend-gray"></div>
                  <span>Leads Perdidos</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Leads Results -->
          <div style="margin-top: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-users" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Resultados da Pesquisa
                </div>
                <div class="card-subtitle">
                  <span id="leadsResultCount">0</span> leads encontrados
                </div>
              </div>
              <div id="leadsContainer">
                <!-- Leads serão carregados aqui -->
              </div>
              <div id="leadsPagination" class="pagination" style="display: none;">
                <!-- Paginação será gerada aqui -->
              </div>
            </div>
          </div>
        </div>

        <!-- Analytics Tab -->
        <div id="tab-analytics" class="tab-content" style="display: none;">
          <!-- KPIs Summary Row -->
          <div class="metrics-summary">
            <div class="metric-card">
              <div class="metric-value" id="analyticsConversions">23.5%</div>
              <div class="metric-label">Taxa Conversão</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="analyticsResponseTime">1.2s</div>
              <div class="metric-label">Tempo Resposta</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="analyticsSuccessRate">87.3%</div>
              <div class="metric-label">Taxa Sucesso</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="analyticsActiveHours">18.5h</div>
              <div class="metric-label">Horas Ativas</div>
            </div>
            <div class="metric-card">
              <div class="metric-value" id="analyticsAvgSession">5.8min</div>
              <div class="metric-label">Sessão Média</div>
            </div>
          </div>

          <!-- Charts Row 1 -->
          <div class="grid grid-2">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-line" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Performance do Agente
                </div>
                <div class="card-subtitle">Conversas resolvidas por hora</div>
              </div>
              <div class="chart-container">
                <canvas id="performanceChart"></canvas>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-pie" style="margin-right: 8px; color: var(--accent-color);"></i>
                  Status dos Leads
                </div>
                <div class="card-subtitle">Distribuição por categoria</div>
              </div>
              <div class="chart-container">
                <canvas id="leadsStatusChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Charts Row 2 -->
          <div class="grid grid-2" style="margin-top: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-bar" style="margin-right: 8px; color: var(--success);"></i>
                  Atividade Semanal
                </div>
                <div class="card-subtitle">Mensagens, ligações e conversões</div>
              </div>
              <div class="chart-container">
                <canvas id="weeklyActivityChart"></canvas>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-area" style="margin-right: 8px; color: var(--warning);"></i>
                  Tempo de Resposta
                </div>
                <div class="card-subtitle">Média por período do dia</div>
              </div>
              <div class="chart-container">
                <canvas id="responseTimeChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Large Chart Row -->
          <div style="margin-top: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-chart-line" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Análise de Tendências (30 dias)
                </div>
                <div class="card-subtitle">Conversas, leads gerados e taxa de conversão</div>
              </div>
              <div class="chart-container chart-large">
                <canvas id="trendsChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Additional Analytics -->
          <div class="grid grid-3" style="margin-top: 32px;">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-clock" style="margin-right: 8px; color: var(--info);"></i>
                  Horários de Pico
                </div>
              </div>
              <div id="peakHoursContent">
                <div class="chart-loading">
                  <i class="fas fa-chart-bar"></i>
                  <p>Carregando horários...</p>
                </div>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-users" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Top Cidades
                </div>
              </div>
              <div id="topCitiesContent">
                <div class="chart-loading">
                  <i class="fas fa-map-marker-alt"></i>
                  <p>Carregando cidades...</p>
                </div>
              </div>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.2s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-star" style="margin-right: 8px; color: var(--warning);"></i>
                  Qualidade IA
                </div>
              </div>
              <div id="aiQualityContent">
                <div class="chart-loading">
                  <i class="fas fa-robot"></i>
                  <p>Analisando qualidade...</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tools Tab -->
        <div id="tab-tools" class="tab-content" style="display: none;">
          <div class="grid grid-2">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-volume-up" style="margin-right: 8px; color: var(--accent-color);"></i>
                  Ferramentas de Áudio
                </div>
                <div class="card-subtitle">TTS inteligente e transcrição</div>
              </div>
              <div class="form-group">
                <label class="form-label">Número WhatsApp</label>
                <input type="text" class="form-input focusable" id="audioNumber" placeholder="5511999999999">
              </div>
              <div class="form-group">
                <label class="form-label">Texto para TTS</label>
                <textarea class="form-input focusable" id="audioText" rows="3" placeholder="Digite o texto para converter em áudio profissional..."></textarea>
              </div>
              <div class="form-group">
                <label class="form-label">Voz Profissional</label>
                <select class="form-input form-select focusable" id="audioVoice">
                  <option value="nova">Nova (Recomendada)</option>
                  <option value="alloy">Alloy (Neutra)</option>
                  <option value="echo">Echo (Masculina)</option>
                  <option value="fable">Fable (Britânica)</option>
                  <option value="onyx">Onyx (Grave)</option>
                  <option value="shimmer">Shimmer (Feminina)</option>
                </select>
              </div>
              <button class="btn btn-primary interactive focusable" onclick="sendTTS()">
                <i class="fas fa-microphone"></i>
                Gerar & Enviar TTS
              </button>
            </div>

            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-phone" style="margin-right: 8px; color: var(--success);"></i>
                  Chamadas Inteligentes
                </div>
                <div class="card-subtitle">Sistema de ligações AI-powered</div>
              </div>
              <div class="form-group">
                <label class="form-label">Identificador do Lead</label>
                <input type="text" class="form-input focusable" id="callIdentifier" placeholder="Nome do lead, número ou 'random' para aleatório">
              </div>
              <div class="form-group">
                <label class="form-label">Propósito da Ligação</label>
                <input type="text" class="form-input focusable" id="callPurpose" placeholder="apresentação comercial, follow-up, demo..." value="apresentação comercial">
              </div>
              <button class="btn btn-primary interactive focusable" onclick="makeIntelligentCall()">
                <i class="fas fa-brain"></i>
                Iniciar Ligação IA
              </button>
            </div>
          </div>
        </div>

        <!-- INTELIGÊNCIA E PERSONALIZAÇÃO -->
        <div id="tab-intelligence" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-brain"></i>
              </div>
              <div>
                <h2>Inteligência e Personalização</h2>
                <p>IA Conversacional, NLP e personalização de interações por perfil do lead</p>
              </div>
            </div>
          </div>

          <!-- Análise de Sentimento -->
          <div class="section-title">
            <i class="fas fa-heart"></i>
            Análise de Sentimento e Engagement
          </div>
          
          <div class="executive-grid-3">
            <div class="sentiment-card positive">
              <div class="sentiment-header">
                <i class="fas fa-smile"></i>
                <span>Sentimento Positivo</span>
              </div>
              <div class="sentiment-value">67.4%</div>
              <div class="sentiment-meta">Últimas 1000 interações</div>
              <div class="sentiment-trend">
                <i class="fas fa-arrow-up"></i>
                +5.2% vs semana anterior
              </div>
            </div>

            <div class="sentiment-card neutral">
              <div class="sentiment-header">
                <i class="fas fa-meh"></i>
                <span>Sentimento Neutro</span>
              </div>
              <div class="sentiment-value">23.8%</div>
              <div class="sentiment-meta">Respostas objetivas</div>
              <div class="sentiment-trend">
                <i class="fas fa-minus"></i>
                -1.3% vs semana anterior
              </div>
            </div>

            <div class="sentiment-card negative">
              <div class="sentiment-header">
                <i class="fas fa-frown"></i>
                <span>Sentimento Negativo</span>
              </div>
              <div class="sentiment-value">8.8%</div>
              <div class="sentiment-meta">Requer atenção especial</div>
              <div class="sentiment-trend">
                <i class="fas fa-arrow-down"></i>
                -3.9% vs semana anterior
              </div>
            </div>
          </div>

          <!-- Personalização por Arquétipo -->
          <div class="section-title">
            <i class="fas fa-user-tag"></i>
            Arquétipos de Personalidade Identificados
          </div>

          <div class="archetype-grid">
            <div class="archetype-card master">
              <div class="archetype-header">
                <div class="archetype-icon">
                  <i class="fas fa-crown"></i>
                </div>
                <div class="archetype-info">
                  <h3>Mestres</h3>
                  <p>Decisores, executivos, buscam controle</p>
                </div>
              </div>
              <div class="archetype-stats">
                <div class="stat">
                  <span class="stat-value" id="masters-leads">0</span>
                  <span class="stat-label">Leads</span>
                </div>
                <div class="stat">
                  <span class="stat-value" id="masters-conversion">0%</span>
                  <span class="stat-label">Conv.</span>
                </div>
              </div>
              <div class="archetype-strategy">
                <h4>Estratégia:</h4>
                <p>Abordagem direta, foco em ROI e resultados imediatos</p>
              </div>
            </div>

            <div class="archetype-card explorer">
              <div class="archetype-header">
                <div class="archetype-icon">
                  <i class="fas fa-compass"></i>
                </div>
                <div class="archetype-info">
                  <h3>Aventureiros</h3>
                  <p>Inovadores, buscam novidades</p>
                </div>
              </div>
              <div class="archetype-stats">
                <div class="stat">
                  <span class="stat-value" id="innovator-leads">0</span>
                  <span class="stat-label">Leads</span>
                </div>
                <div class="stat">
                  <span class="stat-value" id="innovator-conversion">0%</span>
                  <span class="stat-label">Conv.</span>
                </div>
              </div>
              <div class="archetype-strategy">
                <h4>Estratégia:</h4>
                <p>Destaque inovação, cases únicos e diferenciação</p>
              </div>
            </div>

            <div class="archetype-card sage">
              <div class="archetype-header">
                <div class="archetype-icon">
                  <i class="fas fa-book"></i>
                </div>
                <div class="archetype-info">
                  <h3>Sábios</h3>
                  <p>Analíticos, buscam informações</p>
                </div>
              </div>
              <div class="archetype-stats">
                <div class="stat">
                  <span class="stat-value" id="sages-leads">0</span>
                  <span class="stat-label">Leads</span>
                </div>
                <div class="stat">
                  <span class="stat-value" id="sages-conversion">0%</span>
                  <span class="stat-label">Conv.</span>
                </div>
              </div>
              <div class="archetype-strategy">
                <h4>Estratégia:</h4>
                <p>Dados técnicos, estudos de caso detalhados</p>
              </div>
            </div>
          </div>

          <!-- Modelos de IA em Uso -->
          <div class="section-title">
            <i class="fas fa-robot"></i>
            Modelos de IA e Performance
          </div>

          <div class="ai-models-grid">
            <div class="ai-model-card">
              <div class="model-header">
                <h3>GPT-4o-mini</h3>
                <span class="model-status active">Ativo</span>
              </div>
              <div class="model-metrics">
                <div class="metric">
                  <span class="metric-label">Conversas/dia</span>
                  <span class="metric-value" id="gpt-conversations-day">0</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Tempo médio</span>
                  <span class="metric-value" id="gpt-avg-time">0s</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Taxa sucesso</span>
                  <span class="metric-value" id="gpt-success-rate">0%</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Custo/1k tokens</span>
                  <span class="metric-value">$0.15</span>
                </div>
              </div>
            </div>

            <div class="ai-model-card">
              <div class="model-header">
                <h3>Whisper (Transcrição)</h3>
                <span class="model-status active">Ativo</span>
              </div>
              <div class="model-metrics">
                <div class="metric">
                  <span class="metric-label">Áudios/dia</span>
                  <span class="metric-value" id="whisper-audios-day">0</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Acurácia</span>
                  <span class="metric-value" id="whisper-accuracy">0%</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Tempo proc.</span>
                  <span class="metric-value" id="whisper-proc-time">0s</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Suporte idiomas</span>
                  <span class="metric-value">57</span>
                </div>
              </div>
            </div>

            <div class="ai-model-card">
              <div class="model-header">
                <h3>TTS (Text-to-Speech)</h3>
                <span class="model-status active">Ativo</span>
              </div>
              <div class="model-metrics">
                <div class="metric">
                  <span class="metric-label">Áudios gerados</span>
                  <span class="metric-value" id="tts-audios-generated">0</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Qualidade</span>
                  <span class="metric-value">HD</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Vozes disponíveis</span>
                  <span class="metric-value">6</span>
                </div>
                <div class="metric">
                  <span class="metric-label">Satisfação</span>
                  <span class="metric-value" id="tts-satisfaction">0/5</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- QUALIFICAÇÃO E CONVERSÃO -->
        <div id="tab-conversion" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-funnel-dollar"></i>
              </div>
              <div>
                <h2>Qualificação e Conversão</h2>
                <p>Funil de vendas, lead scoring, nurturing e pipeline de conversão</p>
              </div>
            </div>
          </div>

          <!-- Funil de Conversão -->
          <div class="section-title">
            <i class="fas fa-filter"></i>
            Pipeline de Conversão em Tempo Real
          </div>
          
          <div class="funnel-container">
            <div class="funnel-stage">
              <div class="stage-header">
                <h3>Leads Captados</h3>
                <span class="stage-count" id="pipeline-leads-captured">0</span>
              </div>
              <div class="stage-bar">
                <div class="stage-fill" style="width: 100%; background: var(--primary-color);"></div>
              </div>
              <div class="stage-meta">100% do total</div>
            </div>

            <div class="funnel-stage">
              <div class="stage-header">
                <h3>Qualificados (MQL)</h3>
                <span class="stage-count">1.923</span>
              </div>
              <div class="stage-bar">
                <div class="stage-fill" style="width: 67.5%; background: var(--accent-color);"></div>
              </div>
              <div class="stage-meta">67.5% conversão</div>
            </div>

            <div class="funnel-stage">
              <div class="stage-header">
                <h3>Oportunidades (SQL)</h3>
                <span class="stage-count">847</span>
              </div>
              <div class="stage-bar">
                <div class="stage-fill" style="width: 29.7%; background: var(--warning-color);"></div>
              </div>
              <div class="stage-meta">29.7% do total</div>
            </div>

            <div class="funnel-stage">
              <div class="stage-header">
                <h3>Propostas Enviadas</h3>
                <span class="stage-count">423</span>
              </div>
              <div class="stage-bar">
                <div class="stage-fill" style="width: 14.9%; background: var(--success);"></div>
              </div>
              <div class="stage-meta">14.9% do total</div>
            </div>

            <div class="funnel-stage">
              <div class="stage-header">
                <h3>Fechados/Ganhos</h3>
                <span class="stage-count">187</span>
              </div>
              <div class="stage-bar">
                <div class="stage-fill" style="width: 6.6%; background: #00C851;"></div>
              </div>
              <div class="stage-meta">6.6% conversão final</div>
            </div>
          </div>

          <!-- Lead Scoring -->
          <div class="section-title">
            <i class="fas fa-star"></i>
            Lead Scoring Inteligente
          </div>

          <div class="score-distribution">
            <div class="score-segment hot">
              <div class="score-header">
                <div class="score-icon">
                  <i class="fas fa-fire"></i>
                </div>
                <div class="score-info">
                  <h3>Quente (90-100)</h3>
                  <p>Pronto para fechar</p>
                </div>
              </div>
              <div class="score-stats">
                <div class="score-count">147</div>
                <div class="score-percentage">5.2%</div>
                <div class="score-conversion">Conv: 89%</div>
              </div>
            </div>

            <div class="score-segment warm">
              <div class="score-header">
                <div class="score-icon">
                  <i class="fas fa-thermometer-half"></i>
                </div>
                <div class="score-info">
                  <h3>Morno (70-89)</h3>
                  <p>Interesse demonstrado</p>
                </div>
              </div>
              <div class="score-stats">
                <div class="score-count">623</div>
                <div class="score-percentage">21.9%</div>
                <div class="score-conversion">Conv: 34%</div>
              </div>
            </div>

            <div class="score-segment cold">
              <div class="score-header">
                <div class="score-icon">
                  <i class="fas fa-snowflake"></i>
                </div>
                <div class="score-info">
                  <h3>Frio (50-69)</h3>
                  <p>Nurturing necessário</p>
                </div>
              </div>
              <div class="score-stats">
                <div class="score-count">1.234</div>
                <div class="score-percentage">43.4%</div>
                <div class="score-conversion">Conv: 12%</div>
              </div>
            </div>

            <div class="score-segment frozen">
              <div class="score-header">
                <div class="score-icon">
                  <i class="fas fa-icicles"></i>
                </div>
                <div class="score-info">
                  <h3>Congelado (0-49)</h3>
                  <p>Re-qualificação</p>
                </div>
              </div>
              <div class="score-stats">
                <div class="score-count">843</div>
                <div class="score-percentage">29.6%</div>
                <div class="score-conversion">Conv: 3%</div>
              </div>
            </div>
          </div>

          <!-- Fatores de Scoring -->
          <div class="section-title">
            <i class="fas fa-weight"></i>
            Fatores de Scoring e Pesos
          </div>

          <div class="scoring-factors">
            <div class="factor-card">
              <div class="factor-name">Engajamento WhatsApp</div>
              <div class="factor-weight">Peso: 25%</div>
              <div class="factor-desc">Respostas rápidas, uso de emojis, perguntas</div>
            </div>

            <div class="factor-card">
              <div class="factor-name">Dados Demográficos</div>
              <div class="factor-weight">Peso: 20%</div>
              <div class="factor-desc">Cargo, empresa, localização, segmento</div>
            </div>

            <div class="factor-card">
              <div class="factor-name">Comportamento Digital</div>
              <div class="factor-weight">Peso: 20%</div>
              <div class="factor-desc">Visitas ao site, downloads, tempo de sessão</div>
            </div>

            <div class="factor-card">
              <div class="factor-name">Interesse Demonstrado</div>
              <div class="factor-weight">Peso: 15%</div>
              <div class="factor-desc">Solicitações de demo, perguntas sobre preços</div>
            </div>

            <div class="factor-card">
              <div class="factor-name">Fit do Cliente Ideal</div>
              <div class="factor-weight">Peso: 10%</div>
              <div class="factor-desc">Match com ICP definido</div>
            </div>

            <div class="factor-card">
              <div class="factor-name">Timing</div>
              <div class="factor-weight">Peso: 10%</div>
              <div class="factor-desc">Necessidade imediata, orçamento, decisão</div>
            </div>
          </div>
        </div>

        <!-- ANÁLISE COMPETITIVA -->
        <div id="tab-competitive" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-chess"></i>
              </div>
              <div>
                <h2>Análise Competitiva</h2>
                <p>Benchmarking, posicionamento de mercado e intelligence competitiva</p>
              </div>
            </div>
          </div>

          <!-- Market Share -->
          <div class="section-title">
            <i class="fas fa-chart-pie"></i>
            Market Share e Posicionamento
          </div>
          
          <div class="competitive-grid">
            <div class="market-share-card">
              <div class="share-header">
                <div class="company-logo our-company">
                  <i class="fas fa-building"></i>
                </div>
                <div class="company-info">
                  <h3>Nossa Empresa</h3>
                  <span class="market-position">#2 no Mercado</span>
                </div>
              </div>
              <div class="share-metrics">
                <div class="share-value">23.4%</div>
                <div class="share-label">Market Share</div>
                <div class="share-trend positive">
                  <i class="fas fa-arrow-up"></i>
                  +2.3% YoY
                </div>
              </div>
            </div>

            <div class="competitor-card leader">
              <div class="competitor-header">
                <div class="company-logo competitor">
                  <i class="fas fa-crown"></i>
                </div>
                <div class="company-info">
                  <h3>Líder do Mercado</h3>
                  <span class="market-position">#1 Global</span>
                </div>
              </div>
              <div class="competitor-metrics">
                <div class="metric-row">
                  <span>Market Share:</span>
                  <span>34.7%</span>
                </div>
                <div class="metric-row">
                  <span>Crescimento:</span>
                  <span class="positive">+1.2% YoY</span>
                </div>
                <div class="metric-row">
                  <span>NPS:</span>
                  <span>67</span>
                </div>
                <div class="metric-row">
                  <span>Preço médio:</span>
                  <span>R$ 890/mês</span>
                </div>
              </div>
            </div>

            <div class="competitor-card">
              <div class="competitor-header">
                <div class="company-logo competitor">
                  <i class="fas fa-rocket"></i>
                </div>
                <div class="company-info">
                  <h3>Startup Disruptiva</h3>
                  <span class="market-position">#3 Crescimento</span>
                </div>
              </div>
              <div class="competitor-metrics">
                <div class="metric-row">
                  <span>Market Share:</span>
                  <span>15.8%</span>
                </div>
                <div class="metric-row">
                  <span>Crescimento:</span>
                  <span class="positive">+45% YoY</span>
                </div>
                <div class="metric-row">
                  <span>NPS:</span>
                  <span>78</span>
                </div>
                <div class="metric-row">
                  <span>Preço médio:</span>
                  <span>R$ 450/mês</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Análise SWOT -->
          <div class="section-title">
            <i class="fas fa-balance-scale"></i>
            Análise SWOT Comparativa
          </div>

          <div class="swot-grid">
            <div class="swot-card strengths">
              <div class="swot-header">
                <i class="fas fa-thumbs-up"></i>
                <h3>Forças (Strengths)</h3>
              </div>
              <ul class="swot-list">
                <li>IA conversacional mais avançada</li>
                <li>Integração WhatsApp nativa</li>
                <li>Suporte multi-idioma</li>
                <li>Análise de sentimento em tempo real</li>
                <li>Preço competitivo vs líder</li>
              </ul>
            </div>

            <div class="swot-card weaknesses">
              <div class="swot-header">
                <i class="fas fa-thumbs-down"></i>
                <h3>Fraquezas (Weaknesses)</h3>
              </div>
              <ul class="swot-list">
                <li>Brand awareness menor</li>
                <li>Menos integrações CRM</li>
                <li>Equipe de suporte reduzida</li>
                <li>Sem escritório internacional</li>
                <li>Marketing budget limitado</li>
              </ul>
            </div>

            <div class="swot-card opportunities">
              <div class="swot-header">
                <i class="fas fa-lightbulb"></i>
                <h3>Oportunidades (Opportunities)</h3>
              </div>
              <ul class="swot-list">
                <li>Mercado de IA em crescimento 40% aa</li>
                <li>Demanda por automação WhatsApp</li>
                <li>Expansão América Latina</li>
                <li>Parcerias com agências digitais</li>
                <li>Verticais especializadas (imob, edu)</li>
              </ul>
            </div>

            <div class="swot-card threats">
              <div class="swot-header">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Ameaças (Threats)</h3>
              </div>
              <ul class="swot-list">
                <li>Entrada de big techs (Google, MS)</li>
                <li>Mudanças políticas WhatsApp API</li>
                <li>Guerra de preços</li>
                <li>Regulamentação IA/LGPD</li>
                <li>Crise econômica/recessão</li>
              </ul>
            </div>
          </div>

          <!-- Comparison Matrix -->
          <div class="section-title">
            <i class="fas fa-table"></i>
            Matriz Comparativa de Features
          </div>

          <div class="comparison-table">
            <table class="competitive-matrix">
              <thead>
                <tr>
                  <th>Feature/Funcionalidade</th>
                  <th class="our-company">Nossa Solução</th>
                  <th>Líder Mercado</th>
                  <th>Startup</th>
                  <th>Tradicional</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>IA Conversacional</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating good">★★★★☆</td>
                  <td class="rating good">★★★★☆</td>
                  <td class="rating poor">★★☆☆☆</td>
                </tr>
                <tr>
                  <td>WhatsApp Nativo</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating poor">★★☆☆☆</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating poor">★☆☆☆☆</td>
                </tr>
                <tr>
                  <td>Análise Sentimento</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating average">★★★☆☆</td>
                  <td class="rating good">★★★★☆</td>
                  <td class="rating poor">★☆☆☆☆</td>
                </tr>
                <tr>
                  <td>Integrações CRM</td>
                  <td class="rating average">★★★☆☆</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating average">★★★☆☆</td>
                  <td class="rating excellent">★★★★★</td>
                </tr>
                <tr>
                  <td>Suporte 24/7</td>
                  <td class="rating good">★★★★☆</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating average">★★★☆☆</td>
                  <td class="rating good">★★★★☆</td>
                </tr>
                <tr>
                  <td>Preço/Valor</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating average">★★★☆☆</td>
                  <td class="rating excellent">★★★★★</td>
                  <td class="rating good">★★★★☆</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- AUTOMAÇÃO E WORKFLOWS -->
        <div id="tab-automation" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-robot"></i>
              </div>
              <div>
                <h2>Automação e Workflows</h2>
                <p>Fluxos automatizados, triggers, sequências e campanhas inteligentes</p>
              </div>
            </div>
          </div>

          <!-- Workflows Ativos -->
          <div class="section-title">
            <i class="fas fa-play-circle"></i>
            Workflows Ativos em Execução
          </div>
          
          <div class="workflows-grid">
            <div class="workflow-card active">
              <div class="workflow-header">
                <div class="workflow-status running">
                  <i class="fas fa-circle"></i>
                </div>
                <div class="workflow-info">
                  <h3>Nutrição Leads Frios</h3>
                  <span class="workflow-type">Sequência de E-mail</span>
                </div>
                <div class="workflow-actions">
                  <button class="btn-icon">
                    <i class="fas fa-pause"></i>
                  </button>
                  <button class="btn-icon">
                    <i class="fas fa-cog"></i>
                  </button>
                </div>
              </div>
              <div class="workflow-stats">
                <div class="stat">
                  <span class="stat-value">1.234</span>
                  <span class="stat-label">Leads no funil</span>
                </div>
                <div class="stat">
                  <span class="stat-value">23.4%</span>
                  <span class="stat-label">Taxa abertura</span>
                </div>
                <div class="stat">
                  <span class="stat-value">187</span>
                  <span class="stat-label">Convertidos</span>
                </div>
              </div>
              <div class="workflow-progress">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 68%;"></div>
                </div>
                <span class="progress-text">68% dos leads processados</span>
              </div>
            </div>

            <div class="workflow-card active">
              <div class="workflow-header">
                <div class="workflow-status running">
                  <i class="fas fa-circle"></i>
                </div>
                <div class="workflow-info">
                  <h3>Follow-up Pós-Demo</h3>
                  <span class="workflow-type">WhatsApp Automático</span>
                </div>
                <div class="workflow-actions">
                  <button class="btn-icon">
                    <i class="fas fa-pause"></i>
                  </button>
                  <button class="btn-icon">
                    <i class="fas fa-cog"></i>
                  </button>
                </div>
              </div>
              <div class="workflow-stats">
                <div class="stat">
                  <span class="stat-value">456</span>
                  <span class="stat-label">Demos realizadas</span>
                </div>
                <div class="stat">
                  <span class="stat-value">78.2%</span>
                  <span class="stat-label">Taxa resposta</span>
                </div>
                <div class="stat">
                  <span class="stat-value">89</span>
                  <span class="stat-label">Reuniões agendadas</span>
                </div>
              </div>
              <div class="workflow-progress">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 84%;"></div>
                </div>
                <span class="progress-text">84% de aprovação NPS</span>
              </div>
            </div>

            <div class="workflow-card paused">
              <div class="workflow-header">
                <div class="workflow-status paused">
                  <i class="fas fa-pause"></i>
                </div>
                <div class="workflow-info">
                  <h3>Reativação Leads Perdidos</h3>
                  <span class="workflow-type">Campanha Multi-canal</span>
                </div>
                <div class="workflow-actions">
                  <button class="btn-icon">
                    <i class="fas fa-play"></i>
                  </button>
                  <button class="btn-icon">
                    <i class="fas fa-cog"></i>
                  </button>
                </div>
              </div>
              <div class="workflow-stats">
                <div class="stat">
                  <span class="stat-value">2.847</span>
                  <span class="stat-label">Leads perdidos</span>
                </div>
                <div class="stat">
                  <span class="stat-value">12.1%</span>
                  <span class="stat-label">Taxa reativação</span>
                </div>
                <div class="stat">
                  <span class="stat-value">344</span>
                  <span class="stat-label">Reativados</span>
                </div>
              </div>
              <div class="workflow-progress">
                <div class="progress-bar paused-bar">
                  <div class="progress-fill" style="width: 45%;"></div>
                </div>
                <span class="progress-text">Pausado temporariamente</span>
              </div>
            </div>
          </div>

          <!-- Triggers e Condições -->
          <div class="section-title">
            <i class="fas fa-bolt"></i>
            Triggers Inteligentes Configurados
          </div>

          <div class="triggers-grid">
            <div class="trigger-card">
              <div class="trigger-icon">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="trigger-content">
                <h3>Novo Lead Captado</h3>
                <p>Acionado quando lead preenche formulário</p>
                <div class="trigger-actions">
                  <span class="action-tag">WhatsApp Boas-vindas</span>
                  <span class="action-tag">Adicionar ao CRM</span>
                  <span class="action-tag">Notificar vendedor</span>
                </div>
                <div class="trigger-stats">
                  <span>2.847 acionamentos (30 dias)</span>
                </div>
              </div>
            </div>

            <div class="trigger-card">
              <div class="trigger-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="trigger-content">
                <h3>Lead Inativo 7 dias</h3>
                <p>Sem interação há uma semana</p>
                <div class="trigger-actions">
                  <span class="action-tag">E-mail reengajamento</span>
                  <span class="action-tag">WhatsApp follow-up</span>
                  <span class="action-tag">Alterar score</span>
                </div>
                <div class="trigger-stats">
                  <span>623 acionamentos (30 dias)</span>
                </div>
              </div>
            </div>

            <div class="trigger-card">
              <div class="trigger-icon">
                <i class="fas fa-star"></i>
              </div>
              <div class="trigger-content">
                <h3>Score Alto (>90)</h3>
                <p>Lead qualificado automaticamente</p>
                <div class="trigger-actions">
                  <span class="action-tag">Notificar manager</span>
                  <span class="action-tag">Agendar ligação</span>
                  <span class="action-tag">Proposta automática</span>
                </div>
                <div class="trigger-stats">
                  <span>147 acionamentos (30 dias)</span>
                </div>
              </div>
            </div>

            <div class="trigger-card">
              <div class="trigger-icon">
                <i class="fas fa-calendar"></i>
              </div>
              <div class="trigger-content">
                <h3>Demo Agendada</h3>
                <p>Reunião marcada no calendário</p>
                <div class="trigger-actions">
                  <span class="action-tag">E-mail confirmação</span>
                  <span class="action-tag">WhatsApp lembrete</span>
                  <span class="action-tag">Material prep.</span>
                </div>
                <div class="trigger-stats">
                  <span>456 acionamentos (30 dias)</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Performance de Automação -->
          <div class="section-title">
            <i class="fas fa-chart-line"></i>
            Performance das Automações
          </div>

          <div class="automation-performance">
            <div class="performance-metric">
              <div class="metric-header">
                <i class="fas fa-tachometer-alt"></i>
                <h3>Tempo de Resposta</h3>
              </div>
              <div class="metric-value">
                <span class="value-number">1.2s</span>
                <span class="value-label">Média global</span>
              </div>
              <div class="metric-breakdown">
                <div class="breakdown-item">
                  <span>WhatsApp:</span>
                  <span>0.8s</span>
                </div>
                <div class="breakdown-item">
                  <span>E-mail:</span>
                  <span>2.3s</span>
                </div>
                <div class="breakdown-item">
                  <span>SMS:</span>
                  <span>0.5s</span>
                </div>
              </div>
            </div>

            <div class="performance-metric">
              <div class="metric-header">
                <i class="fas fa-percentage"></i>
                <h3>Taxa de Sucesso</h3>
              </div>
              <div class="metric-value">
                <span class="value-number">96.7%</span>
                <span class="value-label">Automações executadas</span>
              </div>
              <div class="metric-breakdown">
                <div class="breakdown-item success">
                  <span>Sucesso:</span>
                  <span>96.7%</span>
                </div>
                <div class="breakdown-item warning">
                  <span>Retry:</span>
                  <span>2.8%</span>
                </div>
                <div class="breakdown-item error">
                  <span>Falha:</span>
                  <span>0.5%</span>
                </div>
              </div>
            </div>

            <div class="performance-metric">
              <div class="metric-header">
                <i class="fas fa-coins"></i>
                <h3>ROI das Automações</h3>
              </div>
              <div class="metric-value">
                <span class="value-number">347%</span>
                <span class="value-label">Retorno sobre investimento</span>
              </div>
              <div class="metric-breakdown">
                <div class="breakdown-item">
                  <span>Economia horas/mês:</span>
                  <span>340h</span>
                </div>
                <div class="breakdown-item">
                  <span>Receita gerada:</span>
                  <span>R$ 2.8M</span>
                </div>
                <div class="breakdown-item">
                  <span>Custo operação:</span>
                  <span>R$ 650k</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ANALYTICS AVANÇADO -->
        <div id="tab-advanced" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-chart-area"></i>
              </div>
              <div>
                <h2>Analytics Avançado</h2>
                <p>Business Intelligence, relatórios personalizados e insights preditivos</p>
              </div>
            </div>
          </div>

          <!-- Predictive Analytics -->
          <div class="section-title">
            <i class="fas fa-crystal-ball"></i>
            Insights Preditivos e Machine Learning
          </div>
          
          <div class="predictive-grid">
            <div class="prediction-card revenue">
              <div class="prediction-header">
                <i class="fas fa-trending-up"></i>
                <h3>Previsão de Receita</h3>
              </div>
              <div class="prediction-content">
                <div class="prediction-value">R$ 2.8M</div>
                <div class="prediction-period">Próximos 3 meses</div>
                <div class="confidence-score">Confiança: 87%</div>
                <div class="prediction-factors">
                  <span class="factor">Pipeline atual</span>
                  <span class="factor">Tendência histórica</span>
                  <span class="factor">Sazonalidade</span>
                </div>
              </div>
            </div>

            <div class="prediction-card churn">
              <div class="prediction-header">
                <i class="fas fa-user-times"></i>
                <h3>Risco de Churn</h3>
              </div>
              <div class="prediction-content">
                <div class="prediction-value warning">23 leads</div>
                <div class="prediction-period">Alto risco (próximos 7 dias)</div>
                <div class="confidence-score">Confiança: 92%</div>
                <div class="prediction-factors">
                  <span class="factor">Baixo engagement</span>
                  <span class="factor">Tempo sem interação</span>
                  <span class="factor">Score decrescente</span>
                </div>
              </div>
            </div>

            <div class="prediction-card conversion">
              <div class="prediction-header">
                <i class="fas fa-bullseye"></i>
                <h3>Conversão Provável</h3>
              </div>
              <div class="prediction-content">
                <div class="prediction-value success">147 leads</div>
                <div class="prediction-period">Próximos 30 dias</div>
                <div class="confidence-score">Confiança: 78%</div>
                <div class="prediction-factors">
                  <span class="factor">Score alto</span>
                  <span class="factor">Engajamento crescente</span>
                  <span class="factor">Perfil ICP</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Advanced Charts -->
          <div class="section-title">
            <i class="fas fa-chart-line"></i>
            Análises Multidimensionais
          </div>

          <div class="advanced-charts-grid">
            <div class="chart-card full-width">
              <div class="chart-header">
                <h3>Funil de Conversão Temporal</h3>
                <div class="chart-controls">
                  <select class="form-select">
                    <option>Últimos 30 dias</option>
                    <option>Últimos 90 dias</option>
                    <option>Último ano</option>
                  </select>
                </div>
              </div>
              <div class="chart-container large">
                <canvas id="temporalFunnelChart"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Matriz de Engajamento x Score</h3>
              </div>
              <div class="chart-container">
                <canvas id="engagementScoreMatrix"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3>Análise Cohort</h3>
              </div>
              <div class="chart-container">
                <canvas id="cohortAnalysisChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Custom Reports -->
          <div class="section-title">
            <i class="fas fa-file-alt"></i>
            Relatórios Personalizados
          </div>

          <div class="reports-grid">
            <div class="report-template">
              <div class="report-icon">
                <i class="fas fa-chart-pie"></i>
              </div>
              <div class="report-info">
                <h3>Relatório Executivo Mensal</h3>
                <p>KPIs principais, tendências e insights</p>
                <div class="report-meta">
                  <span>Atualizado: 2h atrás</span>
                  <span>34 páginas</span>
                </div>
              </div>
              <div class="report-actions">
                <button class="btn btn-primary">Gerar</button>
                <button class="btn btn-ghost">Agendar</button>
              </div>
            </div>

            <div class="report-template">
              <div class="report-icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="report-info">
                <h3>Análise de Performance por Canal</h3>
                <p>WhatsApp, E-mail, LinkedIn, telefone</p>
                <div class="report-meta">
                  <span>Atualizado: 1h atrás</span>
                  <span>18 páginas</span>
                </div>
              </div>
              <div class="report-actions">
                <button class="btn btn-primary">Gerar</button>
                <button class="btn btn-ghost">Agendar</button>
              </div>
            </div>

            <div class="report-template">
              <div class="report-icon">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="report-info">
                <h3>ROI e Eficiência Operacional</h3>
                <p>Custos, receita e métricas de eficiência</p>
                <div class="report-meta">
                  <span>Atualizado: 30min atrás</span>
                  <span>12 páginas</span>
                </div>
              </div>
              <div class="report-actions">
                <button class="btn btn-primary">Gerar</button>
                <button class="btn btn-ghost">Agendar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- GESTÃO DE EQUIPE -->
        <div id="tab-team" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-users-cog"></i>
              </div>
              <div>
                <h2>Gestão de Equipe</h2>
                <p>Performance individual, metas, produtividade e desenvolvimento</p>
              </div>
            </div>
          </div>

          <!-- Team Overview -->
          <div class="section-title">
            <i class="fas fa-chart-bar"></i>
            Performance da Equipe
          </div>
          
          <div class="team-stats-grid">
            <div class="team-member-card top-performer">
              <div class="member-avatar">
                <img src="https://via.placeholder.com/60x60/4F46E5/white?text=AS" alt="Ana Silva">
                <div class="performance-badge">
                  <i class="fas fa-crown"></i>
                </div>
              </div>
              <div class="member-info">
                <h3>Ana Silva</h3>
                <span class="member-role">Especialista IA</span>
                <div class="member-stats">
                  <div class="stat">
                    <span class="stat-value">2.847</span>
                    <span class="stat-label">Conversas/mês</span>
                  </div>
                  <div class="stat">
                    <span class="stat-value">73%</span>
                    <span class="stat-label">Taxa conversão</span>
                  </div>
                </div>
                <div class="performance-score">
                  <span>Score: 94/100</span>
                  <div class="score-bar">
                    <div class="score-fill" style="width: 94%;"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="team-member-card">
              <div class="member-avatar">
                <img src="https://via.placeholder.com/60x60/10B981/white?text=RC" alt="Roberto Costa">
              </div>
              <div class="member-info">
                <h3>Roberto Costa</h3>
                <span class="member-role">Analista WhatsApp</span>
                <div class="member-stats">
                  <div class="stat">
                    <span class="stat-value">2.234</span>
                    <span class="stat-label">Conversas/mês</span>
                  </div>
                  <div class="stat">
                    <span class="stat-value">67%</span>
                    <span class="stat-label">Taxa conversão</span>
                  </div>
                </div>
                <div class="performance-score">
                  <span>Score: 87/100</span>
                  <div class="score-bar">
                    <div class="score-fill" style="width: 87%;"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="team-member-card">
              <div class="member-avatar">
                <img src="https://via.placeholder.com/60x60/F59E0B/white?text=MO" alt="Mariana Oliveira">
              </div>
              <div class="member-info">
                <h3>Mariana Oliveira</h3>
                <span class="member-role">Supervisora</span>
                <div class="member-stats">
                  <div class="stat">
                    <span class="stat-value">1.456</span>
                    <span class="stat-label">Leads supervisionados</span>
                  </div>
                  <div class="stat">
                    <span class="stat-value">91%</span>
                    <span class="stat-label">Qualidade</span>
                  </div>
                </div>
                <div class="performance-score">
                  <span>Score: 92/100</span>
                  <div class="score-bar">
                    <div class="score-fill" style="width: 92%;"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Goals and Targets -->
          <div class="section-title">
            <i class="fas fa-bullseye"></i>
            Metas e Objetivos
          </div>

          <div class="goals-grid">
            <div class="goal-card">
              <div class="goal-header">
                <i class="fas fa-phone"></i>
                <h3>Meta Mensal - Ligações</h3>
              </div>
              <div class="goal-progress">
                <div class="goal-numbers">
                  <span class="current">2.847</span>
                  <span class="separator">/</span>
                  <span class="target">3.000</span>
                </div>
                <div class="progress-bar goal-bar">
                  <div class="progress-fill success" style="width: 94.9%;"></div>
                </div>
                <div class="goal-meta">
                  <span class="progress-text">94.9% da meta</span>
                  <span class="days-remaining">3 dias restantes</span>
                </div>
              </div>
            </div>

            <div class="goal-card">
              <div class="goal-header">
                <i class="fas fa-handshake"></i>
                <h3>Meta Mensal - Conversões</h3>
              </div>
              <div class="goal-progress">
                <div class="goal-numbers">
                  <span class="current">187</span>
                  <span class="separator">/</span>
                  <span class="target">200</span>
                </div>
                <div class="progress-bar goal-bar">
                  <div class="progress-fill warning" style="width: 93.5%;"></div>
                </div>
                <div class="goal-meta">
                  <span class="progress-text">93.5% da meta</span>
                  <span class="days-remaining">3 dias restantes</span>
                </div>
              </div>
            </div>

            <div class="goal-card">
              <div class="goal-header">
                <i class="fas fa-star"></i>
                <h3>Meta Qualidade - NPS</h3>
              </div>
              <div class="goal-progress">
                <div class="goal-numbers">
                  <span class="current">87</span>
                  <span class="separator">/</span>
                  <span class="target">85</span>
                </div>
                <div class="progress-bar goal-bar">
                  <div class="progress-fill success" style="width: 100%;"></div>
                </div>
                <div class="goal-meta">
                  <span class="progress-text success">Meta superada!</span>
                  <span class="achievement">+2.4% acima</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Training and Development -->
          <div class="section-title">
            <i class="fas fa-graduation-cap"></i>
            Treinamento e Desenvolvimento
          </div>

          <div class="training-grid">
            <div class="training-module">
              <div class="module-header">
                <i class="fas fa-robot"></i>
                <h3>IA Conversacional Avançada</h3>
              </div>
              <div class="module-progress">
                <div class="progress-info">
                  <span>8/12 módulos concluídos</span>
                  <span class="percentage">67%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 67%;"></div>
                </div>
              </div>
              <div class="module-meta">
                <span class="participants">3 participantes</span>
                <span class="duration">4h restantes</span>
              </div>
            </div>

            <div class="training-module">
              <div class="module-header">
                <i class="fas fa-comments"></i>
                <h3>Técnicas de Persuasão</h3>
              </div>
              <div class="module-progress">
                <div class="progress-info">
                  <span>12/12 módulos concluídos</span>
                  <span class="percentage success">100%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill success" style="width: 100%;"></div>
                </div>
              </div>
              <div class="module-meta">
                <span class="participants">3 participantes</span>
                <span class="completion">Concluído</span>
              </div>
            </div>

            <div class="training-module">
              <div class="module-header">
                <i class="fas fa-chart-line"></i>
                <h3>Analytics e Métricas</h3>
              </div>
              <div class="module-progress">
                <div class="progress-info">
                  <span>2/8 módulos concluídos</span>
                  <span class="percentage">25%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 25%;"></div>
                </div>
              </div>
              <div class="module-meta">
                <span class="participants">2 participantes</span>
                <span class="duration">14h restantes</span>
              </div>
            </div>
          </div>
        </div>

        <!-- COMPLIANCE E GOVERNANÇA -->
        <div id="tab-compliance" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div>
                <h2>Compliance e Governança</h2>
                <p>LGPD, auditoria, segurança de dados e políticas de conformidade</p>
              </div>
            </div>
          </div>

          <!-- LGPD Compliance -->
          <div class="section-title">
            <i class="fas fa-user-shield"></i>
            Conformidade LGPD
          </div>
          
          <div class="compliance-grid">
            <div class="compliance-card status-good">
              <div class="compliance-header">
                <i class="fas fa-check-circle"></i>
                <h3>Consentimento de Dados</h3>
              </div>
              <div class="compliance-stats">
                <div class="compliance-percentage">97.8%</div>
                <div class="compliance-label">Taxa de conformidade</div>
                <div class="compliance-details">
                  <div class="detail-row">
                    <span>Consentimentos válidos:</span>
                    <span class="success">2.784</span>
                  </div>
                  <div class="detail-row">
                    <span>Pendentes validação:</span>
                    <span class="warning">63</span>
                  </div>
                  <div class="detail-row">
                    <span>Revogados:</span>
                    <span class="info">156</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="compliance-card status-warning">
              <div class="compliance-header">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Direito ao Esquecimento</h3>
              </div>
              <div class="compliance-stats">
                <div class="compliance-percentage warning">89.2%</div>
                <div class="compliance-label">Taxa de conformidade</div>
                <div class="compliance-details">
                  <div class="detail-row">
                    <span>Solicitações atendidas:</span>
                    <span class="success">58</span>
                  </div>
                  <div class="detail-row">
                    <span>Em processamento:</span>
                    <span class="warning">7</span>
                  </div>
                  <div class="detail-row">
                    <span>Prazo médio:</span>
                    <span class="info">3.2 dias</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="compliance-card status-good">
              <div class="compliance-header">
                <i class="fas fa-lock"></i>
                <h3>Segurança de Dados</h3>
              </div>
              <div class="compliance-stats">
                <div class="compliance-percentage">99.1%</div>
                <div class="compliance-label">Taxa de conformidade</div>
                <div class="compliance-details">
                  <div class="detail-row">
                    <span>Dados criptografados:</span>
                    <span class="success">100%</span>
                  </div>
                  <div class="detail-row">
                    <span>Backups seguros:</span>
                    <span class="success">Diários</span>
                  </div>
                  <div class="detail-row">
                    <span>Último audit:</span>
                    <span class="info">15 dias</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Audit Trail -->
          <div class="section-title">
            <i class="fas fa-history"></i>
            Trilha de Auditoria
          </div>

          <div class="audit-timeline">
            <div class="audit-entry">
              <div class="audit-time">
                <span class="time">14:32</span>
                <span class="date">Hoje</span>
              </div>
              <div class="audit-content">
                <div class="audit-action data-access">
                  <i class="fas fa-eye"></i>
                  <h4>Acesso a Dados de Lead</h4>
                </div>
                <div class="audit-details">
                  <span>Usuário: ana.silva@empresa.com</span>
                  <span>Lead ID: #2847</span>
                  <span>IP: 192.168.1.45</span>
                </div>
              </div>
            </div>

            <div class="audit-entry">
              <div class="audit-time">
                <span class="time">11:15</span>
                <span class="date">Hoje</span>
              </div>
              <div class="audit-content">
                <div class="audit-action data-modification">
                  <i class="fas fa-edit"></i>
                  <h4>Modificação de Dados</h4>
                </div>
                <div class="audit-details">
                  <span>Usuário: roberto.costa@empresa.com</span>
                  <span>Campo alterado: Score do Lead</span>
                  <span>Valor: 85 → 92</span>
                </div>
              </div>
            </div>

            <div class="audit-entry">
              <div class="audit-time">
                <span class="time">09:48</span>
                <span class="date">Hoje</span>
              </div>
              <div class="audit-content">
                <div class="audit-action consent">
                  <i class="fas fa-handshake"></i>
                  <h4>Consentimento LGPD</h4>
                </div>
                <div class="audit-details">
                  <span>Lead: maria.santos@email.com</span>
                  <span>Tipo: Consentimento para marketing</span>
                  <span>Status: Aprovado</span>
                </div>
              </div>
            </div>

            <div class="audit-entry">
              <div class="audit-time">
                <span class="time">16:22</span>
                <span class="date">Ontem</span>
              </div>
              <div class="audit-content">
                <div class="audit-action data-export">
                  <i class="fas fa-download"></i>
                  <h4>Exportação de Dados</h4>
                </div>
                <div class="audit-details">
                  <span>Usuário: mariana.oliveira@empresa.com</span>
                  <span>Relatório: Performance Mensal</span>
                  <span>Registros: 2.847 leads</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Security Policies -->
          <div class="section-title">
            <i class="fas fa-file-contract"></i>
            Políticas de Segurança
          </div>

          <div class="policies-grid">
            <div class="policy-card">
              <div class="policy-icon">
                <i class="fas fa-key"></i>
              </div>
              <div class="policy-content">
                <h3>Política de Senhas</h3>
                <div class="policy-compliance">
                  <span class="compliance-rate success">98.5%</span>
                  <span class="compliance-label">Conformidade</span>
                </div>
                <ul class="policy-requirements">
                  <li>Mínimo 8 caracteres</li>
                  <li>Caracteres especiais obrigatórios</li>
                  <li>Renovação a cada 90 dias</li>
                  <li>Histórico de 12 senhas</li>
                </ul>
              </div>
            </div>

            <div class="policy-card">
              <div class="policy-icon">
                <i class="fas fa-network-wired"></i>
              </div>
              <div class="policy-content">
                <h3>Política de Acesso</h3>
                <div class="policy-compliance">
                  <span class="compliance-rate success">100%</span>
                  <span class="compliance-label">Conformidade</span>
                </div>
                <ul class="policy-requirements">
                  <li>Autenticação 2FA obrigatória</li>
                  <li>Sessões limitadas a 8h</li>
                  <li>IP whitelisting ativo</li>
                  <li>Auditoria de privilégios</li>
                </ul>
              </div>
            </div>

            <div class="policy-card">
              <div class="policy-icon">
                <i class="fas fa-database"></i>
              </div>
              <div class="policy-content">
                <h3>Política de Dados</h3>
                <div class="policy-compliance">
                  <span class="compliance-rate warning">94.2%</span>
                  <span class="compliance-label">Conformidade</span>
                </div>
                <ul class="policy-requirements">
                  <li>Criptografia AES-256</li>
                  <li>Backup diário automatizado</li>
                  <li>Retenção por 7 anos</li>
                  <li>Anonimização após término</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- CONFIGURAÇÕES E ADMIN -->
        <div id="tab-admin" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-cogs"></i>
              </div>
              <div>
                <h2>Configurações e Admin</h2>
                <p>Administração do sistema, usuários, integrações e configurações avançadas</p>
              </div>
            </div>
          </div>

          <!-- System Status -->
          <div class="section-title">
            <i class="fas fa-server"></i>
            Status do Sistema
          </div>
          
          <div class="system-status-grid">
            <div class="status-card healthy">
              <div class="status-header">
                <i class="fas fa-heartbeat"></i>
                <h3>Saúde do Sistema</h3>
              </div>
              <div class="status-indicator">
                <div class="status-value">98.7%</div>
                <div class="status-label">Uptime (30 dias)</div>
              </div>
              <div class="status-details">
                <div class="detail-item">
                  <span>CPU:</span>
                  <span class="good">23%</span>
                </div>
                <div class="detail-item">
                  <span>Memória:</span>
                  <span class="good">67%</span>
                </div>
                <div class="detail-item">
                  <span>Disco:</span>
                  <span class="good">45%</span>
                </div>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <i class="fas fa-database"></i>
                <h3>Performance BD</h3>
              </div>
              <div class="status-indicator">
                <div class="status-value">1.2ms</div>
                <div class="status-label">Tempo resposta médio</div>
              </div>
              <div class="status-details">
                <div class="detail-item">
                  <span>Queries/seg:</span>
                  <span class="good">847</span>
                </div>
                <div class="detail-item">
                  <span>Conexões ativas:</span>
                  <span class="good">23/100</span>
                </div>
                <div class="detail-item">
                  <span>Cache hit:</span>
                  <span class="good">94.3%</span>
                </div>
              </div>
            </div>

            <div class="status-card">
              <div class="status-header">
                <i class="fas fa-cloud"></i>
                <h3>APIs Externas</h3>
              </div>
              <div class="status-indicator">
                <div class="status-value">99.2%</div>
                <div class="status-label">Disponibilidade</div>
              </div>
              <div class="status-details">
                <div class="detail-item">
                  <span>OpenAI:</span>
                  <span class="good">Online</span>
                </div>
                <div class="detail-item">
                  <span>WhatsApp API:</span>
                  <span class="good">Online</span>
                </div>
                <div class="detail-item">
                  <span>Webhooks:</span>
                  <span class="good">Funcionando</span>
                </div>
              </div>
            </div>
          </div>

          <!-- User Management -->
          <div class="section-title">
            <i class="fas fa-users"></i>
            Gerenciamento de Usuários
          </div>

          <div class="user-management">
            <div class="users-summary">
              <div class="summary-item">
                <i class="fas fa-user"></i>
                <span class="summary-value">12</span>
                <span class="summary-label">Usuários ativos</span>
              </div>
              <div class="summary-item">
                <i class="fas fa-user-shield"></i>
                <span class="summary-value">3</span>
                <span class="summary-label">Administradores</span>
              </div>
              <div class="summary-item">
                <i class="fas fa-clock"></i>
                <span class="summary-value">2</span>
                <span class="summary-label">Sessões ativas</span>
              </div>
            </div>

            <div class="users-table-container">
              <table class="users-table">
                <thead>
                  <tr>
                    <th>Usuário</th>
                    <th>Papel</th>
                    <th>Último acesso</th>
                    <th>Status</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="user-info">
                        <img src="https://via.placeholder.com/32x32/4F46E5/white?text=AS" alt="Ana Silva">
                        <div>
                          <div class="user-name">Ana Silva</div>
                          <div class="user-email">ana.silva@empresa.com</div>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-badge admin">Admin</span></td>
                    <td>2 min atrás</td>
                    <td><span class="status-badge online">Online</span></td>
                    <td>
                      <button class="btn-icon"><i class="fas fa-edit"></i></button>
                      <button class="btn-icon"><i class="fas fa-key"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="user-info">
                        <img src="https://via.placeholder.com/32x32/10B981/white?text=RC" alt="Roberto Costa">
                        <div>
                          <div class="user-name">Roberto Costa</div>
                          <div class="user-email">roberto.costa@empresa.com</div>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-badge user">Usuário</span></td>
                    <td>1h atrás</td>
                    <td><span class="status-badge online">Online</span></td>
                    <td>
                      <button class="btn-icon"><i class="fas fa-edit"></i></button>
                      <button class="btn-icon"><i class="fas fa-key"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="user-info">
                        <img src="https://via.placeholder.com/32x32/F59E0B/white?text=MO" alt="Mariana Oliveira">
                        <div>
                          <div class="user-name">Mariana Oliveira</div>
                          <div class="user-email">mariana.oliveira@empresa.com</div>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-badge supervisor">Supervisor</span></td>
                    <td>3h atrás</td>
                    <td><span class="status-badge offline">Offline</span></td>
                    <td>
                      <button class="btn-icon"><i class="fas fa-edit"></i></button>
                      <button class="btn-icon"><i class="fas fa-key"></i></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Integrations -->
          <div class="section-title">
            <i class="fas fa-plug"></i>
            Integrações Ativas
          </div>

          <div class="integrations-grid">
            <div class="integration-card connected">
              <div class="integration-header">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/openai.svg" alt="OpenAI" class="integration-logo">
                <div class="integration-info">
                  <h3>OpenAI GPT-4</h3>
                  <span class="integration-type">IA Conversacional</span>
                </div>
                <div class="integration-status connected">
                  <i class="fas fa-check-circle"></i>
                </div>
              </div>
              <div class="integration-stats">
                <div class="stat-row">
                  <span>Requisições hoje:</span>
                  <span>2.847</span>
                </div>
                <div class="stat-row">
                  <span>Uptime:</span>
                  <span>99.9%</span>
                </div>
                <div class="stat-row">
                  <span>Latência média:</span>
                  <span>1.2s</span>
                </div>
              </div>
            </div>

            <div class="integration-card connected">
              <div class="integration-header">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/whatsapp.svg" alt="WhatsApp" class="integration-logo">
                <div class="integration-info">
                  <h3>WhatsApp Business</h3>
                  <span class="integration-type">Messaging API</span>
                </div>
                <div class="integration-status connected">
                  <i class="fas fa-check-circle"></i>
                </div>
              </div>
              <div class="integration-stats">
                <div class="stat-row">
                  <span>Mensagens hoje:</span>
                  <span>1.456</span>
                </div>
                <div class="stat-row">
                  <span>Taxa entrega:</span>
                  <span>98.7%</span>
                </div>
                <div class="stat-row">
                  <span>Webhook status:</span>
                  <span>Ativo</span>
                </div>
              </div>
            </div>

            <div class="integration-card warning">
              <div class="integration-header">
                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/salesforce.svg" alt="Salesforce" class="integration-logo">
                <div class="integration-info">
                  <h3>Salesforce CRM</h3>
                  <span class="integration-type">CRM Integration</span>
                </div>
                <div class="integration-status warning">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
              </div>
              <div class="integration-stats">
                <div class="stat-row">
                  <span>Última sincronização:</span>
                  <span>2h atrás</span>
                </div>
                <div class="stat-row">
                  <span>Registros pendentes:</span>
                  <span>23</span>
                </div>
                <div class="stat-row">
                  <span>Status:</span>
                  <span>Retry em andamento</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings Tab -->
        <div id="tab-settings" class="tab-content" style="display: none;">
          <!-- Header Profissional -->
          <div class="settings-header">
            <div class="settings-header-content">
              <div class="settings-icon">
                <i class="fas fa-cog"></i>
              </div>
              <div>
                <h1>Configurações Avançadas</h1>
                <p>Personalize completamente sua experiência corporativa</p>
              </div>
            </div>
          </div>

          <!-- Seção de Identidade Corporativa -->
          <div class="settings-section">
            <div class="section-title">
              <i class="fas fa-building"></i>
              Identidade Corporativa
            </div>
            
            <div class="professional-grid-2">
              <!-- Logo e Branding -->
              <div class="professional-card">
                <div class="card-header-pro">
                  <div class="header-icon">
                    <i class="fas fa-image"></i>
                  </div>
                  <div>
                    <h3>Logo e Marca</h3>
                    <p>Configure a identidade visual da sua empresa</p>
                  </div>
                </div>

                <div class="logo-upload-section">
                  <div class="logo-preview" id="logoPreview">
                    <div class="logo-placeholder">
                      <i class="fas fa-building"></i>
                      <span id="logoInitials">ORBION</span>
                    </div>
                  </div>
                  
                  <div class="logo-controls">
                    <div class="file-input-wrapper">
                      <input type="file" id="logoFile" accept="image/*" class="file-input">
                      <button class="btn-upload" onclick="document.getElementById('logoFile').click()">
                        <i class="fas fa-upload"></i>
                        Fazer Upload da Logo
                      </button>
                    </div>
                    <div class="upload-info">PNG, JPG ou SVG • Máx. 2MB • Recomendado: 200x200px</div>
                  </div>
                </div>

                <div class="form-group-pro">
                  <label class="label-pro">Nome da Empresa</label>
                  <input type="text" class="input-pro" id="companyName" value="ORBION" placeholder="Digite o nome da empresa">
                </div>
                
                <div class="form-group-pro">
                  <label class="label-pro">Slogan/Tagline</label>
                  <input type="text" class="input-pro" id="companyTagline" placeholder="Ex: Revolucionando vendas com IA">
                </div>
              </div>

              <!-- Cores e Tema -->
              <div class="professional-card">
                <div class="card-header-pro">
                  <div class="header-icon">
                    <i class="fas fa-palette"></i>
                  </div>
                  <div>
                    <h3>Paleta de Cores</h3>
                    <p>Defina as cores da sua marca</p>
                  </div>
                </div>

                <div class="color-grid">
                  <div class="color-item">
                    <label class="label-pro">Cor Primária</label>
                    <div class="color-input-wrapper">
                      <input type="color" class="color-input" id="primaryColor" value="#0066cc">
                      <input type="text" class="color-text" id="primaryColorText" value="#0066cc">
                    </div>
                  </div>
                  
                  <div class="color-item">
                    <label class="label-pro">Cor Secundária</label>
                    <div class="color-input-wrapper">
                      <input type="color" class="color-input" id="secondaryColor" value="#06b6d4">
                      <input type="text" class="color-text" id="secondaryColorText" value="#06b6d4">
                    </div>
                  </div>
                  
                  <div class="color-item">
                    <label class="label-pro">Cor de Sucesso</label>
                    <div class="color-input-wrapper">
                      <input type="color" class="color-input" id="successColor" value="#10b981">
                      <input type="text" class="color-text" id="successColorText" value="#10b981">
                    </div>
                  </div>
                  
                  <div class="color-item">
                    <label class="label-pro">Cor de Alerta</label>
                    <div class="color-input-wrapper">
                      <input type="color" class="color-input" id="warningColor" value="#f59e0b">
                      <input type="text" class="color-text" id="warningColorText" value="#f59e0b">
                    </div>
                  </div>
                </div>

                <!-- Predefinições de Cores -->
                <div class="color-presets">
                  <div class="preset-title">Paletas Profissionais</div>
                  <div class="preset-grid">
                    <div class="color-preset" data-preset="corporate" title="Corporativo Azul">
                      <div class="preset-colors">
                        <span style="background: #0066cc;"></span>
                        <span style="background: #06b6d4;"></span>
                        <span style="background: #10b981;"></span>
                        <span style="background: #f59e0b;"></span>
                      </div>
                      <div class="preset-name">Corporativo</div>
                    </div>
                    
                    <div class="color-preset" data-preset="financial" title="Financeiro Verde">
                      <div class="preset-colors">
                        <span style="background: #059669;"></span>
                        <span style="background: #0891b2;"></span>
                        <span style="background: #84cc16;"></span>
                        <span style="background: #eab308;"></span>
                      </div>
                      <div class="preset-name">Financeiro</div>
                    </div>
                    
                    <div class="color-preset" data-preset="tech" title="Tecnologia Roxo">
                      <div class="preset-colors">
                        <span style="background: #7c3aed;"></span>
                        <span style="background: #06b6d4;"></span>
                        <span style="background: #10b981;"></span>
                        <span style="background: #f59e0b;"></span>
                      </div>
                      <div class="preset-name">Tecnologia</div>
                    </div>
                    
                    <div class="color-preset" data-preset="luxury" title="Luxo Dourado">
                      <div class="preset-colors">
                        <span style="background: #1f2937;"></span>
                        <span style="background: #d97706;"></span>
                        <span style="background: #059669;"></span>
                        <span style="background: #dc2626;"></span>
                      </div>
                      <div class="preset-name">Luxo</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção de Temas -->
          <div class="settings-section">
            <div class="section-title">
              <i class="fas fa-paint-brush"></i>
              Temas e Fundos
            </div>

            <div class="theme-grid">
              <!-- Tema Claro Profissional -->
              <div class="theme-card active" data-theme="light-pro">
                <div class="theme-preview light-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Profissional Claro</div>
                  <div class="theme-desc">Limpo e moderno para ambientes corporativos</div>
                </div>
              </div>

              <!-- Tema Escuro Executivo -->
              <div class="theme-card" data-theme="dark-executive">
                <div class="theme-preview dark-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Executivo Escuro</div>
                  <div class="theme-desc">Elegante e sofisticado para C-Level</div>
                </div>
              </div>

              <!-- Tema Gradiente -->
              <div class="theme-card" data-theme="gradient">
                <div class="theme-preview gradient-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Gradiente Dinâmico</div>
                  <div class="theme-desc">Moderno com gradientes suaves</div>
                </div>
              </div>

              <!-- Tema Glassmorphism -->
              <div class="theme-card" data-theme="glassmorphism">
                <div class="theme-preview glass-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Glassmorphism Pro</div>
                  <div class="theme-desc">Efeito vidro com blur profissional</div>
                </div>
              </div>

              <!-- Tema Minimalista -->
              <div class="theme-card" data-theme="minimal">
                <div class="theme-preview minimal-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Minimalista</div>
                  <div class="theme-desc">Foco total no conteúdo</div>
                </div>
              </div>

              <!-- Tema High Contrast -->
              <div class="theme-card" data-theme="high-contrast">
                <div class="theme-preview contrast-preview">
                  <div class="preview-header"></div>
                  <div class="preview-content">
                    <div class="preview-card"></div>
                    <div class="preview-card"></div>
                  </div>
                </div>
                <div class="theme-info">
                  <div class="theme-name">Alto Contraste</div>
                  <div class="theme-desc">Máxima legibilidade e acessibilidade</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção de Fundos -->
          <div class="settings-section">
            <div class="section-title">
              <i class="fas fa-image"></i>
              Fundos Personalizados
            </div>

            <div class="background-section">
              <div class="background-controls">
                <div class="background-type-selector">
                  <button class="bg-type-btn active" data-type="none">Sem Fundo</button>
                  <button class="bg-type-btn" data-type="gradient">Gradiente</button>
                  <button class="bg-type-btn" data-type="pattern">Padrão</button>
                  <button class="bg-type-btn" data-type="image">Imagem</button>
                </div>
              </div>

              <!-- Gradientes Profissionais -->
              <div class="gradient-grid" id="gradientOptions">
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                  <span>Azul Profissional</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #f093fb 0%, #f5576c 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                  <span>Rosa Executivo</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                  <span>Azul Cyan</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);"></div>
                  <span>Verde Tech</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #fa709a 0%, #fee140 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                  <span>Dourado Premium</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                  <span>Pastel Soft</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);"></div>
                  <span>Pêssego Warm</span>
                </div>
                <div class="gradient-option" data-gradient="linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)">
                  <div class="gradient-preview" style="background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);"></div>
                  <span>Roxo Suave</span>
                </div>
              </div>

              <!-- Upload de Imagem -->
              <div class="image-upload-section" id="imageUploadSection" style="display: none;">
                <div class="upload-area" onclick="document.getElementById('backgroundImage').click()">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <h3>Faça Upload da Imagem de Fundo</h3>
                  <p>Arraste e solte ou clique para selecionar</p>
                  <small>JPG, PNG • Máx. 5MB • Recomendado: 1920x1080px</small>
                  <input type="file" id="backgroundImage" accept="image/*" style="display: none;">
                </div>
                
                <div class="image-settings">
                  <div class="setting-item">
                    <label>Opacidade do Fundo</label>
                    <input type="range" id="backgroundOpacity" min="10" max="100" value="20">
                    <span id="opacityValue">20%</span>
                  </div>
                  <div class="setting-item">
                    <label>Posição</label>
                    <select id="backgroundPosition">
                      <option value="center">Centro</option>
                      <option value="top">Superior</option>
                      <option value="bottom">Inferior</option>
                      <option value="left">Esquerda</option>
                      <option value="right">Direita</option>
                    </select>
                  </div>
                  <div class="setting-item">
                    <label>Tamanho</label>
                    <select id="backgroundSize">
                      <option value="cover">Cobrir</option>
                      <option value="contain">Conter</option>
                      <option value="100% 100%">Esticar</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Seção de Preferências -->
          <div class="settings-section">
            <div class="section-title">
              <i class="fas fa-sliders-h"></i>
              Preferências Avançadas
            </div>

            <div class="professional-grid-3">
              <div class="preference-card">
                <div class="preference-header">
                  <i class="fas fa-magic"></i>
                  <h4>Efeitos Visuais</h4>
                </div>
                <div class="preference-options">
                  <label class="switch-label">
                    <input type="checkbox" id="enableAnimations" checked>
                    <span class="switch"></span>
                    <span>Animações Premium</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableParticles" checked>
                    <span class="switch"></span>
                    <span>Partículas de Fundo</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableGlassmorphism" checked>
                    <span class="switch"></span>
                    <span>Glassmorphism</span>
                  </label>
                </div>
              </div>

              <div class="preference-card">
                <div class="preference-header">
                  <i class="fas fa-bell"></i>
                  <h4>Notificações</h4>
                </div>
                <div class="preference-options">
                  <label class="switch-label">
                    <input type="checkbox" id="enableSounds" checked>
                    <span class="switch"></span>
                    <span>Sons do Sistema</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableToasts">
                    <span class="switch"></span>
                    <span>Notificações Toast</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableVibration">
                    <span class="switch"></span>
                    <span>Vibração (Mobile)</span>
                  </label>
                </div>
              </div>

              <div class="preference-card">
                <div class="preference-header">
                  <i class="fas fa-sync"></i>
                  <h4>Performance</h4>
                </div>
                <div class="preference-options">
                  <label class="switch-label">
                    <input type="checkbox" id="autoRefresh" checked>
                    <span class="switch"></span>
                    <span>Atualização Automática</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableCaching" checked>
                    <span class="switch"></span>
                    <span>Cache Inteligente</span>
                  </label>
                  <label class="switch-label">
                    <input type="checkbox" id="enableLazyLoad" checked>
                    <span class="switch"></span>
                    <span>Carregamento Lazy</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Botões de Ação -->
          <div class="settings-actions">
            <button class="btn-action secondary" onclick="resetToDefaults()">
              <i class="fas fa-undo"></i>
              Restaurar Padrões
            </button>
            <button class="btn-action primary" onclick="applyAllSettings()">
              <i class="fas fa-save"></i>
              Aplicar Todas as Configurações
            </button>
            <button class="btn-action success" onclick="exportSettings()">
              <i class="fas fa-download"></i>
              Exportar Configuração
            </button>
          </div>
        </div>

        <!-- PERFORMANCE DE PROSPECÇÃO -->
        <div id="tab-prospecting" class="tab-content" style="display: none;">
          <div class="executive-header">
            <div class="executive-title">
              <div class="executive-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div>
                <h2>Performance de Prospecção</h2>
                <p>Métricas detalhadas de atividade comercial e análise de canais</p>
              </div>
            </div>
          </div>

          <!-- Métricas de Atividade -->
          <div class="section-title">
            <i class="fas fa-chart-bar"></i>
            Métricas de Atividade Diária
          </div>
          
          <div class="executive-grid-4">
            <div class="activity-metric-card primary">
              <div class="metric-header">
                <i class="fas fa-phone"></i>
                <span>Chamadas Realizadas</span>
              </div>
              <div class="metric-value">2.847</div>
              <div class="metric-meta">Meta: 2.500/dia</div>
              <div class="metric-change positive">
                <i class="fas fa-arrow-up"></i>
                +13,9% vs meta
              </div>
            </div>

            <div class="activity-metric-card success">
              <div class="metric-header">
                <i class="fas fa-envelope"></i>
                <span>E-mails Enviados</span>
              </div>
              <div class="metric-value">5.234</div>
              <div class="metric-meta">Meta: 4.800/dia</div>
              <div class="metric-change positive">
                <i class="fas fa-arrow-up"></i>
                +9,0% vs meta
              </div>
            </div>

            <div class="activity-metric-card warning">
              <div class="metric-header">
                <i class="fab fa-linkedin"></i>
                <span>Conexões LinkedIn</span>
              </div>
              <div class="metric-value">387</div>
              <div class="metric-meta">Taxa aceite: 68%</div>
              <div class="metric-change positive">
                <i class="fas fa-arrow-up"></i>
                +15% vs semana
              </div>
            </div>

            <div class="activity-metric-card info">
              <div class="metric-header">
                <i class="fab fa-whatsapp"></i>
                <span>WhatsApp Enviados</span>
              </div>
              <div class="metric-value">1.456</div>
              <div class="metric-meta">Taxa resposta: 42%</div>
              <div class="metric-change positive">
                <i class="fas fa-arrow-up"></i>
                +8,3% vs ontem
              </div>
            </div>
          </div>

          <!-- Taxa de Conexão e Resposta -->
          <div class="section-title">
            <i class="fas fa-percentage"></i>
            Taxas de Performance por Canal
          </div>

          <div class="executive-grid-2">
            <div class="performance-chart-card">
              <div class="chart-card-header">
                <h3>Taxa de Conexão por Canal</h3>
                <span class="chart-period">Últimos 30 dias</span>
              </div>
              <div class="chart-container">
                <canvas id="connectionRateChart"></canvas>
              </div>
            </div>

            <div class="performance-chart-card">
              <div class="chart-card-header">
                <h3>Taxa de Resposta por Canal</h3>
                <span class="chart-period">Últimos 30 dias</span>
              </div>
              <div class="chart-container">
                <canvas id="responseRateChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Análise de Horários -->
          <div class="section-title">
            <i class="fas fa-clock"></i>
            Análise de Horários e Timing
          </div>

          <div class="executive-grid-1">
            <div class="timing-heatmap-card">
              <div class="chart-card-header">
                <h3>Heatmap de Performance por Horário</h3>
                <div class="timing-legend">
                  <span class="legend-item high">Alta Performance</span>
                  <span class="legend-item medium">Média Performance</span>
                  <span class="legend-item low">Baixa Performance</span>
                </div>
              </div>
              <div class="timing-heatmap" id="timingHeatmap">
                <!-- Heatmap will be generated by JavaScript -->
              </div>
            </div>
          </div>

          <!-- Gráfico de Tendências -->
          <div class="section-title">
            <i class="fas fa-chart-area"></i>
            Tendências de Performance
          </div>

          <div class="executive-grid-1">
            <div class="performance-chart-card">
              <div class="chart-card-header">
                <h3>Evolução Mensal das Atividades</h3>
                <div class="chart-controls">
                  <button class="chart-control-btn active" onclick="setTrendPeriod('3m')">3M</button>
                  <button class="chart-control-btn" onclick="setTrendPeriod('6m')">6M</button>
                  <button class="chart-control-btn" onclick="setTrendPeriod('12m')">1A</button>
                </div>
              </div>
              <div class="chart-container-large">
                <canvas id="activityTrendChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Insights e Recomendações -->
          <div class="section-title">
            <i class="fas fa-lightbulb"></i>
            Insights e Recomendações de IA
          </div>

          <div class="executive-grid-2">
            <div class="insight-card positive">
              <div class="insight-icon">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="insight-content">
                <h4>Horário de Ouro Identificado</h4>
                <p>Chamadas entre 14h-16h apresentam 47% mais conversões. Recomendo concentrar 35% das atividades neste período.</p>
                <div class="insight-impact">
                  <span>Potencial de aumento: +23% nas conversões</span>
                </div>
              </div>
            </div>

            <div class="insight-card warning">
              <div class="insight-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="insight-content">
                <h4>Canal LinkedIn Subutilizado</h4>
                <p>Taxa de aceite no LinkedIn (68%) está 15% acima da média do mercado, mas volume ainda baixo.</p>
                <div class="insight-impact">
                  <span>Ação sugerida: Aumentar atividade LinkedIn em 40%</span>
                </div>
              </div>
            </div>

            <div class="insight-card info">
              <div class="insight-icon">
                <i class="fas fa-robot"></i>
              </div>
              <div class="insight-content">
                <h4>Automação Otimizada</h4>
                <p>IA detectou padrões de follow-up mais eficazes: 2 dias após primeiro contato aumenta resposta em 31%.</p>
                <div class="insight-impact">
                  <span>ROI esperado: +R$ 156k/mês</span>
                </div>
              </div>
            </div>

            <div class="insight-card primary">
              <div class="insight-icon">
                <i class="fas fa-target"></i>
              </div>
              <div class="insight-content">
                <h4>Meta Mensal Projetada</h4>
                <p>Com o ritmo atual, expectativa de superar meta mensal em 18%. Foco em qualificação para maximizar resultados.</p>
                <div class="insight-impact">
                  <span>Projeção: R$ 2.89M vs meta R$ 2.45M</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- FUNIL DE VENDAS TAB -->
        <div id="tab-funnel" class="tab-content" style="display: none;">
          <div class="funnel-header">
            <h2 class="funnel-title">
              <i class="fas fa-filter"></i> Funil de Vendas Inteligente
            </h2>
            <p class="funnel-subtitle">Visualização completa da jornada do cliente com análise de conversão por etapa</p>
          </div>

          <!-- Funil Visual Principal -->
          <div class="funnel-visualization">
            <div class="funnel-stage" data-stage="awareness">
              <div class="stage-icon">
                <i class="fas fa-eye"></i>
              </div>
              <div class="stage-content">
                <div class="stage-name">Visitantes</div>
                <div class="stage-value">12.847</div>
                <div class="stage-percentage">100%</div>
              </div>
              <div class="stage-bar" style="width: 100%;"></div>
            </div>

            <div class="funnel-arrow">
              <i class="fas fa-chevron-down"></i>
              <span class="conversion-rate">73%</span>
            </div>

            <div class="funnel-stage" data-stage="interest">
              <div class="stage-icon">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="stage-content">
                <div class="stage-name">Leads Captados</div>
                <div class="stage-value">9.378</div>
                <div class="stage-percentage">73%</div>
              </div>
              <div class="stage-bar" style="width: 73%;"></div>
            </div>

            <div class="funnel-arrow">
              <i class="fas fa-chevron-down"></i>
              <span class="conversion-rate">54%</span>
            </div>

            <div class="funnel-stage" data-stage="qualification">
              <div class="stage-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="stage-content">
                <div class="stage-name">Leads Qualificados</div>
                <div class="stage-value">5.064</div>
                <div class="stage-percentage">39%</div>
              </div>
              <div class="stage-bar" style="width: 39%;"></div>
            </div>

            <div class="funnel-arrow">
              <i class="fas fa-chevron-down"></i>
              <span class="conversion-rate">42%</span>
            </div>

            <div class="funnel-stage" data-stage="opportunity">
              <div class="stage-icon">
                <i class="fas fa-handshake"></i>
              </div>
              <div class="stage-content">
                <div class="stage-name">Oportunidades</div>
                <div class="stage-value">2.127</div>
                <div class="stage-percentage">17%</div>
              </div>
              <div class="stage-bar" style="width: 17%;"></div>
            </div>

            <div class="funnel-arrow">
              <i class="fas fa-chevron-down"></i>
              <span class="conversion-rate">28%</span>
            </div>

            <div class="funnel-stage success" data-stage="customer">
              <div class="stage-icon">
                <i class="fas fa-trophy"></i>
              </div>
              <div class="stage-content">
                <div class="stage-name">Clientes Fechados</div>
                <div class="stage-value">596</div>
                <div class="stage-percentage">4.6%</div>
              </div>
              <div class="stage-bar success" style="width: 4.6%;"></div>
            </div>
          </div>

          <!-- Métricas do Funil -->
          <div class="funnel-metrics">
            <div class="funnel-metric-card">
              <div class="metric-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Tempo Médio</div>
                <div class="metric-value">18 dias</div>
                <div class="metric-change positive">
                  <i class="fas fa-arrow-down"></i> -3 dias
                </div>
              </div>
            </div>

            <div class="funnel-metric-card">
              <div class="metric-icon">
                <i class="fas fa-percentage"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Taxa Conversão</div>
                <div class="metric-value">4.6%</div>
                <div class="metric-change positive">
                  <i class="fas fa-arrow-up"></i> +0.8%
                </div>
              </div>
            </div>

            <div class="funnel-metric-card">
              <div class="metric-icon">
                <i class="fas fa-dollar-sign"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Valor Médio</div>
                <div class="metric-value">R$ 4.250</div>
                <div class="metric-change positive">
                  <i class="fas fa-arrow-up"></i> +15%
                </div>
              </div>
            </div>

            <div class="funnel-metric-card">
              <div class="metric-icon">
                <i class="fas fa-fire"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Velocidade</div>
                <div class="metric-value">33/dia</div>
                <div class="metric-change positive">
                  <i class="fas fa-arrow-up"></i> +12%
                </div>
              </div>
            </div>
          </div>

          <!-- Análise por Canal -->
          <div class="funnel-channels">
            <h3 class="section-title">
              <i class="fas fa-share-alt"></i> Performance por Canal
            </h3>
            
            <div class="channels-grid">
              <div class="channel-card">
                <div class="channel-header">
                  <div class="channel-icon google">
                    <i class="fab fa-google"></i>
                  </div>
                  <span class="channel-name">Google Ads</span>
                </div>
                <div class="channel-stats">
                  <div class="stat-item">
                    <span class="stat-label">Leads</span>
                    <span class="stat-value">3.847</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Conversão</span>
                    <span class="stat-value">5.2%</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">CAC</span>
                    <span class="stat-value">R$ 127</span>
                  </div>
                </div>
                <div class="channel-performance">
                  <div class="performance-bar" style="width: 85%;"></div>
                </div>
              </div>

              <div class="channel-card">
                <div class="channel-header">
                  <div class="channel-icon facebook">
                    <i class="fab fa-facebook"></i>
                  </div>
                  <span class="channel-name">Facebook Ads</span>
                </div>
                <div class="channel-stats">
                  <div class="stat-item">
                    <span class="stat-label">Leads</span>
                    <span class="stat-value">2.956</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Conversão</span>
                    <span class="stat-value">4.1%</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">CAC</span>
                    <span class="stat-value">R$ 156</span>
                  </div>
                </div>
                <div class="channel-performance">
                  <div class="performance-bar" style="width: 72%;"></div>
                </div>
              </div>

              <div class="channel-card">
                <div class="channel-header">
                  <div class="channel-icon linkedin">
                    <i class="fab fa-linkedin"></i>
                  </div>
                  <span class="channel-name">LinkedIn</span>
                </div>
                <div class="channel-stats">
                  <div class="stat-item">
                    <span class="stat-label">Leads</span>
                    <span class="stat-value">1.234</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Conversão</span>
                    <span class="stat-value">7.8%</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">CAC</span>
                    <span class="stat-value">R$ 89</span>
                  </div>
                </div>
                <div class="channel-performance">
                  <div class="performance-bar success" style="width: 95%;"></div>
                </div>
              </div>

              <div class="channel-card">
                <div class="channel-header">
                  <div class="channel-icon organic">
                    <i class="fas fa-leaf"></i>
                  </div>
                  <span class="channel-name">Orgânico</span>
                </div>
                <div class="channel-stats">
                  <div class="stat-item">
                    <span class="stat-label">Leads</span>
                    <span class="stat-value">1.341</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">Conversão</span>
                    <span class="stat-value">3.2%</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-label">CAC</span>
                    <span class="stat-value">R$ 0</span>
                  </div>
                </div>
                <div class="channel-performance">
                  <div class="performance-bar" style="width: 58%;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Gráfico de Evolução -->
          <div class="funnel-evolution">
            <h3 class="section-title">
              <i class="fas fa-chart-line"></i> Evolução do Funil
            </h3>
            <div class="chart-container">
              <canvas id="funnelEvolutionChart"></canvas>
            </div>
          </div>
        </div>
        
        <!-- Branding Tab -->
        <div id="tab-branding" class="tab-content" style="display: none;">
          <div class="tab-header">
            <h2><i class="fas fa-palette"></i> Personalização de Marca</h2>
            <p>Configure a identidade visual do seu dashboard</p>
          </div>
          
          <div class="branding-container">
            <!-- Logo Upload Section -->
            <div class="branding-section">
              <div class="section-header">
                <h3><i class="fas fa-image"></i> Logo da Empresa</h3>
                <p>Personalize com a logo da sua marca</p>
              </div>
              
              <div class="logo-upload-area">
                <div class="current-logo">
                  <div class="logo-preview" id="logoPreview">
                    <i class="fas fa-image"></i>
                    <span>Nenhuma logo carregada</span>
                  </div>
                </div>
                
                <div class="logo-controls">
                  <input type="file" id="logoInput" accept="image/*" style="display: none;">
                  <button class="btn-primary" onclick="document.getElementById('logoInput').click()">
                    <i class="fas fa-upload"></i> Carregar Logo
                  </button>
                  <button class="btn-secondary" id="removeLogo">
                    <i class="fas fa-trash"></i> Remover
                  </button>
                </div>
                
                <div class="logo-settings">
                  <div class="setting-group">
                    <label>Tamanho da Logo</label>
                    <input type="range" id="logoSize" min="50" max="200" value="120" class="range-slider">
                    <span class="range-value">120px</span>
                  </div>
                  
                  <div class="setting-group">
                    <label>Posição</label>
                    <select id="logoPosition" class="form-select">
                      <option value="left">Esquerda</option>
                      <option value="center">Centro</option>
                      <option value="right">Direita</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Color Scheme Section -->
            <div class="branding-section">
              <div class="section-header">
                <h3><i class="fas fa-palette"></i> Esquema de Cores</h3>
                <p>Defina as cores principais do sistema</p>
              </div>
              
              <div class="color-scheme-grid">
                <div class="color-group">
                  <label>Cor Primária</label>
                  <div class="color-input-wrapper">
                    <input type="color" id="primaryColor" value="#3b82f6">
                    <input type="text" id="primaryColorText" value="#3b82f6" class="color-text">
                  </div>
                </div>
                
                <div class="color-group">
                  <label>Cor Secundária</label>
                  <div class="color-input-wrapper">
                    <input type="color" id="secondaryColor" value="#8b5cf6">
                    <input type="text" id="secondaryColorText" value="#8b5cf6" class="color-text">
                  </div>
                </div>
                
                <div class="color-group">
                  <label>Cor de Destaque</label>
                  <div class="color-input-wrapper">
                    <input type="color" id="accentColor" value="#10b981">
                    <input type="text" id="accentColorText" value="#10b981" class="color-text">
                  </div>
                </div>
                
                <div class="color-group">
                  <label>Cor de Erro</label>
                  <div class="color-input-wrapper">
                    <input type="color" id="errorColor" value="#ef4444">
                    <input type="text" id="errorColorText" value="#ef4444" class="color-text">
                  </div>
                </div>
              </div>
              
              <div class="preset-colors">
                <h4>Paletas Pré-definidas</h4>
                <div class="preset-grid">
                  <div class="preset-item" data-preset="blue">
                    <div class="preset-colors-preview">
                      <span style="background: #3b82f6;"></span>
                      <span style="background: #8b5cf6;"></span>
                      <span style="background: #10b981;"></span>
                    </div>
                    <span>Azul Profissional</span>
                  </div>
                  
                  <div class="preset-item" data-preset="green">
                    <div class="preset-colors-preview">
                      <span style="background: #10b981;"></span>
                      <span style="background: #059669;"></span>
                      <span style="background: #34d399;"></span>
                    </div>
                    <span>Verde Corporativo</span>
                  </div>
                  
                  <div class="preset-item" data-preset="purple">
                    <div class="preset-colors-preview">
                      <span style="background: #8b5cf6;"></span>
                      <span style="background: #7c3aed;"></span>
                      <span style="background: #a78bfa;"></span>
                    </div>
                    <span>Roxo Inovador</span>
                  </div>
                  
                  <div class="preset-item" data-preset="orange">
                    <div class="preset-colors-preview">
                      <span style="background: #f97316;"></span>
                      <span style="background: #ea580c;"></span>
                      <span style="background: #fb923c;"></span>
                    </div>
                    <span>Laranja Energético</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Theme Selection -->
            <div class="branding-section">
              <div class="section-header">
                <h3><i class="fas fa-moon"></i> Tema Visual</h3>
                <p>Escolha o tema base do dashboard</p>
              </div>
              
              <div class="theme-selector">
                <div class="theme-option active" data-theme="dark">
                  <div class="theme-preview dark-preview">
                    <div class="preview-header"></div>
                    <div class="preview-sidebar"></div>
                    <div class="preview-content"></div>
                  </div>
                  <span>Tema Escuro</span>
                </div>
                
                <div class="theme-option" data-theme="light">
                  <div class="theme-preview light-preview">
                    <div class="preview-header"></div>
                    <div class="preview-sidebar"></div>
                    <div class="preview-content"></div>
                  </div>
                  <span>Tema Claro</span>
                </div>
                
                <div class="theme-option" data-theme="auto">
                  <div class="theme-preview auto-preview">
                    <div class="preview-header"></div>
                    <div class="preview-sidebar"></div>
                    <div class="preview-content"></div>
                  </div>
                  <span>Automático</span>
                </div>
              </div>
            </div>

            <!-- Background Options -->
            <div class="branding-section">
              <div class="section-header">
                <h3><i class="fas fa-mountain"></i> Fundo Personalizado</h3>
                <p>Configure o fundo do dashboard</p>
              </div>
              
              <div class="background-options">
                <div class="bg-type-selector">
                  <button class="bg-type-btn active" data-type="gradient">
                    <i class="fas fa-gradient"></i> Gradiente
                  </button>
                  <button class="bg-type-btn" data-type="image">
                    <i class="fas fa-image"></i> Imagem
                  </button>
                  <button class="bg-type-btn" data-type="pattern">
                    <i class="fas fa-th"></i> Padrão
                  </button>
                </div>
                
                <div class="bg-options-content">
                  <!-- Gradient Options -->
                  <div class="bg-option-panel active" id="gradientPanel">
                    <div class="gradient-presets">
                      <div class="gradient-item active" data-gradient="default">
                        <div class="gradient-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                        <span>Padrão</span>
                      </div>
                      
                      <div class="gradient-item" data-gradient="ocean">
                        <div class="gradient-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                        <span>Oceano</span>
                      </div>
                      
                      <div class="gradient-item" data-gradient="sunset">
                        <div class="gradient-preview" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                        <span>Pôr do Sol</span>
                      </div>
                      
                      <div class="gradient-item" data-gradient="forest">
                        <div class="gradient-preview" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>
                        <span>Floresta</span>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Image Options -->
                  <div class="bg-option-panel" id="imagePanel">
                    <div class="image-upload-area">
                      <input type="file" id="bgImageInput" accept="image/*" style="display: none;">
                      <button class="btn-upload" onclick="document.getElementById('bgImageInput').click()">
                        <i class="fas fa-upload"></i> Carregar Imagem de Fundo
                      </button>
                    </div>
                    
                    <div class="image-settings">
                      <div class="setting-group">
                        <label>Opacidade</label>
                        <input type="range" id="bgOpacity" min="10" max="100" value="20" class="range-slider">
                        <span class="range-value">20%</span>
                      </div>
                      
                      <div class="setting-group">
                        <label>Posição</label>
                        <select id="bgPosition" class="form-select">
                          <option value="center">Centro</option>
                          <option value="top">Topo</option>
                          <option value="bottom">Base</option>
                          <option value="left">Esquerda</option>
                          <option value="right">Direita</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Pattern Options -->
                  <div class="bg-option-panel" id="patternPanel">
                    <div class="pattern-presets">
                      <div class="pattern-item" data-pattern="dots">
                        <div class="pattern-preview dots-pattern"></div>
                        <span>Pontos</span>
                      </div>
                      
                      <div class="pattern-item" data-pattern="grid">
                        <div class="pattern-preview grid-pattern"></div>
                        <span>Grade</span>
                      </div>
                      
                      <div class="pattern-item" data-pattern="waves">
                        <div class="pattern-preview waves-pattern"></div>
                        <span>Ondas</span>
                      </div>
                      
                      <div class="pattern-item" data-pattern="hexagon">
                        <div class="pattern-preview hexagon-pattern"></div>
                        <span>Hexágonos</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Live Preview -->
            <div class="branding-section">
              <div class="section-header">
                <h3><i class="fas fa-eye"></i> Pré-visualização</h3>
                <p>Veja como suas alterações ficam em tempo real</p>
              </div>
              
              <div class="live-preview">
                <div class="preview-dashboard" id="previewDashboard">
                  <div class="preview-sidebar">
                    <div class="preview-logo">
                      <div class="logo-placeholder">LOGO</div>
                    </div>
                    <div class="preview-nav">
                      <div class="nav-item active"></div>
                      <div class="nav-item"></div>
                      <div class="nav-item"></div>
                    </div>
                  </div>
                  <div class="preview-main">
                    <div class="preview-header">
                      <div class="header-content"></div>
                    </div>
                    <div class="preview-content">
                      <div class="preview-card"></div>
                      <div class="preview-card"></div>
                      <div class="preview-card"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="branding-actions">
              <button class="btn-primary" id="applyBranding">
                <i class="fas fa-check"></i> Aplicar Alterações
              </button>
              <button class="btn-secondary" id="resetBranding">
                <i class="fas fa-undo"></i> Restaurar Padrão
              </button>
              <button class="btn-outline" id="exportBranding">
                <i class="fas fa-download"></i> Exportar Configuração
              </button>
              <input type="file" id="importBranding" accept=".json" style="display: none;">
              <button class="btn-outline" onclick="document.getElementById('importBranding').click()">
                <i class="fas fa-upload"></i> Importar Configuração
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // === SISTEMA DE CONFIGURAÇÕES PREMIUM PERSISTENTES === 
    class ConfigManager {
      constructor() {
        this.loadSettings();
        this.initializeTheme();
        this.initializeAnimations();
      }

      loadSettings() {
        const savedSettings = localStorage.getItem('orbion-premium-settings');
        this.settings = savedSettings ? JSON.parse(savedSettings) : {
          theme: 'light',
          companyName: 'ORBION',
          companyLogo: 'O',
          primaryColor: '#0066cc',
          accentColor: '#06b6d4',
          enableAnimations: true,
          enableSounds: true,
          autoRefresh: true,
          glassmorphismMode: true
        };
      }

      saveSettings() {
        localStorage.setItem('orbion-premium-settings', JSON.stringify(this.settings));
      }

      updateSetting(key, value) {
        this.settings[key] = value;
        this.saveSettings();
        
        // Aplicar mudanças imediatamente
        if (key === 'theme') this.initializeTheme();
        if (key === 'primaryColor' || key === 'accentColor') this.applyCustomColors();
        if (key === 'enableAnimations') this.initializeAnimations();
      }

      getSetting(key) {
        return this.settings[key];
      }

      initializeTheme() {
        const body = document.body;
        body.className = '';
        if (this.settings.theme !== 'light') {
          body.classList.add(`theme-${this.settings.theme}`);
        }
        this.applyCustomColors();
      }

      applyCustomColors() {
        const root = document.documentElement;
        
        // Cores personalizadas
        root.style.setProperty('--primary-color', this.settings.primaryColor);
        root.style.setProperty('--accent-color', this.settings.accentColor);
        
        // Gerar gradientes baseados nas cores
        const primaryGradient = `linear-gradient(135deg, ${this.settings.primaryColor} 0%, ${this.darkenColor(this.settings.primaryColor, 20)} 100%)`;
        const accentGradient = `linear-gradient(135deg, ${this.settings.accentColor} 0%, ${this.darkenColor(this.settings.accentColor, 20)} 100%)`;
        
        root.style.setProperty('--primary-gradient', primaryGradient);
        root.style.setProperty('--accent-gradient', accentGradient);
      }

      darkenColor(color, percent) {
        const num = parseInt(color.replace("#",""), 16);
        const amt = Math.round(2.55 * percent);
        const R = (num >> 16) - amt;
        const G = (num >> 8 & 0x00FF) - amt;
        const B = (num & 0x0000FF) - amt;
        return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255)).toString(16).slice(1);
      }

      initializeAnimations() {
        const body = document.body;
        if (!this.settings.enableAnimations) {
          body.style.setProperty('--transition-fast', '0s');
          body.style.setProperty('--transition-normal', '0s');
          body.style.setProperty('--transition-slow', '0s');
          body.style.setProperty('--transition-bounce', '0s');
        } else {
          body.style.removeProperty('--transition-fast');
          body.style.removeProperty('--transition-normal');
          body.style.removeProperty('--transition-slow');
          body.style.removeProperty('--transition-bounce');
        }
      }
    }

    // Inicializar gerenciador de configurações
    const config = new ConfigManager();

    // === SISTEMA DE MICRO-INTERAÇÕES === 
    function initMicroInteractions() {
      // Efeito hover nos cards
      document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', () => {
          if (config.getSetting('enableAnimations')) {
            card.style.transform = 'translateY(-4px)';
          }
        });
        
        card.addEventListener('mouseleave', () => {
          card.style.transform = 'translateY(0)';
        });
      });

      // Efeito ripple nos botões
      document.querySelectorAll('.btn').forEach(button => {
        button.addEventListener('click', (e) => {
          if (!config.getSetting('enableAnimations')) return;
          
          const ripple = document.createElement('span');
          const rect = button.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;
          
          ripple.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            left: ${x}px;
            top: ${y}px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s ease-out;
            pointer-events: none;
          `;
          
          button.style.position = 'relative';
          button.style.overflow = 'hidden';
          button.appendChild(ripple);
          
          setTimeout(() => ripple.remove(), 600);
        });
      });

      // CSS para animação ripple
      const style = document.createElement('style');
      style.textContent = `
        @keyframes ripple {
          to { transform: scale(2); opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    }

    // === NAVEGAÇÃO APRIMORADA ===
    function initNavigation() {
      const navItems = document.querySelectorAll('.nav-item');
      const tabContents = document.querySelectorAll('.tab-content');
      const pageTitle = document.getElementById('pageTitle');

      navItems.forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          const tabId = item.getAttribute('data-tab');
          
          // Som de clique (se habilitado)
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
          
          // Atualizar navegação ativa
          navItems.forEach(nav => nav.classList.remove('active'));
          item.classList.add('active');
          
          // Mostrar aba correspondente com animação
          tabContents.forEach(tab => {
            tab.style.display = 'none';
            tab.classList.remove('fade-in-up');
          });
          
          const activeTab = document.getElementById(`tab-${tabId}`);
          if (activeTab) {
            activeTab.style.display = 'block';
            if (config.getSetting('enableAnimations')) {
              activeTab.classList.add('fade-in-up');
            }
          }
          
          // Atualizar título com animação
          pageTitle.style.opacity = '0';
          setTimeout(() => {
            pageTitle.textContent = item.querySelector('span').textContent;
            pageTitle.style.opacity = '1';
          }, 150);
          
          // Carregar dados específicos da aba
          loadTabData(tabId);
        });
      });
    }

    // === SISTEMA DE SONS ===
    function playClickSound() {
      const audio = new AudioContext();
      const oscillator = audio.createOscillator();
      const gainNode = audio.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audio.destination);
      
      oscillator.frequency.value = 800;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0, audio.currentTime);
      gainNode.gain.linearRampToValueAtTime(0.1, audio.currentTime + 0.01);
      gainNode.gain.exponentialRampToValueAtTime(0.001, audio.currentTime + 0.1);
      
      oscillator.start(audio.currentTime);
      oscillator.stop(audio.currentTime + 0.1);
    }

    // === CARREGAMENTO DE DADOS INTELIGENTE ===
    function loadTabData(tabId) {
      switch(tabId) {
        case 'dashboard':
          loadDashboardStats();
          loadSystemStatus();
          loadRecentActivity();
          break;
        case 'analytics':
          // Analytics são carregados quando o botão é clicado
          break;
        case 'leads':
          // Leads são carregados quando o botão é clicado
          break;
      }
    }

    // === DASHBOARD AVANÇADO ===
    async function loadDashboardStats() {
      const statsElements = {
        totalMessages: document.getElementById('totalMessages'),
        activeChats: document.getElementById('activeChats'),
        totalLeads: document.getElementById('totalLeads'),
        conversionRate: document.getElementById('conversionRate')
      };

      // Animação de loading nos números
      Object.values(statsElements).forEach(el => {
        if (el) el.textContent = '⏳';
      });

      try {
        // Fetch analytics and leads data in parallel
        const [analyticsResponse, leadsResponse] = await Promise.all([
          fetch('/api/analytics/overview'),
          fetch('/api/leads')
        ]);

        const analyticsData = analyticsResponse.ok ? await analyticsResponse.json() : null;
        const leadsData = leadsResponse.ok ? await leadsResponse.json() : null;

        // Combine the data
        const combinedData = {
          conversations: analyticsData?.data?.conversations || { total_messages: 0, unique_contacts: 0 },
          leads: leadsData || []
        };

        // Store globally for other charts
        window.globalData = combinedData;

        animateNumbers(combinedData);
      } catch (error) {
        console.error('Erro ao carregar estatísticas:', error);
        // Fallback to minimal data
        const fallbackData = {
          conversations: { total_messages: 0, unique_contacts: 0 },
          leads: []
        };
        window.globalData = fallbackData;
        animateNumbers(fallbackData);
      }
    }

    function animateNumbers(data) {
      const stats = {
        totalMessages: data?.conversations?.total_messages || 0,
        activeChats: data?.conversations?.unique_contacts || 0,
        totalLeads: data?.leads?.length || 0,
        conversionRate: data?.leads?.length > 0 ? ((data?.conversations?.unique_contacts || 0) / data?.leads?.length * 100).toFixed(1) : 0
      };

      Object.entries(stats).forEach(([key, value], index) => {
        const element = document.getElementById(key);
        if (!element) return;

        setTimeout(() => {
          if (key === 'conversionRate') {
            animateNumber(element, 0, value, 1500, '%', 1);
          } else {
            animateNumber(element, 0, value, 1500);
          }
        }, index * 200);
      });

      // Update MQL/SQL ratio
      const mqlSqlElement = document.getElementById('mql-sql-ratio');
      if (mqlSqlElement && data?.leads) {
        const mql = Math.floor((data?.leads?.length || 0) * 0.4);
        const sql = Math.floor((data?.leads?.length || 0) * 0.2);
        setTimeout(() => {
          mqlSqlElement.textContent = `${mql} / ${sql}`;
        }, 4 * 200);
      }

      // Update all archetype statistics with real data
      const leadsCount = data?.leads?.length || 0;
      const conversionRateCalc = data?.conversations?.unique_contacts > 0 ?
        (leadsCount / data.conversations.unique_contacts * 100) : 0;

      // Distribute leads among archetypes (using simple distribution for now)
      const mastersLeads = Math.floor(leadsCount * 0.4);
      const sagersLeads = Math.floor(leadsCount * 0.3);
      const innovatorLeads = leadsCount - mastersLeads - sagersLeads;

      // Update archetype lead counts
      setTimeout(() => {
        const elements = {
          'masters-leads': mastersLeads,
          'sages-leads': sagersLeads,
          'innovator-leads': innovatorLeads,
          'masters-conversion': Math.min(conversionRateCalc, 100).toFixed(0) + '%',
          'sages-conversion': Math.min(conversionRateCalc * 0.8, 100).toFixed(0) + '%',
          'innovator-conversion': Math.min(conversionRateCalc * 0.9, 100).toFixed(0) + '%'
        };

        Object.entries(elements).forEach(([id, value]) => {
          const element = document.getElementById(id);
          if (element) element.textContent = value;
        });
      }, 5 * 200);

      // Update AI model metrics based on real data
      const totalMessages = data?.conversations?.total_messages || 0;
      setTimeout(() => {
        const aiMetrics = {
          'gpt-conversations-day': totalMessages,
          'gpt-avg-time': '1.2s', // Keep static for now
          'gpt-success-rate': totalMessages > 0 ? '95%' : '0%',
          'whisper-audios-day': Math.floor(totalMessages * 0.1), // Estimate 10% audio
          'whisper-accuracy': totalMessages > 0 ? '94%' : '0%',
          'whisper-proc-time': '2.8s', // Keep static for now
          'tts-audios-generated': Math.floor(totalMessages * 0.05), // Estimate 5% TTS
          'tts-satisfaction': totalMessages > 0 ? '4.7/5' : '0/5'
        };

        Object.entries(aiMetrics).forEach(([id, value]) => {
          const element = document.getElementById(id);
          if (element) element.textContent = value;
        });
      }, 6 * 200);

      // Update pipeline data
      setTimeout(() => {
        const pipelineElement = document.getElementById('pipeline-leads-captured');
        if (pipelineElement) pipelineElement.textContent = leadsCount;
      }, 7 * 200);
    }

    function animateNumber(element, start, end, duration, suffix = '', decimals = 0) {
      const startTime = Date.now();
      const range = end - start;

      function updateNumber() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Easing function (ease-out)
        const easedProgress = 1 - Math.pow(1 - progress, 3);
        const current = start + (range * easedProgress);
        
        element.textContent = current.toFixed(decimals) + suffix;

        if (progress < 1) {
          requestAnimationFrame(updateNumber);
        } else {
          element.textContent = end.toFixed(decimals) + suffix;
        }
      }

      updateNumber();
    }

    async function loadSystemStatus() {
      const statusElement = document.getElementById('systemStatus');
      
      try {
        // Simular verificação de múltiplos sistemas
        const systems = [
          { name: 'WhatsApp API', status: 'online', latency: '45ms' },
          { name: 'OpenAI GPT', status: 'online', latency: '120ms' },
          { name: 'Database', status: 'online', latency: '12ms' },
          { name: 'TTS Engine', status: 'online', latency: '89ms' }
        ];

        const statusHTML = systems.map(system => `
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding: 10px; background: var(--surface-glass); border-radius: var(--radius-md);">
            <div style="display: flex; align-items: center; gap: 8px;">
              <span class="status-dot status-${system.status}"></span>
              <span style="font-weight: 500;">${system.name}</span>
            </div>
            <span style="color: var(--text-muted); font-size: 12px;">${system.latency}</span>
          </div>
        `).join('');

        statusElement.innerHTML = statusHTML;
      } catch (error) {
        statusElement.innerHTML = '<p style="color: var(--error);">Erro ao carregar status do sistema</p>';
      }
    }

    async function loadRecentActivity() {
      const activityElement = document.getElementById('recentActivity');
      
      const activities = [
        { icon: 'fas fa-paper-plane', text: 'Mensagem enviada para +55 11 99999-9999', time: '2 min atrás', type: 'success' },
        { icon: 'fas fa-user-plus', text: 'Novo lead adicionado: João Silva', time: '5 min atrás', type: 'info' },
        { icon: 'fas fa-phone', text: 'Ligação inteligente realizada', time: '8 min atrás', type: 'primary' },
        { icon: 'fas fa-chart-line', text: 'Relatório de analytics gerado', time: '15 min atrás', type: 'warning' }
      ];

      const activityHTML = activities.map(activity => `
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px; background: var(--surface-glass); border-radius: var(--radius-md); transition: all var(--transition-normal);" class="interactive">
          <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--${activity.type}-color, var(--primary-color)); display: flex; align-items: center; justify-content: center; color: white;">
            <i class="${activity.icon}" style="font-size: 12px;"></i>
          </div>
          <div style="flex: 1;">
            <div style="font-weight: 500; margin-bottom: 4px;">${activity.text}</div>
            <div style="color: var(--text-muted); font-size: 12px;">${activity.time}</div>
          </div>
        </div>
      `).join('');

      activityElement.innerHTML = activityHTML;
    }

    // === CHAT APRIMORADO ===
    function initChat() {
      const chatInput = document.getElementById('chatInput');
      const sendButton = document.getElementById('sendMessage');
      const chatMessages = document.getElementById('chatMessages');

      // Auto-resize do textarea
      chatInput.addEventListener('input', () => {
        chatInput.style.height = 'auto';
        chatInput.style.height = chatInput.scrollHeight + 'px';
      });

      function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        // Som de envio
        if (config.getSetting('enableSounds')) {
          playClickSound();
        }

        // Indicador de digitação
        sendButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
        sendButton.disabled = true;

        // Adicionar mensagem do usuário
        addMessage(message, true);
        chatInput.value = '';
        chatInput.style.height = 'auto';

        // Simular typing indicator
        addTypingIndicator();

        // Enviar para o agente
        fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ user_message: message })
        })
        .then(response => response.json())
        .then(data => {
          removeTypingIndicator();
          addMessage(data.answer || 'Erro ao processar mensagem', false);
        })
        .catch(error => {
          console.error('Erro no chat:', error);
          removeTypingIndicator();
          addMessage('❌ Erro de conexão. Tente novamente.', false);
        })
        .finally(() => {
          sendButton.innerHTML = '<i class="fas fa-paper-plane"></i> Enviar';
          sendButton.disabled = false;
        });
      }

      function addMessage(text, isUser) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user' : ''}`;
        
        const timestamp = new Date().toLocaleTimeString('pt-BR', { 
          hour: '2-digit', 
          minute: '2-digit' 
        });
        
        messageDiv.innerHTML = `
          <div class="message-bubble">
            ${text}
            <div style="font-size: 11px; opacity: 0.7; margin-top: 6px;">
              ${timestamp}
            </div>
          </div>
        `;
        
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function addTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message typing-indicator';
        typingDiv.innerHTML = `
          <div class="message-bubble">
            <i class="fas fa-robot" style="margin-right: 6px;"></i>
            ORBION está digitando
            <div class="typing-dots">
              <span></span><span></span><span></span>
            </div>
          </div>
        `;
        
        // CSS para os pontos de digitação
        if (!document.querySelector('#typing-animation')) {
          const style = document.createElement('style');
          style.id = 'typing-animation';
          style.textContent = `
            .typing-dots { display: inline-block; margin-left: 8px; }
            .typing-dots span {
              display: inline-block;
              width: 4px;
              height: 4px;
              border-radius: 50%;
              background: currentColor;
              margin: 0 1px;
              animation: typing 1.4s infinite ease-in-out both;
            }
            .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
            .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
            @keyframes typing {
              0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
              40% { transform: scale(1); opacity: 1; }
            }
          `;
          document.head.appendChild(style);
        }
        
        chatMessages.appendChild(typingDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function removeTypingIndicator() {
        const indicator = chatMessages.querySelector('.typing-indicator');
        if (indicator) indicator.remove();
      }

      sendButton.addEventListener('click', sendMessage);
      chatInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
    }

    // === FUNÇÕES WHATSAPP APRIMORADAS ===
    async function checkWhatsAppStatus() {
      const statusElement = document.getElementById('whatsappStatus');
      statusElement.innerHTML = '<div class="loading">Verificando conexão...</div>';

      try {
        const response = await fetch('/api/whatsapp/status');
        const data = await response.json();
        
        const statusIcon = data.connected ? 'fa-check-circle' : 'fa-times-circle';
        const statusColor = data.connected ? 'var(--success)' : 'var(--error)';
        
        statusElement.innerHTML = `
          <div style="margin-top: 20px; padding: 20px; background: var(--surface-glass); border-radius: var(--radius-lg); border: 1px solid var(--border-glass);">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
              <i class="fas ${statusIcon}" style="color: ${statusColor}; font-size: 20px;"></i>
              <strong style="font-size: 16px;">Status: ${data.connected ? 'Conectado' : 'Desconectado'}</strong>
            </div>
            <div style="color: var(--text-muted); font-size: 14px;">
              <strong>Instância:</strong> ${data.instance || 'N/A'}<br>
              <strong>Última verificação:</strong> ${new Date().toLocaleString('pt-BR')}<br>
              <strong>Qualidade da conexão:</strong> ${data.connected ? 'Excelente' : 'Sem conexão'}
            </div>
          </div>
        `;
        
        if (config.getSetting('enableSounds') && data.connected) {
          playClickSound();
        }
      } catch (error) {
        console.error('Erro ao verificar status:', error);
        statusElement.innerHTML = `
          <div style="color: var(--error); margin-top: 20px; padding: 20px; background: rgba(239, 68, 68, 0.1); border-radius: var(--radius-lg); border: 1px solid var(--error);">
            <i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>
            Erro ao conectar com WhatsApp API
          </div>
        `;
      }
    }

    async function sendWhatsAppMessage() {
      const number = document.getElementById('whatsappNumber').value;
      const message = document.getElementById('whatsappMessage').value;
      
      if (!number || !message) {
        showNotification('⚠️ Preencha todos os campos', 'warning');
        return;
      }

      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
      button.disabled = true;

      try {
        const response = await fetch('/api/whatsapp/send', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ number, text: message })
        });

        if (response.ok) {
          showNotification('✅ Mensagem enviada com sucesso!', 'success');
          document.getElementById('whatsappMessage').value = '';
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
        } else {
          showNotification('❌ Erro ao enviar mensagem', 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    // === SISTEMA DE NOTIFICAÇÕES ===
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--surface-glass);
        backdrop-filter: var(--blur-lg);
        -webkit-backdrop-filter: var(--blur-lg);
        border: 1px solid var(--border-glass);
        border-radius: var(--radius-lg);
        padding: 16px 20px;
        color: var(--text-primary);
        font-weight: 500;
        z-index: 10000;
        transform: translateX(100%);
        transition: all var(--transition-normal);
        max-width: 400px;
        box-shadow: var(--shadow-premium);
      `;
      
      // Cor baseada no tipo
      const colors = {
        success: 'var(--success)',
        error: 'var(--error)',
        warning: 'var(--warning)',
        info: 'var(--info)'
      };
      
      notification.style.borderLeftColor = colors[type] || colors.info;
      notification.style.borderLeftWidth = '4px';
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      // Animar entrada
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remover após 4 segundos
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
      }, 4000);
    }

    // === OUTRAS FUNÇÕES APRIMORADAS ===
    async function loadLeads() {
      const query = document.getElementById('leadsSearch').value;
      const container = document.getElementById('leadsContainer');
      
      container.innerHTML = '<div class="loading">Carregando leads...</div>';
      
      try {
        const response = await fetch(`/api/leads?q=${encodeURIComponent(query)}`);
        const data = await response.json();
        
        if (data.items && data.items.length > 0) {
          container.innerHTML = data.items.map((lead, index) => `
            <div class="card interactive" style="margin-bottom: 16px; animation: fadeInUp 0.5s ease-out ${index * 0.1}s both;">
              <div style="display: flex; justify-content: between; align-items: start;">
                <div style="flex: 1;">
                  <h4 style="color: var(--text-primary); margin-bottom: 8px;">
                    <i class="fas fa-user" style="margin-right: 8px; color: var(--primary-color);"></i>
                    ${lead.name || 'Nome não informado'}
                  </h4>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 14px; color: var(--text-muted);">
                    <span><i class="fas fa-envelope" style="margin-right: 4px;"></i> ${lead.email || 'N/A'}</span>
                    <span><i class="fas fa-phone" style="margin-right: 4px;"></i> ${lead.phone || 'N/A'}</span>
                    <span><i class="fas fa-map-marker" style="margin-right: 4px;"></i> ${lead.city || 'N/A'}</span>
                    <span><i class="fas fa-flag" style="margin-right: 4px;"></i> ${lead.status || 'N/A'}</span>
                  </div>
                </div>
                <button class="btn btn-primary btn-small interactive" onclick="contactLead('${lead.phone}', '${lead.name}')">
                  <i class="fab fa-whatsapp"></i>
                  Contatar
                </button>
              </div>
            </div>
          `).join('');
        } else {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--text-muted);">
              <i class="fas fa-search" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
              <p>Nenhum lead encontrado.</p>
            </div>
          `;
        }
      } catch (error) {
        console.error('Erro ao carregar leads:', error);
        container.innerHTML = '<p style="color: var(--error);">❌ Erro ao carregar leads.</p>';
      }
    }

    async function loadAnalytics() {
      const container = document.getElementById('analyticsContainer');
      container.innerHTML = '<div class="loading">Carregando analytics...</div>';
      
      try {
        const response = await fetch('/api/analytics/overview');
        const data = await response.json();
        
        container.innerHTML = `
          <div class="grid grid-2">
            <div class="card fade-in-up">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-comments" style="margin-right: 8px; color: var(--primary-color);"></i>
                  Conversas
                </div>
              </div>
              <div style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">
                ${data.data?.conversations?.total_messages || 0} mensagens
              </div>
              <div style="color: var(--text-muted);">
                ${data.data?.conversations?.unique_contacts || 0} contatos únicos
              </div>
            </div>
            <div class="card fade-in-up" style="animation-delay: 0.1s;">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-clock" style="margin-right: 8px; color: var(--accent-color);"></i>
                  Última Atualização
                </div>
              </div>
              <div style="font-size: 16px; font-weight: 500;">
                ${new Date().toLocaleString('pt-BR')}
              </div>
            </div>
          </div>
        `;
      } catch (error) {
        console.error('Erro ao carregar analytics:', error);
        container.innerHTML = '<p style="color: var(--error);">❌ Erro ao carregar dados.</p>';
      }
    }

    // === FERRAMENTAS APRIMORADAS ===
    async function sendTTS() {
      const number = document.getElementById('audioNumber').value;
      const text = document.getElementById('audioText').value;
      const voice = document.getElementById('audioVoice').value;
      
      if (!number || !text) {
        showNotification('⚠️ Preencha todos os campos', 'warning');
        return;
      }

      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Gerando TTS...';
      button.disabled = true;

      try {
        const response = await fetch('/api/whatsapp/send-tts', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ number, text, voice })
        });

        if (response.ok) {
          showNotification('🎵 Áudio TTS gerado e enviado com sucesso!', 'success');
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
        } else {
          showNotification('❌ Erro ao gerar/enviar áudio', 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    async function makeIntelligentCall() {
      const identifier = document.getElementById('callIdentifier').value;
      const purpose = document.getElementById('callPurpose').value;
      
      if (!identifier) {
        showNotification('⚠️ Digite o identificador do lead', 'warning');
        return;
      }

      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-brain fa-spin"></i> Processando IA...';
      button.disabled = true;

      try {
        const response = await fetch('/api/whatsapp/call-lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ identifier, purpose })
        });

        const result = await response.json();
        if (response.ok) {
          showNotification('🤖 Ligação inteligente iniciada com sucesso!', 'success');
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
        } else {
          showNotification(`❌ Erro: ${result.error}`, 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    // === CONFIGURAÇÕES APRIMORADAS ===
    function initSettings() {
      // Carregar configurações salvas nos inputs
      document.getElementById('companyName').value = config.getSetting('companyName');
      document.getElementById('companyLogo').value = config.getSetting('companyLogo');
      document.getElementById('primaryColor').value = config.getSetting('primaryColor');
      document.getElementById('accentColor').value = config.getSetting('accentColor');
      document.getElementById('enableAnimations').checked = config.getSetting('enableAnimations');
      document.getElementById('enableSounds').checked = config.getSetting('enableSounds');
      document.getElementById('autoRefresh').checked = config.getSetting('autoRefresh');
      document.getElementById('glassmorphismMode').checked = config.getSetting('glassmorphismMode');
      
      // Aplicar configurações visuais
      applyBrandSettings();
      
      // Theme selector com animações
      const themeOptions = document.querySelectorAll('.theme-option');
      themeOptions.forEach(option => {
        option.addEventListener('click', () => {
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
          
          themeOptions.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          
          const theme = option.getAttribute('data-theme');
          config.updateSetting('theme', theme);
          
          // Feedback visual
          showNotification(`🎨 Tema ${theme === 'light' ? 'Claro' : theme === 'dark' ? 'Escuro' : 'Tech'} ativado!`, 'info');
        });
        
        if (option.getAttribute('data-theme') === config.getSetting('theme')) {
          option.classList.add('active');
        }
      });

      // Listeners para mudanças em tempo real
      document.getElementById('primaryColor').addEventListener('input', (e) => {
        config.updateSetting('primaryColor', e.target.value);
      });
      
      document.getElementById('accentColor').addEventListener('input', (e) => {
        config.updateSetting('accentColor', e.target.value);
      });
    }

    function applyBrandSettings() {
      const name = document.getElementById('companyName').value;
      const logo = document.getElementById('companyLogo').value;
      const primaryColor = document.getElementById('primaryColor').value;
      const accentColor = document.getElementById('accentColor').value;
      
      // Atualizar brand com animação
      const brandName = document.getElementById('brandName');
      const brandLogo = document.getElementById('brandLogo');
      
      if (config.getSetting('enableAnimations')) {
        brandName.style.transform = 'scale(0.9)';
        brandLogo.style.transform = 'scale(0.9)';
        
        setTimeout(() => {
          brandName.textContent = name;
          brandLogo.textContent = logo;
          document.title = `${name} • Dashboard Pro`;
          
          brandName.style.transform = 'scale(1)';
          brandLogo.style.transform = 'scale(1)';
        }, 150);
      } else {
        brandName.textContent = name;
        brandLogo.textContent = logo;
        document.title = `${name} • Dashboard Pro`;
      }
      
      // Atualizar configurações
      config.updateSetting('companyName', name);
      config.updateSetting('companyLogo', logo);
      config.updateSetting('primaryColor', primaryColor);
      config.updateSetting('accentColor', accentColor);
      
      showNotification('✨ Marca atualizada com sucesso!', 'success');
    }

    function saveSettings() {
      const settings = {
        enableAnimations: document.getElementById('enableAnimations').checked,
        enableSounds: document.getElementById('enableSounds').checked,
        autoRefresh: document.getElementById('autoRefresh').checked,
        glassmorphismMode: document.getElementById('glassmorphismMode').checked
      };
      
      Object.keys(settings).forEach(key => {
        config.updateSetting(key, settings[key]);
      });
      
      showNotification('💾 Configurações salvas com sucesso!', 'success');
      
      if (settings.enableSounds) {
        playClickSound();
      }
    }

    // === SIDEBAR TOGGLE ===
    function initSidebarToggle() {
      const toggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      
      toggle.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
        
        if (config.getSetting('enableSounds')) {
          playClickSound();
        }
      });
    }

    // === FUNÇÕES AUXILIARES ===
    function contactLead(phone, name) {
      if (!phone || phone === 'N/A') {
        showNotification('⚠️ Lead sem telefone cadastrado', 'warning');
        return;
      }
      
      document.getElementById('whatsappNumber').value = phone;
      document.getElementById('whatsappMessage').value = `Olá ${name || 'cliente'}! Sou da ${config.getSetting('companyName')} e gostaria de conversar com você sobre nossas soluções.`;
      
      // Trocar para aba WhatsApp
      document.querySelector('[data-tab="whatsapp"]').click();
      
      showNotification(`📱 Dados preenchidos para contato com ${name}`, 'info');
    }

    // === WHATSAPP FUNCIONALIDADES AVANÇADAS ===

    // Variáveis globais para WhatsApp
    let mediaRecorder = null;
    let audioBlob = null;
    let isRecording = false;
    let campaignInterval = null;
    let campaignRunning = false;

    // === GRAVAÇÃO DE ÁUDIO ===
    async function toggleAudioRecording() {
      const recordBtn = document.getElementById('recordAudioBtn');
      const recordText = document.getElementById('recordText');
      
      if (!isRecording) {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          mediaRecorder = new MediaRecorder(stream);
          
          const audioChunks = [];
          mediaRecorder.ondataavailable = (event) => {
            audioChunks.push(event.data);
          };
          
          mediaRecorder.onstop = () => {
            audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
            stream.getTracks().forEach(track => track.stop());
            showAudioPreview(audioBlob);
          };
          
          mediaRecorder.start();
          isRecording = true;
          
          recordBtn.classList.add('recording');
          recordText.textContent = 'Gravando...';
          
          if (config.getSetting('enableSounds')) {
            playClickSound();
          }
          
          showNotification('🎤 Gravação iniciada', 'info');
          
        } catch (error) {
          console.error('Erro ao acessar microfone:', error);
          showNotification('❌ Erro ao acessar microfone', 'error');
        }
      } else {
        mediaRecorder.stop();
        isRecording = false;
        
        recordBtn.classList.remove('recording');
        recordText.textContent = 'Gravar';
        
        showNotification('🎤 Gravação finalizada', 'success');
      }
    }

    // === PREVIEW DE ÁUDIO ===
    function showAudioPreview(blob, filename = '') {
      const previewDiv = document.getElementById('audioPreview');
      const sendBtn = document.getElementById('sendAudioBtn');
      
      const url = URL.createObjectURL(blob);
      
      previewDiv.innerHTML = `
        <div class="audio-preview">
          <audio controls>
            <source src="${url}" type="audio/wav">
          </audio>
          <div class="audio-info">
            <div>${filename || 'Áudio gravado'}</div>
            <div>${(blob.size / 1024).toFixed(1)}KB</div>
          </div>
          <button class="btn btn-ghost btn-small" onclick="clearAudioPreview()">
            <i class="fas fa-times"></i>
          </button>
        </div>
      `;
      
      previewDiv.style.display = 'block';
      sendBtn.disabled = false;
      
      audioBlob = blob;
    }

    function clearAudioPreview() {
      document.getElementById('audioPreview').style.display = 'none';
      document.getElementById('sendAudioBtn').disabled = true;
      audioBlob = null;
    }

    // === UPLOAD DE ARQUIVO DE ÁUDIO ===
    function handleAudioFile(input) {
      const file = input.files[0];
      if (!file) return;
      
      if (!file.type.startsWith('audio/')) {
        showNotification('⚠️ Por favor, selecione um arquivo de áudio', 'warning');
        return;
      }
      
      if (file.size > 10 * 1024 * 1024) { // 10MB limit
        showNotification('⚠️ Arquivo muito grande (máximo 10MB)', 'warning');
        return;
      }
      
      showAudioPreview(file, file.name);
      showNotification('📎 Arquivo de áudio carregado', 'success');
    }

    // === ENVIAR ÁUDIO WHATSAPP ===
    async function sendWhatsAppAudio() {
      const number = document.getElementById('audioWhatsappNumber').value;
      
      if (!number || !audioBlob) {
        showNotification('⚠️ Preencha o número e grave/selecione um áudio', 'warning');
        return;
      }
      
      const sendBtn = document.getElementById('sendAudioBtn');
      const originalText = sendBtn.innerHTML;
      sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando áudio...';
      sendBtn.disabled = true;
      
      try {
        const formData = new FormData();
        formData.append('number', number);
        formData.append('audio', audioBlob, 'audio.wav');
        
        const response = await fetch('/api/whatsapp/send-audio', {
          method: 'POST',
          body: formData
        });
        
        if (response.ok) {
          showNotification('🎵 Áudio enviado com sucesso!', 'success');
          clearAudioPreview();
          document.getElementById('audioWhatsappNumber').value = '';
          updateWhatsAppStats('audios');
        } else {
          showNotification('❌ Erro ao enviar áudio', 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        sendBtn.innerHTML = originalText;
        sendBtn.disabled = true;
      }
    }

    // === LIGAÇÃO PARA LEAD ALEATÓRIO ===
    async function callRandomLead() {
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Buscando lead...';
      button.disabled = true;
      
      try {
        const response = await fetch('/api/whatsapp/call-lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            identifier: 'random',
            purpose: 'prospecção comercial'
          })
        });
        
        const result = await response.json();
        if (response.ok) {
          showNotification('📞 Ligação para lead aleatório iniciada!', 'success');
          updateWhatsAppStats('calls');
        } else {
          showNotification(`❌ Erro: ${result.error}`, 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    // === LIGAÇÃO DIRETA ===
    async function makeDirectCall() {
      const number = prompt('Digite o número para ligação direta (com DDI):');
      if (!number) return;
      
      try {
        const response = await fetch('/api/whatsapp/virtual-call', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            number: number,
            message: 'Ligação direta do dashboard'
          })
        });
        
        if (response.ok) {
          showNotification('📞 Ligação direta iniciada!', 'success');
          updateWhatsAppStats('calls');
        } else {
          showNotification('❌ Erro ao iniciar ligação', 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      }
    }

    // === CHAMADA PERSONALIZADA ===
    async function makeCustomCall() {
      const numberOrLead = document.getElementById('customCallNumber').value;
      const script = document.getElementById('callScript').value;
      const customText = document.getElementById('customScriptText').value;
      
      if (!numberOrLead) {
        showNotification('⚠️ Informe o número ou nome do lead', 'warning');
        return;
      }
      
      if (script === 'custom' && !customText.trim()) {
        showNotification('⚠️ Descreva o script personalizado', 'warning');
        return;
      }
      
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Iniciando ligação...';
      button.disabled = true;
      
      const purpose = script === 'custom' ? customText : getScriptDescription(script);
      
      try {
        const response = await fetch('/api/whatsapp/call-lead', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            identifier: numberOrLead,
            purpose: purpose
          })
        });
        
        const result = await response.json();
        if (response.ok) {
          showNotification('🎯 Ligação personalizada iniciada!', 'success');
          updateWhatsAppStats('calls');
        } else {
          showNotification(`❌ Erro: ${result.error}`, 'error');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro de conexão', 'error');
      } finally {
        button.innerHTML = originalText;
        button.disabled = false;
      }
    }

    function getScriptDescription(script) {
      const scripts = {
        prospeccao: 'prospecção comercial inicial',
        followup: 'follow-up de proposta enviada',
        demo: 'agendamento de demonstração',
        cobranca: 'cobrança amigável',
        pesquisa: 'pesquisa de satisfação',
        reativacao: 'reativação de cliente inativo'
      };
      return scripts[script] || 'apresentação comercial';
    }

    // === CAMPANHAS AUTOMÁTICAS ===
    async function startCampaign() {
      const campaignType = document.getElementById('campaignType').value;
      const interval = parseInt(document.getElementById('campaignInterval').value) * 1000;
      
      if (campaignRunning) {
        showNotification('⚠️ Já existe uma campanha em execução', 'warning');
        return;
      }
      
      campaignRunning = true;
      document.getElementById('stopCampaignBtn').disabled = false;
      event.target.disabled = true;
      
      const statusDiv = document.getElementById('campaignStatus');
      statusDiv.style.display = 'block';
      statusDiv.className = 'campaign-active';
      
      try {
        const response = await fetch('/api/whatsapp/intelligent-campaign', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            type: campaignType,
            interval: interval / 1000
          })
        });
        
        if (response.ok) {
          showNotification('🚀 Campanha iniciada!', 'success');
          runCampaignProgress(campaignType, interval);
        } else {
          throw new Error('Falha ao iniciar campanha');
        }
      } catch (error) {
        console.error('Erro:', error);
        showNotification('❌ Erro ao iniciar campanha', 'error');
        stopCampaign();
      }
    }

    function runCampaignProgress(campaignType, interval) {
      const statusDiv = document.getElementById('campaignStatus');
      const maxCalls = getCampaignMaxCalls(campaignType);
      let currentCall = 0;
      
      statusDiv.innerHTML = `
        <div class="campaign-progress">
          <strong>Campanha Ativa</strong>
          <span>${currentCall}/${maxCalls} ligações</span>
        </div>
        <div class="campaign-bar">
          <div class="campaign-bar-fill" style="width: 0%"></div>
        </div>
        <div>Próxima ligação em ${interval/1000}s</div>
      `;
      
      campaignInterval = setInterval(() => {
        if (!campaignRunning || currentCall >= maxCalls) {
          stopCampaign();
          return;
        }
        
        currentCall++;
        const progress = (currentCall / maxCalls) * 100;
        
        statusDiv.innerHTML = `
          <div class="campaign-progress">
            <strong>Campanha Ativa</strong>
            <span>${currentCall}/${maxCalls} ligações</span>
          </div>
          <div class="campaign-bar">
            <div class="campaign-bar-fill" style="width: ${progress}%"></div>
          </div>
          <div>${currentCall < maxCalls ? `Próxima ligação em ${interval/1000}s` : 'Campanha finalizada'}</div>
        `;
        
        // Simular ligação
        updateWhatsAppStats('calls');
        
        if (currentCall >= maxCalls) {
          setTimeout(() => stopCampaign(), 2000);
        }
      }, interval);
    }

    function getCampaignMaxCalls(type) {
      const limits = {
        leads_frios: 5,
        leads_mornos: 3,
        followup_pendentes: 8,
        reativacao_clientes: 6,
        pesquisa_satisfacao: 10
      };
      return limits[type] || 5;
    }

    function stopCampaign() {
      campaignRunning = false;
      if (campaignInterval) {
        clearInterval(campaignInterval);
        campaignInterval = null;
      }
      
      document.getElementById('stopCampaignBtn').disabled = true;
      document.querySelector('button[onclick="startCampaign()"]').disabled = false;
      
      const statusDiv = document.getElementById('campaignStatus');
      statusDiv.style.display = 'none';
      
      showNotification('🏁 Campanha finalizada', 'success');
    }

    // === ATUALIZAR ESTATÍSTICAS WHATSAPP ===
    function updateWhatsAppStats(type) {
      const elements = {
        messages: document.getElementById('dailyMessages'),
        calls: document.getElementById('dailyCalls'),
        audios: document.getElementById('dailyAudios')
      };
      
      if (elements[type]) {
        const current = parseInt(elements[type].textContent) || 0;
        elements[type].textContent = current + 1;
      }
    }

    // === CARREGAR ESTATÍSTICAS WHATSAPP ===
    function loadWhatsAppStats() {
      // Simular dados para demonstração
      document.getElementById('dailyMessages').textContent = Math.floor(Math.random() * 50) + 20;
      document.getElementById('dailyCalls').textContent = Math.floor(Math.random() * 15) + 5;
      document.getElementById('dailyAudios').textContent = Math.floor(Math.random() * 10) + 2;
    }

    // === SCRIPT PERSONALIZADO TOGGLE ===
    function initWhatsAppTab() {
      const scriptSelect = document.getElementById('callScript');
      const customGroup = document.getElementById('customScriptGroup');
      
      scriptSelect.addEventListener('change', () => {
        if (scriptSelect.value === 'custom') {
          customGroup.style.display = 'block';
          customGroup.classList.add('script-conditional');
        } else {
          customGroup.style.display = 'none';
        }
      });
    }

    // === ANALYTICS AVANÇADO COM GRÁFICOS ===
    
    // Variáveis globais para gráficos
    let performanceChart = null;
    let leadsStatusChart = null;
    let weeklyActivityChart = null;
    let responseTimeChart = null;
    let trendsChart = null;

    // === INICIALIZAR GRÁFICOS ANALYTICS ===
    function initAnalyticsCharts() {
      if (typeof Chart === 'undefined') {
        setTimeout(initAnalyticsCharts, 500);
        return;
      }

      // Configuração padrão dos gráficos
      Chart.defaults.font.family = "'Manrope', 'Inter', sans-serif";
      Chart.defaults.font.size = 12;
      Chart.defaults.color = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary');

      initPerformanceChart();
      initLeadsStatusChart();
      initWeeklyActivityChart();
      initResponseTimeChart();
      initTrendsChart();
      loadAdditionalAnalytics();
    }

    function initPerformanceChart() {
      const ctx = document.getElementById('performanceChart').getContext('2d');
      const gradient = ctx.createLinearGradient(0, 0, 0, 300);
      gradient.addColorStop(0, 'rgba(59, 130, 246, 0.8)');
      gradient.addColorStop(1, 'rgba(59, 130, 246, 0.1)');

      performanceChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['00h', '04h', '08h', '12h', '16h', '20h'],
          datasets: [{
            label: 'Conversas Resolvidas',
            data: [12, 8, 25, 42, 38, 28],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: gradient,
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 2,
            pointRadius: 5
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return value + ' conversas';
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initLeadsStatusChart() {
      const ctx = document.getElementById('leadsStatusChart').getContext('2d');
      
      leadsStatusChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Novos', 'Ativos', 'Perdidos', 'Convertidos'],
          datasets: [{
            data: [35, 25, 15, 25],
            backgroundColor: [
              'rgb(59, 130, 246)',
              'rgb(239, 68, 68)', 
              'rgb(156, 163, 175)',
              'rgb(16, 185, 129)'
            ],
            borderWidth: 0,
            cutout: '65%'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 20,
                usePointStyle: true,
                pointStyle: 'circle'
              }
            }
          }
        }
      });
    }

    function initWeeklyActivityChart() {
      const ctx = document.getElementById('weeklyActivityChart').getContext('2d');
      
      weeklyActivityChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
          datasets: [{
            label: 'Mensagens',
            data: [120, 95, 87, 110, 98, 45, 32],
            backgroundColor: 'rgba(59, 130, 246, 0.8)',
            borderRadius: 6,
            maxBarThickness: 40
          }, {
            label: 'Ligações',
            data: [25, 18, 22, 28, 24, 12, 8],
            backgroundColor: 'rgba(16, 185, 129, 0.8)',
            borderRadius: 6,
            maxBarThickness: 40
          }, {
            label: 'Conversões',
            data: [8, 6, 7, 9, 8, 4, 2],
            backgroundColor: 'rgba(245, 158, 11, 0.8)',
            borderRadius: 6,
            maxBarThickness: 40
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                pointStyle: 'circle'
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initResponseTimeChart() {
      const ctx = document.getElementById('responseTimeChart').getContext('2d');
      
      responseTimeChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Madrugada', 'Manhã', 'Tarde', 'Noite'],
          datasets: [{
            label: 'Tempo Médio (segundos)',
            data: [2.1, 0.8, 1.2, 1.5],
            borderColor: 'rgb(245, 158, 11)',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(245, 158, 11)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 2,
            pointRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return value + 's';
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initTrendsChart() {
      const ctx = document.getElementById('trendsChart').getContext('2d');
      
      const last30Days = [];
      for (let i = 29; i >= 0; i--) {
        const date = new Date();
        date.setDate(date.getDate() - i);
        last30Days.push(date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' }));
      }

      trendsChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: last30Days,
          datasets: [{
            label: 'Conversas',
            data: Array.from({length: 30}, () => Math.floor(Math.random() * 50) + 20),
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.3,
            yAxisID: 'y'
          }, {
            label: 'Leads Gerados',
            data: Array.from({length: 30}, () => Math.floor(Math.random() * 15) + 5),
            borderColor: 'rgb(16, 185, 129)',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            borderWidth: 2,
            fill: true,
            tension: 0.3,
            yAxisID: 'y'
          }, {
            label: 'Taxa Conversão (%)',
            data: Array.from({length: 30}, () => Math.floor(Math.random() * 30) + 15),
            borderColor: 'rgb(245, 158, 11)',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            borderWidth: 2,
            fill: false,
            tension: 0.3,
            yAxisID: 'y1'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                pointStyle: 'circle'
              }
            }
          },
          scales: {
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              }
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              grid: {
                drawOnChartArea: false
              },
              ticks: {
                callback: function(value) {
                  return value + '%';
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function loadAdditionalAnalytics() {
      // Horários de Pico
      setTimeout(() => {
        document.getElementById('peakHoursContent').innerHTML = `
          <div style="padding: 16px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>09:00 - 11:00</span>
              <strong>42 conversas</strong>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>14:00 - 16:00</span>
              <strong>38 conversas</strong>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>19:00 - 21:00</span>
              <strong>28 conversas</strong>
            </div>
          </div>
        `;
      }, 1000);

      // Top Cidades
      setTimeout(() => {
        document.getElementById('topCitiesContent').innerHTML = `
          <div style="padding: 16px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>🏆 Natal</span>
              <strong>156 leads</strong>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>🥈 Mossoró</span>
              <strong>89 leads</strong>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
              <span>🥉 Parnamirim</span>
              <strong>72 leads</strong>
            </div>
          </div>
        `;
      }, 1200);

      // Qualidade IA
      setTimeout(() => {
        document.getElementById('aiQualityContent').innerHTML = `
          <div style="padding: 16px; text-align: center;">
            <div style="font-size: 32px; font-weight: 700; color: var(--success); margin-bottom: 8px;">9.2/10</div>
            <div style="color: var(--text-muted); margin-bottom: 12px;">Satisfação Média</div>
            <div style="font-size: 12px; color: var(--success);">
              <i class="fas fa-arrow-up"></i>
              +0.3 vs mês anterior
            </div>
          </div>
        `;
      }, 1400);
    }

    // === MAPA DE CALOR DO RIO GRANDE DO NORTE ===
    
    let leadsMap = null;
    let currentLeads = [];
    let currentPage = 1;
    const leadsPerPage = 10;

    function initLeadsHeatmap() {
      if (typeof L === 'undefined') {
        setTimeout(initLeadsHeatmap, 500);
        return;
      }

      // Coordenadas do Rio Grande do Norte
      const rnBounds = [
        [-7.3, -38.6], // Southwest
        [-4.8, -34.9]  // Northeast
      ];

      leadsMap = L.map('leadsHeatmap', {
        zoomControl: true,
        scrollWheelZoom: true,
        dragging: true
      }).fitBounds(rnBounds);

      // Tile layer cinza personalizado
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '© OpenStreetMap contributors © CARTO',
        subdomains: 'abcd',
        maxZoom: 12,
        minZoom: 6
      }).addTo(leadsMap);

      // Dados simulados de leads no RN
      const leadsData = generateRNLeadsData();
      addLeadsToMap(leadsData);
    }

    function generateRNLeadsData() {
      const cities = [
        { name: 'Natal', lat: -5.7945, lng: -35.211, leads: 156 },
        { name: 'Mossoró', lat: -5.1880, lng: -37.3441, leads: 89 },
        { name: 'Parnamirim', lat: -5.9153, lng: -35.2628, leads: 72 },
        { name: 'Caicó', lat: -6.4584, lng: -37.0982, leads: 45 },
        { name: 'Pau dos Ferros', lat: -6.1093, lng: -38.2052, leads: 34 },
        { name: 'Currais Novos', lat: -6.2608, lng: -36.5147, leads: 28 },
        { name: 'Santa Cruz', lat: -6.2266, lng: -36.0194, leads: 23 },
        { name: 'Açu', lat: -5.5776, lng: -36.9081, leads: 19 }
      ];

      const leadsData = [];
      
      cities.forEach(city => {
        // Gerar leads com diferentes status para cada cidade
        for (let i = 0; i < city.leads; i++) {
          const statusTypes = ['novo', 'ativo', 'perdido', 'convertido'];
          const statusWeights = [0.4, 0.3, 0.2, 0.1]; // Probabilidades
          
          const randomWeight = Math.random();
          let cumulativeWeight = 0;
          let status = 'novo';
          
          for (let j = 0; j < statusTypes.length; j++) {
            cumulativeWeight += statusWeights[j];
            if (randomWeight <= cumulativeWeight) {
              status = statusTypes[j];
              break;
            }
          }

          // Adicionar dispersão geográfica aleatória
          const latOffset = (Math.random() - 0.5) * 0.2;
          const lngOffset = (Math.random() - 0.5) * 0.2;

          leadsData.push({
            id: `lead_${city.name}_${i}`,
            name: `Lead ${i + 1}`,
            city: city.name,
            lat: city.lat + latOffset,
            lng: city.lng + lngOffset,
            status: status,
            created: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            phone: `84${Math.random().toString().substr(2, 8)}`,
            source: ['whatsapp', 'website', 'facebook', 'instagram'][Math.floor(Math.random() * 4)],
            score: Math.floor(Math.random() * 100)
          });
        }
      });

      return leadsData;
    }

    function addLeadsToMap(leadsData) {
      const statusColors = {
        ativo: '#ef4444',    // Vermelho
        novo: '#3b82f6',     // Azul  
        perdido: '#9ca3af',  // Cinza
        convertido: '#10b981' // Verde
      };

      leadsData.forEach(lead => {
        const color = statusColors[lead.status];
        const radius = lead.status === 'ativo' ? 8 : 6;
        const opacity = lead.status === 'perdido' ? 0.4 : 0.8;

        const circle = L.circleMarker([lead.lat, lead.lng], {
          color: color,
          fillColor: color,
          fillOpacity: opacity,
          radius: radius,
          stroke: true,
          weight: 2
        }).addTo(leadsMap);

        circle.bindPopup(`
          <div style="font-family: 'Manrope', sans-serif;">
            <strong>${lead.name}</strong><br>
            <small>📍 ${lead.city}</small><br>
            <small>📱 ${lead.phone}</small><br>
            <small>📊 Status: <span style="color: ${color}; font-weight: bold;">${lead.status}</span></small><br>
            <small>🎯 Score: ${lead.score}</small>
          </div>
        `);
      });

      currentLeads = leadsData;
    }

    // === FILTROS AVANÇADOS DE LEADS ===
    function applyLeadsFilters() {
      const filters = {
        search: document.getElementById('leadsSearch').value.toLowerCase(),
        status: document.getElementById('statusFilter').value,
        city: document.getElementById('cityFilter').value,
        dateFrom: document.getElementById('dateFrom').value,
        dateTo: document.getElementById('dateTo').value,
        source: document.getElementById('sourceFilter').value,
        score: document.getElementById('scoreFilter').value
      };

      let filteredLeads = currentLeads.filter(lead => {
        // Filtro de busca geral
        if (filters.search && !lead.name.toLowerCase().includes(filters.search) && 
            !lead.phone.includes(filters.search) && !lead.city.toLowerCase().includes(filters.search)) {
          return false;
        }

        // Filtro de status
        if (filters.status && lead.status !== filters.status) {
          return false;
        }

        // Filtro de cidade
        if (filters.city && lead.city.toLowerCase().replace(/\s/g, '-') !== filters.city) {
          return false;
        }

        // Filtro de data
        if (filters.dateFrom && lead.created < filters.dateFrom) {
          return false;
        }
        if (filters.dateTo && lead.created > filters.dateTo) {
          return false;
        }

        // Filtro de origem
        if (filters.source && lead.source !== filters.source) {
          return false;
        }

        // Filtro de score
        if (filters.score) {
          const scoreRanges = {
            hot: [90, 100],
            warm: [70, 89],
            cold: [50, 69],
            frozen: [0, 49]
          };
          const range = scoreRanges[filters.score];
          if (lead.score < range[0] || lead.score > range[1]) {
            return false;
          }
        }

        return true;
      });

      displayLeadsResults(filteredLeads);
      updateMapWithFilters(filteredLeads);
    }

    function clearLeadsFilters() {
      document.getElementById('leadsSearch').value = '';
      document.getElementById('statusFilter').value = '';
      document.getElementById('cityFilter').value = '';
      document.getElementById('dateFrom').value = '';
      document.getElementById('dateTo').value = '';
      document.getElementById('sourceFilter').value = '';
      document.getElementById('scoreFilter').value = '';
      
      displayLeadsResults(currentLeads);
      updateMapWithFilters(currentLeads);
    }

    function displayLeadsResults(leads) {
      const container = document.getElementById('leadsContainer');
      const countElement = document.getElementById('leadsResultCount');
      
      countElement.textContent = leads.length;
      
      if (leads.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 40px; color: var(--text-muted);">
            <i class="fas fa-search" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
            <p>Nenhum lead encontrado com os filtros aplicados.</p>
          </div>
        `;
        return;
      }

      // Paginação
      const startIndex = (currentPage - 1) * leadsPerPage;
      const endIndex = startIndex + leadsPerPage;
      const paginatedLeads = leads.slice(startIndex, endIndex);

      const leadsHTML = paginatedLeads.map(lead => {
        const avatar = lead.name.charAt(0).toUpperCase();
        const statusClass = `status-${lead.status}`;
        const sourceIcon = getSourceIcon(lead.source);

        return `
          <div class="lead-card-advanced">
            <div class="lead-avatar">${avatar}</div>
            <div class="lead-info">
              <div class="lead-name">${lead.name}</div>
              <div class="lead-details">
                <div class="lead-detail">
                  <i class="fas fa-phone" style="color: var(--primary-color);"></i>
                  ${lead.phone}
                </div>
                <div class="lead-detail">
                  <i class="fas fa-map-marker-alt" style="color: var(--accent-color);"></i>
                  ${lead.city}
                </div>
                <div class="lead-detail">
                  <i class="${sourceIcon}" style="color: var(--success);"></i>
                  ${lead.source}
                </div>
                <div class="lead-detail">
                  <i class="fas fa-calendar" style="color: var(--warning);"></i>
                  ${new Date(lead.created).toLocaleDateString('pt-BR')}
                </div>
                <div class="lead-detail">
                  <i class="fas fa-star" style="color: var(--info);"></i>
                  Score ${lead.score}
                </div>
              </div>
            </div>
            <div class="lead-actions">
              <button class="btn btn-primary btn-small" onclick="contactLead('${lead.phone}', '${lead.name}')">
                <i class="fab fa-whatsapp"></i>
                Contatar
              </button>
              <button class="btn btn-ghost btn-small" onclick="callLead('${lead.phone}', '${lead.name}')">
                <i class="fas fa-phone"></i>
                Ligar
              </button>
            </div>
            <div class="lead-status ${statusClass}">
              ${lead.status}
            </div>
          </div>
        `;
      }).join('');

      container.innerHTML = leadsHTML;
      
      // Gerar paginação
      generatePagination(leads.length);
    }

    function getSourceIcon(source) {
      const icons = {
        whatsapp: 'fab fa-whatsapp',
        website: 'fas fa-globe',
        facebook: 'fab fa-facebook',
        instagram: 'fab fa-instagram',
        indicacao: 'fas fa-user-friends'
      };
      return icons[source] || 'fas fa-question';
    }

    function generatePagination(totalLeads) {
      const totalPages = Math.ceil(totalLeads / leadsPerPage);
      const paginationContainer = document.getElementById('leadsPagination');
      
      if (totalPages <= 1) {
        paginationContainer.style.display = 'none';
        return;
      }

      paginationContainer.style.display = 'flex';
      
      let paginationHTML = '';
      
      // Botão anterior
      paginationHTML += `
        <button class="pagination-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
          <i class="fas fa-chevron-left"></i>
        </button>
      `;
      
      // Números das páginas
      for (let i = 1; i <= totalPages; i++) {
        if (i === currentPage || i <= 2 || i >= totalPages - 1 || (i >= currentPage - 1 && i <= currentPage + 1)) {
          paginationHTML += `
            <button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
              ${i}
            </button>
          `;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
          paginationHTML += '<span style="padding: 8px;">...</span>';
        }
      }
      
      // Botão próximo
      paginationHTML += `
        <button class="pagination-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
          <i class="fas fa-chevron-right"></i>
        </button>
      `;
      
      paginationContainer.innerHTML = paginationHTML;
    }

    function changePage(page) {
      if (page < 1) return;
      currentPage = page;
      applyLeadsFilters();
    }

    function updateMapWithFilters(filteredLeads) {
      // Remover todos os marcadores existentes
      leadsMap.eachLayer(layer => {
        if (layer instanceof L.CircleMarker) {
          leadsMap.removeLayer(layer);
        }
      });
      
      // Adicionar marcadores filtrados
      addLeadsToMap(filteredLeads);
    }

    function callLead(phone, name) {
      // Reutilizar função existente
      document.getElementById('customCallNumber').value = phone;
      document.querySelector('[data-tab="whatsapp"]').click();
      showNotification(`📞 Preparando ligação para ${name}`, 'info');
    }

    // === GRÁFICOS EXECUTIVOS === 
    
    // Variáveis globais para gráficos executivos
    let funnelChart = null;
    let monthlyPerformanceChart = null;
    let leadsSourceChart = null;
    let radarChart = null;

    // === INICIALIZAR GRÁFICOS EXECUTIVOS ===
    function initExecutiveCharts() {
      if (typeof Chart === 'undefined') {
        setTimeout(initExecutiveCharts, 500);
        return;
      }

      initFunnelChart();
      initMonthlyPerformanceChart();
      initLeadsSourceChart();
      initRadarChart();
    }

    function initFunnelChart() {
      const ctx = document.getElementById('funnelChart').getContext('2d');
      
      funnelChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Leads Gerados', 'MQL', 'SQL', 'Oportunidades', 'Fechamentos'],
          datasets: [{
            label: 'Quantidade',
            data: [globalData?.leads?.length || 0, Math.floor((globalData?.leads?.length || 0) * 0.4), Math.floor((globalData?.leads?.length || 0) * 0.2), Math.floor((globalData?.leads?.length || 0) * 0.1), Math.floor((globalData?.leads?.length || 0) * 0.02)],
            backgroundColor: [
              'rgba(59, 130, 246, 0.8)',
              'rgba(16, 185, 129, 0.8)',
              'rgba(245, 158, 11, 0.8)',
              'rgba(239, 68, 68, 0.8)',
              'rgba(139, 92, 246, 0.8)'
            ],
            borderColor: [
              'rgb(59, 130, 246)',
              'rgb(16, 185, 129)',
              'rgb(245, 158, 11)',
              'rgb(239, 68, 68)',
              'rgb(139, 92, 246)'
            ],
            borderWidth: 2,
            borderRadius: 8,
            maxBarThickness: 60
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                afterLabel: function(context) {
                  const rates = ['', '45% taxa conversão', '28% qualificação', '27% oportunização', '23% fechamento'];
                  return rates[context.dataIndex];
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return value.toLocaleString();
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initMonthlyPerformanceChart() {
      const ctx = document.getElementById('monthlyPerformanceChart').getContext('2d');
      
      monthlyPerformanceChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Ago', 'Set', 'Out', 'Nov', 'Dez', 'Jan'],
          datasets: [{
            label: 'Pipeline Gerado (R$ Mi)',
            data: [1.2, 1.5, 1.8, 2.1, 2.2, 2.45],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            yAxisID: 'y'
          }, {
            label: 'Meta (R$ Mi)',
            data: [1.0, 1.3, 1.6, 1.9, 2.0, 2.3],
            borderColor: 'rgb(156, 163, 175)',
            backgroundColor: 'transparent',
            borderWidth: 2,
            borderDash: [5, 5],
            fill: false,
            tension: 0.4,
            pointRadius: 4,
            yAxisID: 'y'
          }, {
            label: 'Taxa Conversão (%)',
            data: [18.2, 19.5, 21.3, 22.1, 22.8, 23.5],
            borderColor: 'rgb(16, 185, 129)',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(16, 185, 129)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            yAxisID: 'y1'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                pointStyle: 'circle'
              }
            }
          },
          scales: {
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return 'R$ ' + value.toFixed(1) + 'M';
                }
              }
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              grid: {
                drawOnChartArea: false
              },
              ticks: {
                callback: function(value) {
                  return value + '%';
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initLeadsSourceChart() {
      const ctx = document.getElementById('leadsSourceChart').getContext('2d');
      
      leadsSourceChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['LinkedIn Sales', 'E-mail Marketing', 'WhatsApp Business', 'Website Inbound', 'Referrals', 'Cold Calling'],
          datasets: [{
            data: [35, 25, 20, 12, 5, 3],
            backgroundColor: [
              'rgb(59, 130, 246)',
              'rgb(16, 185, 129)',
              'rgb(37, 211, 102)',
              'rgb(245, 158, 11)',
              'rgb(139, 92, 246)',
              'rgb(239, 68, 68)'
            ],
            borderWidth: 0,
            cutout: '60%'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
              labels: {
                padding: 20,
                usePointStyle: true,
                pointStyle: 'circle',
                generateLabels: function(chart) {
                  const data = chart.data;
                  return data.labels.map((label, i) => {
                    const value = data.datasets[0].data[i];
                    return {
                      text: `${label} (${value}%)`,
                      fillStyle: data.datasets[0].backgroundColor[i],
                      hidden: false,
                      index: i
                    };
                  });
                }
              }
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.label + ': ' + context.parsed + '%';
                }
              }
            }
          }
        }
      });
    }

    function initRadarChart() {
      const ctx = document.getElementById('radarChart').getContext('2d');
      
      radarChart = new Chart(ctx, {
        type: 'radar',
        data: {
          labels: ['Volume', 'Eficiência', 'Qualidade', 'Velocidade', 'Personalização', 'ROI'],
          datasets: [{
            label: 'IA SDR Atual',
            data: [95, 87, 92, 98, 89, 94],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.2)',
            borderWidth: 3,
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 2,
            pointRadius: 6
          }, {
            label: 'Benchmark Mercado',
            data: [65, 45, 58, 52, 38, 42],
            borderColor: 'rgb(156, 163, 175)',
            backgroundColor: 'rgba(156, 163, 175, 0.1)',
            borderWidth: 2,
            borderDash: [5, 5],
            pointBackgroundColor: 'rgb(156, 163, 175)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 2,
            pointRadius: 4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                pointStyle: 'circle'
              }
            }
          },
          scales: {
            r: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: 'rgba(148, 163, 184, 0.2)'
              },
              angleLines: {
                color: 'rgba(148, 163, 184, 0.2)'
              },
              pointLabels: {
                font: {
                  size: 12,
                  weight: 'bold'
                }
              }
            }
          }
        }
      });
    }

    // === GRÁFICOS PERFORMANCE DE PROSPECÇÃO ===
    
    // Variáveis globais para gráficos de prospecção
    let connectionRateChart = null;
    let responseRateChart = null;
    let activityTrendChart = null;
    
    // Inicializar todos os gráficos da aba Performance
    function initProspectingCharts() {
      if (typeof Chart === 'undefined') {
        setTimeout(initProspectingCharts, 500);
        return;
      }
      
      initConnectionRateChart();
      initResponseRateChart();
      initActivityTrendChart();
      initTimingHeatmap();
    }

    function initConnectionRateChart() {
      const ctx = document.getElementById('connectionRateChart').getContext('2d');
      
      connectionRateChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Telefone', 'E-mail', 'LinkedIn', 'WhatsApp'],
          datasets: [{
            data: [32, 18, 68, 42],
            backgroundColor: [
              'rgba(59, 130, 246, 0.8)',
              'rgba(16, 185, 129, 0.8)', 
              'rgba(245, 158, 11, 0.8)',
              'rgba(139, 92, 246, 0.8)'
            ],
            borderColor: [
              'rgb(59, 130, 246)',
              'rgb(16, 185, 129)',
              'rgb(245, 158, 11)',
              'rgb(139, 92, 246)'
            ],
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 20,
                usePointStyle: true,
                font: {
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.label + ': ' + context.parsed + '% taxa de conexão';
                }
              }
            }
          }
        }
      });
    }

    function initResponseRateChart() {
      const ctx = document.getElementById('responseRateChart').getContext('2d');
      
      responseRateChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Telefone', 'E-mail', 'LinkedIn', 'WhatsApp'],
          datasets: [{
            label: 'Taxa de Resposta (%)',
            data: [15, 8, 45, 42],
            backgroundColor: [
              'rgba(59, 130, 246, 0.8)',
              'rgba(16, 185, 129, 0.8)',
              'rgba(245, 158, 11, 0.8)',
              'rgba(139, 92, 246, 0.8)'
            ],
            borderColor: [
              'rgb(59, 130, 246)',
              'rgb(16, 185, 129)',
              'rgb(245, 158, 11)',
              'rgb(139, 92, 246)'
            ],
            borderWidth: 2,
            borderRadius: 8,
            maxBarThickness: 50
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.parsed.y + '% de taxa de resposta';
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 70,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return value + '%';
                }
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    function initActivityTrendChart() {
      const ctx = document.getElementById('activityTrendChart').getContext('2d');
      
      const months = ['Set', 'Out', 'Nov', 'Dez', 'Jan'];
      
      activityTrendChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: months,
          datasets: [{
            label: 'Chamadas',
            data: [2100, 2350, 2480, 2650, 2847],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6
          }, {
            label: 'E-mails',
            data: [4200, 4600, 4850, 5100, 5234],
            borderColor: 'rgb(16, 185, 129)',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(16, 185, 129)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6
          }, {
            label: 'LinkedIn',
            data: [180, 220, 280, 340, 387],
            borderColor: 'rgb(245, 158, 11)',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(245, 158, 11)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6
          }, {
            label: 'WhatsApp',
            data: [800, 950, 1100, 1300, 1456],
            borderColor: 'rgb(139, 92, 246)',
            backgroundColor: 'rgba(139, 92, 246, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: 'rgb(139, 92, 246)',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                padding: 20,
                usePointStyle: true,
                font: {
                  size: 12,
                  weight: 'bold'
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              },
              ticks: {
                callback: function(value) {
                  return value.toLocaleString();
                }
              }
            },
            x: {
              grid: {
                color: 'rgba(148, 163, 184, 0.1)'
              }
            }
          }
        }
      });
    }

    function initTimingHeatmap() {
      const heatmapContainer = document.getElementById('timingHeatmap');
      if (!heatmapContainer) return;
      
      // Dados simulados de performance por hora (0-23)
      const hourlyPerformance = [
        12, 8, 5, 3, 2, 4, 8, 15, 25, 35, 45, 52,  // 0-11
        58, 67, 75, 68, 62, 55, 48, 40, 32, 25, 18, 15  // 12-23
      ];
      
      heatmapContainer.innerHTML = '';
      
      hourlyPerformance.forEach((performance, hour) => {
        const cell = document.createElement('div');
        cell.className = 'heatmap-cell';
        cell.textContent = hour.toString().padStart(2, '0');
        
        // Definir cor baseada na performance
        let color, bgColor;
        if (performance >= 60) {
          color = '#ffffff';
          bgColor = '#ef4444'; // Alta performance - vermelho
        } else if (performance >= 30) {
          color = '#ffffff';
          bgColor = '#f59e0b'; // Média performance - amarelo
        } else {
          color = '#ffffff';
          bgColor = '#6b7280'; // Baixa performance - cinza
        }
        
        cell.style.backgroundColor = bgColor;
        cell.style.color = color;
        cell.title = `${hour}h: ${performance}% de performance`;
        
        heatmapContainer.appendChild(cell);
      });
    }
    
    // Função para alterar período do gráfico de tendências
    function setTrendPeriod(period) {
      // Remover active de todos os botões
      document.querySelectorAll('.chart-control-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Adicionar active ao botão clicado
      event.target.classList.add('active');
      
      // Atualizar dados baseado no período
      let newData;
      const months = period === '3m' ? ['Nov', 'Dez', 'Jan'] :
                   period === '6m' ? ['Ago', 'Set', 'Out', 'Nov', 'Dez', 'Jan'] :
                   ['Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez', 'Jan'];
      
      if (period === '3m') {
        newData = {
          calls: [2480, 2650, 2847],
          emails: [4850, 5100, 5234],
          linkedin: [280, 340, 387],
          whatsapp: [1100, 1300, 1456]
        };
      } else if (period === '6m') {
        newData = {
          calls: [1800, 2100, 2350, 2480, 2650, 2847],
          emails: [3800, 4200, 4600, 4850, 5100, 5234],
          linkedin: [120, 180, 220, 280, 340, 387],
          whatsapp: [600, 800, 950, 1100, 1300, 1456]
        };
      } else { // 12m
        newData = {
          calls: [1200, 1400, 1550, 1650, 1750, 1800, 1850, 2100, 2350, 2480, 2650, 2847],
          emails: [2400, 2800, 3100, 3400, 3600, 3800, 4000, 4200, 4600, 4850, 5100, 5234],
          linkedin: [50, 70, 85, 95, 110, 120, 140, 180, 220, 280, 340, 387],
          whatsapp: [200, 300, 350, 420, 480, 600, 700, 800, 950, 1100, 1300, 1456]
        };
      }
      
      // Atualizar o gráfico
      if (activityTrendChart) {
        activityTrendChart.data.labels = months;
        activityTrendChart.data.datasets[0].data = newData.calls;
        activityTrendChart.data.datasets[1].data = newData.emails;
        activityTrendChart.data.datasets[2].data = newData.linkedin;
        activityTrendChart.data.datasets[3].data = newData.whatsapp;
        activityTrendChart.update();
      }
    }

    // === FUNÇÕES AVANÇADAS DE PERSONALIZAÇÃO ===
    
    // Sistema de upload de logo
    function initLogoUpload() {
      const logoFile = document.getElementById('logoFile');
      const logoPreview = document.getElementById('logoPreview');
      
      if (logoFile) {
        logoFile.addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
              const img = document.createElement('img');
              img.src = e.target.result;
              img.style.width = '100%';
              img.style.height = '100%';
              img.style.objectFit = 'cover';
              img.style.borderRadius = '20px';
              
              logoPreview.innerHTML = '';
              logoPreview.appendChild(img);
              
              // Salvar no localStorage
              localStorage.setItem('orbion-logo', e.target.result);
              
              // Aplicar logo no header
              updateHeaderLogo(e.target.result);
              
              showNotification('✅ Logo atualizada com sucesso!', 'success');
            };
            reader.readAsDataURL(file);
          }
        });
      }
    }

    // Atualizar logo no header
    function updateHeaderLogo(logoUrl) {
      const headerLogo = document.querySelector('.company-logo');
      if (headerLogo && logoUrl) {
        headerLogo.innerHTML = `<img src="${logoUrl}" alt="Logo" style="width: 40px; height: 40px; border-radius: 8px; object-fit: cover;">`;
      }
    }

    // Sistema avançado de cores
    function initColorSystem() {
      // Sincronizar color input com text input
      const colorInputs = document.querySelectorAll('.color-input');
      const colorTexts = document.querySelectorAll('.color-text');
      
      colorInputs.forEach((input, index) => {
        const textInput = colorTexts[index];
        if (textInput) {
          input.addEventListener('input', function() {
            textInput.value = this.value.toUpperCase();
            updateRealTimeColors();
          });
          
          textInput.addEventListener('input', function() {
            if (this.value.match(/^#[0-9A-Fa-f]{6}$/)) {
              input.value = this.value;
              updateRealTimeColors();
            }
          });
        }
      });

      // Presets de cores
      const presets = document.querySelectorAll('.color-preset');
      presets.forEach(preset => {
        preset.addEventListener('click', function() {
          presets.forEach(p => p.classList.remove('active'));
          this.classList.add('active');
          
          const presetType = this.dataset.preset;
          applyColorPreset(presetType);
        });
      });
    }

    // Aplicar preset de cores
    function applyColorPreset(preset) {
      const presets = {
        corporate: {
          primary: '#0066cc',
          secondary: '#06b6d4',
          success: '#10b981',
          warning: '#f59e0b'
        },
        financial: {
          primary: '#059669',
          secondary: '#0891b2',
          success: '#84cc16',
          warning: '#eab308'
        },
        tech: {
          primary: '#7c3aed',
          secondary: '#06b6d4',
          success: '#10b981',
          warning: '#f59e0b'
        },
        luxury: {
          primary: '#1f2937',
          secondary: '#d97706',
          success: '#059669',
          warning: '#dc2626'
        }
      };

      const colors = presets[preset];
      if (colors) {
        document.getElementById('primaryColor').value = colors.primary;
        document.getElementById('primaryColorText').value = colors.primary;
        document.getElementById('secondaryColor').value = colors.secondary;
        document.getElementById('secondaryColorText').value = colors.secondary;
        document.getElementById('successColor').value = colors.success;
        document.getElementById('successColorText').value = colors.success;
        document.getElementById('warningColor').value = colors.warning;
        document.getElementById('warningColorText').value = colors.warning;
        
        updateRealTimeColors();
        showNotification(`🎨 Paleta ${preset} aplicada!`, 'success');
      }
    }

    // Atualizar cores em tempo real
    function updateRealTimeColors() {
      const primary = document.getElementById('primaryColor')?.value || '#0066cc';
      const secondary = document.getElementById('secondaryColor')?.value || '#06b6d4';
      const success = document.getElementById('successColor')?.value || '#10b981';
      const warning = document.getElementById('warningColor')?.value || '#f59e0b';

      document.documentElement.style.setProperty('--primary-color', primary);
      document.documentElement.style.setProperty('--accent-color', secondary);
      document.documentElement.style.setProperty('--success', success);
      document.documentElement.style.setProperty('--warning', warning);
    }

    // Sistema de temas
    function initThemeSystem() {
      const themeCards = document.querySelectorAll('.theme-card');
      themeCards.forEach(card => {
        card.addEventListener('click', function() {
          themeCards.forEach(c => c.classList.remove('active'));
          this.classList.add('active');
          
          const theme = this.dataset.theme;
          applyTheme(theme);
        });
      });
    }

    // Aplicar tema
    function applyTheme(theme) {
      const body = document.body;
      const themes = ['light-pro', 'dark-executive', 'gradient', 'glassmorphism', 'minimal', 'high-contrast'];
      
      // Remover temas anteriores
      themes.forEach(t => body.classList.remove(`theme-${t}`));
      
      // Aplicar novo tema
      body.classList.add(`theme-${theme}`);
      
      // Salvar preferência
      localStorage.setItem('orbion-theme', theme);
      
      showNotification(`✨ Tema ${theme} aplicado!`, 'success');
    }

    // Sistema de fundos
    function initBackgroundSystem() {
      // Seletores de tipo de fundo
      const bgTypeBtns = document.querySelectorAll('.bg-type-btn');
      bgTypeBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          bgTypeBtns.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          const type = this.dataset.type;
          toggleBackgroundType(type);
        });
      });

      // Gradientes
      const gradientOptions = document.querySelectorAll('.gradient-option');
      gradientOptions.forEach(option => {
        option.addEventListener('click', function() {
          const gradient = this.dataset.gradient;
          applyBackgroundGradient(gradient);
        });
      });

      // Upload de imagem de fundo
      const backgroundImage = document.getElementById('backgroundImage');
      if (backgroundImage) {
        backgroundImage.addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
              applyBackgroundImage(e.target.result);
            };
            reader.readAsDataURL(file);
          }
        });
      }

      // Controles de opacidade e posição
      const opacityRange = document.getElementById('backgroundOpacity');
      const opacityValue = document.getElementById('opacityValue');
      if (opacityRange && opacityValue) {
        opacityRange.addEventListener('input', function() {
          opacityValue.textContent = this.value + '%';
          updateBackgroundOpacity(this.value);
        });
      }
    }

    function toggleBackgroundType(type) {
      const gradientOptions = document.getElementById('gradientOptions');
      const imageUploadSection = document.getElementById('imageUploadSection');
      
      // Ocultar todas as seções
      if (gradientOptions) gradientOptions.style.display = 'none';
      if (imageUploadSection) imageUploadSection.style.display = 'none';
      
      // Mostrar seção apropriada
      if (type === 'gradient' && gradientOptions) {
        gradientOptions.style.display = 'grid';
      } else if (type === 'image' && imageUploadSection) {
        imageUploadSection.style.display = 'block';
      } else if (type === 'none') {
        document.body.style.background = '';
      }
    }

    function applyBackgroundGradient(gradient) {
      document.body.style.background = gradient;
      localStorage.setItem('orbion-background', gradient);
      showNotification('🌈 Fundo gradiente aplicado!', 'success');
    }

    function applyBackgroundImage(imageUrl) {
      const opacity = document.getElementById('backgroundOpacity')?.value || 20;
      const position = document.getElementById('backgroundPosition')?.value || 'center';
      const size = document.getElementById('backgroundSize')?.value || 'cover';
      
      document.body.style.background = `linear-gradient(rgba(0,0,0,${(100-opacity)/100}), rgba(0,0,0,${(100-opacity)/100})), url('${imageUrl}')`;
      document.body.style.backgroundPosition = position;
      document.body.style.backgroundSize = size;
      document.body.style.backgroundAttachment = 'fixed';
      
      localStorage.setItem('orbion-background-image', imageUrl);
      localStorage.setItem('orbion-background-opacity', opacity);
      
      showNotification('🖼️ Imagem de fundo aplicada!', 'success');
    }

    function updateBackgroundOpacity(opacity) {
      const savedImage = localStorage.getItem('orbion-background-image');
      if (savedImage) {
        document.body.style.background = `linear-gradient(rgba(0,0,0,${(100-opacity)/100}), rgba(0,0,0,${(100-opacity)/100})), url('${savedImage}')`;
      }
    }

    // Aplicar todas as configurações
    function applyAllSettings() {
      // Aplicar cores
      updateRealTimeColors();
      
      // Aplicar nome da empresa
      const companyName = document.getElementById('companyName')?.value || 'ORBION';
      const companyTagline = document.getElementById('companyTagline')?.value || '';
      
      // Atualizar header
      const headerTitle = document.querySelector('.header-title');
      if (headerTitle) {
        headerTitle.innerHTML = `
          <h1>${companyName}</h1>
          ${companyTagline ? `<p>${companyTagline}</p>` : ''}
        `;
      }
      
      // Salvar todas as configurações
      const settings = {
        companyName: companyName,
        companyTagline: companyTagline,
        primaryColor: document.getElementById('primaryColor')?.value,
        secondaryColor: document.getElementById('secondaryColor')?.value,
        successColor: document.getElementById('successColor')?.value,
        warningColor: document.getElementById('warningColor')?.value,
        theme: document.querySelector('.theme-card.active')?.dataset.theme,
        enableAnimations: document.getElementById('enableAnimations')?.checked,
        enableParticles: document.getElementById('enableParticles')?.checked,
        enableGlassmorphism: document.getElementById('enableGlassmorphism')?.checked,
        enableSounds: document.getElementById('enableSounds')?.checked,
        autoRefresh: document.getElementById('autoRefresh')?.checked
      };
      
      localStorage.setItem('orbion-advanced-settings', JSON.stringify(settings));
      
      showNotification('⚡ Todas as configurações aplicadas com sucesso!', 'success');
    }

    // Resetar para padrões
    function resetToDefaults() {
      if (confirm('🔄 Tem certeza que deseja resetar todas as configurações? Esta ação não pode ser desfeita.')) {
        localStorage.clear();
        location.reload();
      }
    }

    // Exportar configurações
    function exportSettings() {
      const settings = {
        version: '2.0',
        timestamp: new Date().toISOString(),
        settings: JSON.parse(localStorage.getItem('orbion-advanced-settings') || '{}'),
        logo: localStorage.getItem('orbion-logo'),
        background: localStorage.getItem('orbion-background'),
        backgroundImage: localStorage.getItem('orbion-background-image'),
        theme: localStorage.getItem('orbion-theme')
      };
      
      const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `orbion-config-${new Date().toISOString().slice(0,10)}.json`;
      a.click();
      URL.revokeObjectURL(url);
      
      showNotification('📁 Configuração exportada com sucesso!', 'success');
    }

    // Carregar configurações salvas
    function loadSavedSettings() {
      const settings = JSON.parse(localStorage.getItem('orbion-advanced-settings') || '{}');
      const logo = localStorage.getItem('orbion-logo');
      const theme = localStorage.getItem('orbion-theme');
      const background = localStorage.getItem('orbion-background');
      
      // Aplicar configurações salvas
      if (settings.companyName) {
        const input = document.getElementById('companyName');
        if (input) input.value = settings.companyName;
      }
      
      if (settings.companyTagline) {
        const input = document.getElementById('companyTagline');
        if (input) input.value = settings.companyTagline;
      }
      
      if (settings.primaryColor) {
        const input = document.getElementById('primaryColor');
        const text = document.getElementById('primaryColorText');
        if (input) input.value = settings.primaryColor;
        if (text) text.value = settings.primaryColor;
      }
      
      if (logo) {
        updateHeaderLogo(logo);
        const preview = document.getElementById('logoPreview');
        if (preview) {
          const img = document.createElement('img');
          img.src = logo;
          img.style.width = '100%';
          img.style.height = '100%';
          img.style.objectFit = 'cover';
          img.style.borderRadius = '20px';
          preview.innerHTML = '';
          preview.appendChild(img);
        }
      }
      
      if (theme) {
        const themeCard = document.querySelector(`[data-theme="${theme}"]`);
        if (themeCard) {
          document.querySelectorAll('.theme-card').forEach(c => c.classList.remove('active'));
          themeCard.classList.add('active');
          applyTheme(theme);
        }
      }
      
      if (background) {
        document.body.style.background = background;
      }
      
      // Aplicar cores
      updateRealTimeColors();
    }

    // === OVERRIDE DA FUNÇÃO loadTabData ===
    const originalLoadTabData = loadTabData;
    loadTabData = function(tabId) {
      originalLoadTabData(tabId);
      
      if (tabId === 'whatsapp') {
        loadWhatsAppStats();
      } else if (tabId === 'analytics') {
        initAnalyticsCharts();
      } else if (tabId === 'advanced-analytics') {
        initAnalyticsCharts();
      } else if (tabId === 'funnel') {
        initFunnelTab();
      } else if (tabId === 'branding') {
        initBrandingTab();
      } else if (tabId === 'leads') {
        initLeadsHeatmap();
        if (currentLeads.length > 0) {
          displayLeadsResults(currentLeads);
        }
      } else if (tabId === 'overview') {
        initExecutiveCharts();
      } else if (tabId === 'prospecting') {
        initProspectingCharts();
      } else if (tabId === 'settings') {
        // Inicializar sistemas de personalização
        setTimeout(() => {
          initLogoUpload();
          initColorSystem();
          initThemeSystem();
          initBackgroundSystem();
          loadSavedSettings();
        }, 100);
      } else if (tabId === 'chat') {
        // Inicializar sistema de chat
        setTimeout(() => {
          initChatSystem();
          loadChatHistory();
        }, 100);
      }
    };

    // === SISTEMA DE CHAT AVANÇADO ===
    let chatHistory = [];
    let currentConversationId = null;
    let isTyping = false;

    function initChatSystem() {
      const chatInput = document.getElementById('chatInput');
      const sendBtn = document.getElementById('sendMessage');
      const characterCount = document.getElementById('characterCount');
      
      if (chatInput) {
        // Auto-resize do textarea
        chatInput.addEventListener('input', function() {
          this.style.height = 'auto';
          this.style.height = this.scrollHeight + 'px';
          
          // Atualizar contador de caracteres
          if (characterCount) {
            characterCount.textContent = `${this.value.length}/1000`;
          }
          
          // Habilitar/desabilitar botão de envio
          if (sendBtn) {
            sendBtn.style.opacity = this.value.trim() ? '1' : '0.5';
          }
        });

        // Enviar com Enter (Ctrl+Enter para nova linha)
        chatInput.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' && !e.ctrlKey && !e.shiftKey) {
            e.preventDefault();
            sendChatMessage();
          }
        });
      }
    }

    function sendChatMessage() {
      const chatInput = document.getElementById('chatInput');
      const message = chatInput?.value.trim();
      
      if (!message) return;
      
      // Adicionar mensagem do usuário
      addChatMessage(message, 'user');
      chatInput.value = '';
      chatInput.style.height = 'auto';
      
      // Atualizar contador
      const characterCount = document.getElementById('characterCount');
      if (characterCount) characterCount.textContent = '0/1000';
      
      // Mostrar indicador de digitação
      showTypingIndicator();
      
      // Simular resposta da IA (conectar com API real posteriormente)
      setTimeout(() => {
        hideTypingIndicator();
        const aiResponse = generateAIResponse(message);
        addChatMessage(aiResponse, 'ai');
      }, 2000);
    }

    function sendQuickMessage(message) {
      const chatInput = document.getElementById('chatInput');
      if (chatInput) {
        chatInput.value = message;
        sendChatMessage();
      }
    }

    function addChatMessage(message, sender) {
      const chatMessages = document.getElementById('chatMessages');
      if (!chatMessages) return;
      
      const messageId = Date.now();
      const timestamp = new Date().toLocaleTimeString('pt-BR', { 
        hour: '2-digit', 
        minute: '2-digit' 
      });
      
      const messageElement = document.createElement('div');
      messageElement.className = `message ${sender}-message`;
      messageElement.innerHTML = `
        <div class="message-avatar">
          <i class="fas fa-${sender === 'ai' ? 'robot' : 'user'}"></i>
        </div>
        <div class="message-content">
          <div class="message-bubble">
            <div class="message-text">${formatMessage(message)}</div>
            <div class="message-time">${timestamp}</div>
          </div>
        </div>
      `;
      
      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Salvar no histórico
      chatHistory.push({
        id: messageId,
        message: message,
        sender: sender,
        timestamp: Date.now()
      });
      
      saveChatHistory();
    }

    function formatMessage(message) {
      // Converter links em clickables
      const linkRegex = /(https?:\/\/[^\s]+)/g;
      message = message.replace(linkRegex, '<a href="$1" target="_blank">$1</a>');
      
      // Converter quebras de linha
      message = message.replace(/\n/g, '<br>');
      
      return message;
    }

    function showTypingIndicator() {
      const typingIndicator = document.getElementById('typingIndicator');
      if (typingIndicator) {
        typingIndicator.style.display = 'flex';
        isTyping = true;
        
        // Scroll para mostrar o indicador
        const chatMessages = document.getElementById('chatMessages');
        setTimeout(() => {
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 100);
      }
    }

    function hideTypingIndicator() {
      const typingIndicator = document.getElementById('typingIndicator');
      if (typingIndicator) {
        typingIndicator.style.display = 'none';
        isTyping = false;
      }
    }

    function generateAIResponse(userMessage) {
      // Respostas inteligentes baseadas na mensagem do usuário
      const responses = {
        pipeline: "📊 **Análise de Pipeline Personalizada**\n\nBaseado nos dados atuais, seu pipeline está performando bem! Aqui estão os insights:\n\n• **Taxa de conversão atual**: 23.5% (acima da média)\n• **Leads qualificados**: 342 oportunidades ativas\n• **Recomendação**: Foque nos leads com score 90+ nos próximos 3 dias\n\n**Próximos passos sugeridos:**\n1. Revisar leads não contatados há 48h\n2. Implementar follow-up automatizado\n3. Criar cadência específica para leads frios",
        
        whatsapp: "💬 **Templates de WhatsApp Otimizados**\n\nAqui estão scripts personalizados baseados no seu segmento:\n\n**Template Abertura (B2B):**\n*\"Olá [Nome]! Vi que sua empresa [Empresa] está crescendo muito. Temos ajudado empresas similares a aumentar vendas em 40% com nossa solução de IA. Posso compartilhar um case rápido com você?\"*\n\n**Template Follow-up:**\n*\"Oi [Nome], enviei uma proposta personalizada baseada em nossa conversa. O ROI projetado para [Empresa] é de R$ 45k no primeiro trimestre. Quando podemos agendar 15min para esclarecer dúvidas?\"*\n\n**Dica**: Use emojis moderadamente e sempre personalize com o nome/empresa.",
        
        leads: "🧊 **Estratégia para Leads Frios**\n\n**Problema identificado**: 67% dos leads param de responder após 3º contato\n\n**Solução em 5 etapas:**\n1. **Requalificação**: Revisar fit do lead com ICP\n2. **Mudança de canal**: Se WhatsApp não funciona, tente e-mail/LinkedIn\n3. **Valor novo**: Compartilhar case success ou novidade do produto\n4. **Social proof**: Mencionar cliente similar que teve sucesso\n5. **Last attempt**: Mensagem de \"despedida\" (funciona em 23% dos casos)\n\n**Template reativação:**\n*\"[Nome], percebi que talvez não seja o momento ideal para [Empresa]. Sem problemas! Vou te tirar da minha lista ativa, mas se houver alguma mudança nos próximos meses, me chama no WhatsApp. Grande abraço!\"*",
        
        followup: "🔄 **Otimização de Follow-ups**\n\n**Análise atual**: Seu timing de follow-up pode melhorar\n\n**Cadência recomendada:**\n• **Dia 1**: Primeiro contato (WhatsApp/LinkedIn)\n• **Dia 3**: Follow-up com valor (case/conteúdo)\n• **Dia 7**: Check-in informal\n• **Dia 14**: Proposta/demo\n• **Dia 21**: Social proof (depoimento cliente)\n• **Dia 30**: Last attempt\n\n**Automação sugerida:**\n- CRM: Marcar follow-ups automático\n- WhatsApp: Templates prontos para cada etapa\n- E-mail: Sequência gotejada\n\n**Resultado esperado**: +47% na taxa de resposta"
      };
      
      const lowerMessage = userMessage.toLowerCase();
      
      if (lowerMessage.includes('pipeline') || lowerMessage.includes('analise') || lowerMessage.includes('vendas')) {
        return responses.pipeline;
      } else if (lowerMessage.includes('whatsapp') || lowerMessage.includes('script') || lowerMessage.includes('template')) {
        return responses.whatsapp;
      } else if (lowerMessage.includes('frio') || lowerMessage.includes('lead') || lowerMessage.includes('estratégia')) {
        return responses.leads;
      } else if (lowerMessage.includes('follow') || lowerMessage.includes('otimizar') || lowerMessage.includes('cadência')) {
        return responses.followup;
      } else {
        return `🤖 **Resposta Personalizada**\n\nEntendi sua pergunta sobre "${userMessage}". Posso ajudá-lo com análises específicas!\n\n**Temas que domino:**\n• 📊 Análise de pipeline e métricas\n• 💬 Scripts de WhatsApp e LinkedIn\n• 🎯 Estratégias para diferentes perfis de lead\n• 🔄 Otimização de follow-ups e cadências\n• 📈 Automação de vendas\n\n**Como posso ser mais específico?** Diga mais detalhes sobre sua situação atual ou desafio específico que está enfrentando.`;
      }
    }

    function clearChatHistory() {
      if (confirm('Tem certeza que deseja limpar todo o histórico de conversas?')) {
        chatHistory = [];
        const chatMessages = document.getElementById('chatMessages');
        if (chatMessages) {
          chatMessages.innerHTML = `
            <div class="message ai-message">
              <div class="message-avatar">
                <i class="fas fa-robot"></i>
              </div>
              <div class="message-content">
                <div class="message-bubble">
                  <div class="message-text">
                    <i class="fas fa-sparkles" style="margin-right: 6px; color: var(--primary-color);"></i>
                    Histórico limpo! Como posso ajudá-lo hoje?
                  </div>
                  <div class="message-time">Agora</div>
                </div>
              </div>
            </div>
          `;
        }
        saveChatHistory();
        showNotification('🧹 Histórico de chat limpo!', 'success');
      }
    }

    function exportChatHistory() {
      if (chatHistory.length === 0) {
        showNotification('❌ Não há mensagens para exportar', 'warning');
        return;
      }
      
      const exportData = {
        conversationId: currentConversationId || 'default',
        exportDate: new Date().toISOString(),
        totalMessages: chatHistory.length,
        messages: chatHistory
      };
      
      const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `orbion-chat-${new Date().toISOString().slice(0,10)}.json`;
      a.click();
      URL.revokeObjectURL(url);
      
      showNotification('📁 Conversa exportada com sucesso!', 'success');
    }

    function saveChatHistory() {
      localStorage.setItem('orbion-chat-history', JSON.stringify(chatHistory));
    }

    function loadChatHistory() {
      const saved = localStorage.getItem('orbion-chat-history');
      if (saved) {
        chatHistory = JSON.parse(saved);
        // Recarregar mensagens no chat se necessário
      }
    }

    function startNewChat() {
      clearChatHistory();
      currentConversationId = `chat_${Date.now()}`;
      showNotification('✨ Nova conversa iniciada!', 'info');
    }

    function attachFile() {
      showNotification('📎 Funcionalidade em desenvolvimento!', 'info');
      // Implementar upload de arquivos
    }

    function recordVoice() {
      showNotification('🎤 Funcionalidade em desenvolvimento!', 'info');
      // Implementar gravação de áudio
    }

    function toggleChatSettings() {
      showNotification('⚙️ Configurações de chat em desenvolvimento!', 'info');
      // Implementar configurações do chat
    }

    function pinConversation(button) {
      const item = button.closest('.conversation-item');
      if (item) {
        item.style.order = '-1';
        showNotification('📌 Conversa fixada!', 'success');
      }
    }

    function deleteConversation(button) {
      if (confirm('Deseja excluir esta conversa?')) {
        const item = button.closest('.conversation-item');
        if (item) {
          item.remove();
          showNotification('🗑️ Conversa excluída!', 'success');
        }
      }
    }

    // === INICIALIZAÇÃO PRINCIPAL ===
    document.addEventListener('DOMContentLoaded', () => {
      // Inicializar todos os sistemas
      initNavigation();
      initChat();
      initSettings();
      initSidebarToggle();
      initMicroInteractions();
      initWhatsAppTab();
      
      // Carregar dados iniciais
      loadDashboardStats();
      
      // Auto-refresh se habilitado
      if (config.getSetting('autoRefresh')) {
        setInterval(() => {
          const activeTab = document.querySelector('.nav-item.active')?.getAttribute('data-tab');
          if (activeTab === 'dashboard') {
            loadDashboardStats();
            loadSystemStatus();
            loadRecentActivity();
          } else if (activeTab === 'whatsapp') {
            loadWhatsAppStats();
          }
        }, 30000); // 30 segundos
      }
      
      // Feedback de carregamento completo
      setTimeout(() => {
        showNotification('🚀 ORBION Dashboard carregado com sucesso!', 'success');
      }, 1000);

      // Inicializar gráficos quando necessário
      initAdvancedAnalyticsCharts();
    });

    // === ANALYTICS AVANÇADO CHARTS ===
    function initAdvancedAnalyticsCharts() {
      // Só inicializar quando a aba estiver visível
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.target.id === 'temporalFunnelChart') {
            initTemporalFunnelChart();
            initEngagementScoreMatrix();
            initCohortAnalysisChart();
            observer.disconnect();
          }
        });
      });

      const chartElement = document.getElementById('temporalFunnelChart');
      if (chartElement) {
        observer.observe(chartElement);
      }
    }

    function initTemporalFunnelChart() {
      const ctx = document.getElementById('temporalFunnelChart');
      if (!ctx) return;

      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
          datasets: [
            {
              label: 'Leads Captados',
              data: [2100, 2400, 2800, 2600, 3200, 3100, 3400, 2900, 3100, 3300, 3000, 2847],
              borderColor: 'rgb(59, 130, 246)',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'MQL',
              data: [1400, 1600, 1900, 1750, 2100, 2050, 2250, 1950, 2100, 2200, 2000, 1923],
              borderColor: 'rgb(139, 92, 246)',
              backgroundColor: 'rgba(139, 92, 246, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'SQL',
              data: [600, 700, 850, 780, 950, 920, 1020, 870, 950, 990, 900, 847],
              borderColor: 'rgb(245, 158, 11)',
              backgroundColor: 'rgba(245, 158, 11, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Propostas',
              data: [280, 320, 390, 360, 440, 420, 470, 400, 430, 460, 410, 423],
              borderColor: 'rgb(16, 185, 129)',
              backgroundColor: 'rgba(16, 185, 129, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Fechados',
              data: [95, 110, 135, 125, 155, 145, 165, 140, 150, 160, 145, 187],
              borderColor: 'rgb(34, 197, 94)',
              backgroundColor: 'rgba(34, 197, 94, 0.1)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Evolução do Funil de Conversão',
              color: 'rgb(243, 244, 246)',
              font: { size: 16, weight: 'bold' }
            },
            legend: {
              labels: {
                color: 'rgb(156, 163, 175)',
                usePointStyle: true,
                padding: 20
              }
            }
          },
          scales: {
            x: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: 'rgb(156, 163, 175)' }
            },
            y: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: 'rgb(156, 163, 175)' }
            }
          },
          interaction: {
            intersect: false,
            mode: 'index'
          }
        }
      });
    }

    function initEngagementScoreMatrix() {
      const ctx = document.getElementById('engagementScoreMatrix');
      if (!ctx) return;

      // Dados para matriz de dispersão
      const data = [];
      for (let i = 0; i < 50; i++) {
        data.push({
          x: Math.random() * 100, // Engagement Score
          y: Math.random() * 100, // Lead Score
          r: Math.random() * 15 + 5 // Tamanho da bolha
        });
      }

      new Chart(ctx, {
        type: 'bubble',
        data: {
          datasets: [
            {
              label: 'Leads Quentes (>80)',
              data: data.filter(d => d.x > 80 && d.y > 80),
              backgroundColor: 'rgba(239, 68, 68, 0.6)',
              borderColor: 'rgb(239, 68, 68)',
              borderWidth: 2
            },
            {
              label: 'Leads Mornos (40-80)',
              data: data.filter(d => d.x >= 40 && d.x <= 80 && d.y >= 40 && d.y <= 80),
              backgroundColor: 'rgba(245, 158, 11, 0.6)',
              borderColor: 'rgb(245, 158, 11)',
              borderWidth: 2
            },
            {
              label: 'Leads Frios (<40)',
              data: data.filter(d => d.x < 40 || d.y < 40),
              backgroundColor: 'rgba(6, 182, 212, 0.6)',
              borderColor: 'rgb(6, 182, 212)',
              borderWidth: 2
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Matriz Engajamento vs Score',
              color: 'rgb(243, 244, 246)',
              font: { size: 16, weight: 'bold' }
            },
            legend: {
              labels: {
                color: 'rgb(156, 163, 175)',
                usePointStyle: true,
                padding: 20
              }
            }
          },
          scales: {
            x: {
              title: {
                display: true,
                text: 'Engagement Score',
                color: 'rgb(156, 163, 175)'
              },
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: 'rgb(156, 163, 175)' }
            },
            y: {
              title: {
                display: true,
                text: 'Lead Score',
                color: 'rgb(156, 163, 175)'
              },
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: 'rgb(156, 163, 175)' }
            }
          }
        }
      });
    }

    function initCohortAnalysisChart() {
      const ctx = document.getElementById('cohortAnalysisChart');
      if (!ctx) return;

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4', 'Semana 5', 'Semana 6'],
          datasets: [
            {
              label: 'Janeiro 2024',
              data: [100, 85, 72, 63, 58, 54],
              backgroundColor: 'rgba(59, 130, 246, 0.8)',
              borderColor: 'rgb(59, 130, 246)',
              borderWidth: 2
            },
            {
              label: 'Fevereiro 2024',
              data: [100, 88, 76, 68, 61, 57],
              backgroundColor: 'rgba(139, 92, 246, 0.8)',
              borderColor: 'rgb(139, 92, 246)',
              borderWidth: 2
            },
            {
              label: 'Março 2024',
              data: [100, 91, 81, 74, 67, 62],
              backgroundColor: 'rgba(16, 185, 129, 0.8)',
              borderColor: 'rgb(16, 185, 129)',
              borderWidth: 2
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Análise de Retenção por Cohort',
              color: 'rgb(243, 244, 246)',
              font: { size: 16, weight: 'bold' }
            },
            legend: {
              labels: {
                color: 'rgb(156, 163, 175)',
                usePointStyle: true,
                padding: 20
              }
            }
          },
          scales: {
            x: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: 'rgb(156, 163, 175)' }
            },
            y: {
              beginAtZero: true,
              max: 100,
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { 
                color: 'rgb(156, 163, 175)',
                callback: function(value) {
                  return value + '%';
                }
              }
            }
          }
        }
      });
    }

    // === FUNNEL TAB FUNCTIONALITY ===
    let funnelEvolutionChart = null;

    function initFunnelTab() {
      console.log('Inicializando aba de funil...');
      
      // Animar números do funil
      animateFunnelNumbers();
      
      // Inicializar gráfico de evolução
      initFunnelEvolutionChart();
      
      // Animar barras de progresso
      animateChannelBars();
    }

    function animateFunnelNumbers() {
      const stages = document.querySelectorAll('.funnel-stage');
      stages.forEach((stage, index) => {
        setTimeout(() => {
          stage.style.animation = 'slideIn 0.5s ease forwards';
          
          const value = stage.querySelector('.stage-value');
          if (value) {
            const finalValue = parseInt(value.textContent.replace(/\D/g, ''));
            animateCounter(value, 0, finalValue, 1500);
          }
        }, index * 100);
      });
    }

    function animateCounter(element, start, end, duration) {
      const startTime = Date.now();
      const originalText = element.textContent;
      const hasComma = originalText.includes('.');
      
      function update() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const current = Math.floor(start + (end - start) * progress);
        
        // Formatar número com separador de milhares
        const formatted = current.toLocaleString('pt-BR');
        element.textContent = formatted;
        
        if (progress < 1) {
          requestAnimationFrame(update);
        }
      }
      
      update();
    }

    function initFunnelEvolutionChart() {
      const ctx = document.getElementById('funnelEvolutionChart');
      if (!ctx) return;

      if (funnelEvolutionChart) {
        funnelEvolutionChart.destroy();
      }

      funnelEvolutionChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
          datasets: [
            {
              label: 'Visitantes',
              data: [8500, 9200, 10100, 10800, 11200, 11900, 12100, 12400, 12600, 12700, 12800, 12847],
              borderColor: 'rgb(59, 130, 246)',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              tension: 0.4
            },
            {
              label: 'Leads',
              data: [6200, 6800, 7400, 7900, 8200, 8700, 8850, 9100, 9200, 9280, 9350, 9378],
              borderColor: 'rgb(139, 92, 246)',
              backgroundColor: 'rgba(139, 92, 246, 0.1)',
              tension: 0.4
            },
            {
              label: 'Qualificados',
              data: [3350, 3680, 4000, 4270, 4430, 4700, 4780, 4920, 4970, 5020, 5050, 5064],
              borderColor: 'rgb(251, 146, 60)',
              backgroundColor: 'rgba(251, 146, 60, 0.1)',
              tension: 0.4
            },
            {
              label: 'Oportunidades',
              data: [1400, 1540, 1680, 1790, 1860, 1970, 2005, 2060, 2085, 2105, 2120, 2127],
              borderColor: 'rgb(163, 163, 163)',
              backgroundColor: 'rgba(163, 163, 163, 0.1)',
              tension: 0.4
            },
            {
              label: 'Clientes',
              data: [392, 431, 470, 501, 520, 551, 561, 576, 583, 589, 593, 596],
              borderColor: 'rgb(16, 185, 129)',
              backgroundColor: 'rgba(16, 185, 129, 0.1)',
              tension: 0.4,
              borderWidth: 3
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            title: {
              display: false
            },
            legend: {
              display: true,
              position: 'top',
              labels: {
                color: 'rgb(156, 163, 175)',
                usePointStyle: true,
                padding: 15,
                font: {
                  size: 12
                }
              }
            },
            tooltip: {
              backgroundColor: 'rgba(31, 41, 55, 0.95)',
              titleColor: 'rgb(243, 244, 246)',
              bodyColor: 'rgb(156, 163, 175)',
              borderColor: 'rgb(75, 85, 99)',
              borderWidth: 1,
              padding: 12,
              displayColors: true,
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + context.parsed.y.toLocaleString('pt-BR');
                }
              }
            }
          },
          scales: {
            x: {
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: 'rgb(156, 163, 175)'
              }
            },
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: 'rgb(156, 163, 175)',
                callback: function(value) {
                  return value.toLocaleString('pt-BR');
                }
              }
            }
          }
        }
      });
    }

    function animateChannelBars() {
      const bars = document.querySelectorAll('.performance-bar');
      bars.forEach((bar, index) => {
        setTimeout(() => {
          bar.style.animation = 'expandWidth 1s ease forwards';
        }, index * 200);
      });
    }

    // Adicionar animações CSS
    const funnelStyles = document.createElement('style');
    funnelStyles.textContent = `
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      
      @keyframes expandWidth {
        from {
          width: 0;
        }
      }
    `;
    document.head.appendChild(funnelStyles);

    // === BRANDING TAB FUNCTIONALITY ===
    let brandingSettings = {
      logo: null,
      logoSize: 120,
      logoPosition: 'left',
      primaryColor: '#3b82f6',
      secondaryColor: '#8b5cf6',
      accentColor: '#10b981',
      errorColor: '#ef4444',
      theme: 'dark',
      backgroundType: 'gradient',
      backgroundGradient: 'default',
      backgroundImage: null,
      backgroundOpacity: 20,
      backgroundPosition: 'center'
    };

    function initBrandingTab() {
      console.log('Inicializando aba de branding...');
      
      // Carregar configurações salvas
      loadBrandingSettings();
      
      // Inicializar upload de logo
      initLogoUpload();
      
      // Inicializar seletores de cor
      initColorPickers();
      
      // Inicializar preset colors
      initPresetColors();
      
      // Inicializar seleção de tema
      initThemeSelector();
      
      // Inicializar opções de fundo
      initBackgroundOptions();
      
      // Inicializar botões de ação
      initBrandingActions();
      
      // Atualizar pré-visualização
      updateLivePreview();
    }

    function loadBrandingSettings() {
      const saved = localStorage.getItem('orbion-branding-settings');
      if (saved) {
        brandingSettings = {...brandingSettings, ...JSON.parse(saved)};
        applyBrandingSettings();
      }
    }

    function saveBrandingSettings() {
      localStorage.setItem('orbion-branding-settings', JSON.stringify(brandingSettings));
    }

    function initLogoUpload() {
      const logoInput = document.getElementById('logoInput');
      const removeLogo = document.getElementById('removeLogo');
      const logoSize = document.getElementById('logoSize');
      const logoPosition = document.getElementById('logoPosition');

      if (logoInput) {
        logoInput.addEventListener('change', handleLogoUpload);
      }

      if (removeLogo) {
        removeLogo.addEventListener('click', () => {
          brandingSettings.logo = null;
          updateLogoPreview();
          updateLivePreview();
          saveBrandingSettings();
        });
      }

      if (logoSize) {
        logoSize.addEventListener('input', (e) => {
          brandingSettings.logoSize = e.target.value;
          document.querySelector('.range-value').textContent = e.target.value + 'px';
          updateLivePreview();
          saveBrandingSettings();
        });
      }

      if (logoPosition) {
        logoPosition.addEventListener('change', (e) => {
          brandingSettings.logoPosition = e.target.value;
          updateLivePreview();
          saveBrandingSettings();
        });
      }
    }

    function handleLogoUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          brandingSettings.logo = e.target.result;
          updateLogoPreview();
          updateLivePreview();
          saveBrandingSettings();
        };
        reader.readAsDataURL(file);
      }
    }

    function updateLogoPreview() {
      const logoPreview = document.getElementById('logoPreview');
      if (logoPreview) {
        if (brandingSettings.logo) {
          logoPreview.innerHTML = `<img src="${brandingSettings.logo}" alt="Logo Preview" style="max-width: 100%; max-height: 100%; object-fit: contain;">`;
        } else {
          logoPreview.innerHTML = '<i class="fas fa-image"></i><span>Nenhuma logo carregada</span>';
        }
      }
    }

    function initColorPickers() {
      const colorInputs = ['primaryColor', 'secondaryColor', 'accentColor', 'errorColor'];
      
      colorInputs.forEach(colorType => {
        const colorInput = document.getElementById(colorType);
        const colorText = document.getElementById(colorType + 'Text');
        
        if (colorInput) {
          colorInput.value = brandingSettings[colorType];
          colorInput.addEventListener('change', (e) => {
            brandingSettings[colorType] = e.target.value;
            if (colorText) colorText.value = e.target.value;
            updateLivePreview();
            saveBrandingSettings();
          });
        }
        
        if (colorText) {
          colorText.value = brandingSettings[colorType];
          colorText.addEventListener('change', (e) => {
            if (isValidHexColor(e.target.value)) {
              brandingSettings[colorType] = e.target.value;
              if (colorInput) colorInput.value = e.target.value;
              updateLivePreview();
              saveBrandingSettings();
            }
          });
        }
      });
    }

    function isValidHexColor(hex) {
      return /^#[0-9A-F]{6}$/i.test(hex);
    }

    function initPresetColors() {
      const presetItems = document.querySelectorAll('.preset-item');
      
      presetItems.forEach(item => {
        item.addEventListener('click', () => {
          const preset = item.dataset.preset;
          applyColorPreset(preset);
        });
      });
    }

    function applyColorPreset(preset) {
      const presets = {
        blue: {
          primaryColor: '#3b82f6',
          secondaryColor: '#8b5cf6',
          accentColor: '#10b981',
          errorColor: '#ef4444'
        },
        green: {
          primaryColor: '#10b981',
          secondaryColor: '#059669',
          accentColor: '#34d399',
          errorColor: '#ef4444'
        },
        purple: {
          primaryColor: '#8b5cf6',
          secondaryColor: '#7c3aed',
          accentColor: '#a78bfa',
          errorColor: '#ef4444'
        },
        orange: {
          primaryColor: '#f97316',
          secondaryColor: '#ea580c',
          accentColor: '#fb923c',
          errorColor: '#ef4444'
        }
      };

      if (presets[preset]) {
        Object.assign(brandingSettings, presets[preset]);
        updateColorInputs();
        updateLivePreview();
        saveBrandingSettings();
      }
    }

    function updateColorInputs() {
      const colorInputs = ['primaryColor', 'secondaryColor', 'accentColor', 'errorColor'];
      
      colorInputs.forEach(colorType => {
        const colorInput = document.getElementById(colorType);
        const colorText = document.getElementById(colorType + 'Text');
        
        if (colorInput) colorInput.value = brandingSettings[colorType];
        if (colorText) colorText.value = brandingSettings[colorType];
      });
    }

    function initThemeSelector() {
      const themeOptions = document.querySelectorAll('.theme-option');
      
      themeOptions.forEach(option => {
        if (option.dataset.theme === brandingSettings.theme) {
          option.classList.add('active');
        }
        
        option.addEventListener('click', () => {
          themeOptions.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          
          brandingSettings.theme = option.dataset.theme;
          updateLivePreview();
          saveBrandingSettings();
        });
      });
    }

    function initBackgroundOptions() {
      const bgTypeBtns = document.querySelectorAll('.bg-type-btn');
      const bgPanels = document.querySelectorAll('.bg-option-panel');
      
      bgTypeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          bgTypeBtns.forEach(b => b.classList.remove('active'));
          bgPanels.forEach(p => p.classList.remove('active'));
          
          btn.classList.add('active');
          const targetPanel = document.getElementById(btn.dataset.type + 'Panel');
          if (targetPanel) targetPanel.classList.add('active');
          
          brandingSettings.backgroundType = btn.dataset.type;
          updateLivePreview();
          saveBrandingSettings();
        });
      });
      
      // Gradient presets
      const gradientItems = document.querySelectorAll('.gradient-item');
      gradientItems.forEach(item => {
        item.addEventListener('click', () => {
          gradientItems.forEach(g => g.classList.remove('active'));
          item.classList.add('active');
          
          brandingSettings.backgroundGradient = item.dataset.gradient;
          updateLivePreview();
          saveBrandingSettings();
        });
      });
      
      // Background image upload
      const bgImageInput = document.getElementById('bgImageInput');
      if (bgImageInput) {
        bgImageInput.addEventListener('change', handleBackgroundImageUpload);
      }
      
      // Background opacity
      const bgOpacity = document.getElementById('bgOpacity');
      if (bgOpacity) {
        bgOpacity.addEventListener('input', (e) => {
          brandingSettings.backgroundOpacity = e.target.value;
          document.querySelector('#imagePanel .range-value').textContent = e.target.value + '%';
          updateLivePreview();
          saveBrandingSettings();
        });
      }
      
      // Background position
      const bgPosition = document.getElementById('bgPosition');
      if (bgPosition) {
        bgPosition.addEventListener('change', (e) => {
          brandingSettings.backgroundPosition = e.target.value;
          updateLivePreview();
          saveBrandingSettings();
        });
      }
    }

    function handleBackgroundImageUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          brandingSettings.backgroundImage = e.target.result;
          updateLivePreview();
          saveBrandingSettings();
        };
        reader.readAsDataURL(file);
      }
    }

    function initBrandingActions() {
      const applyBtn = document.getElementById('applyBranding');
      const resetBtn = document.getElementById('resetBranding');
      const exportBtn = document.getElementById('exportBranding');
      const importInput = document.getElementById('importBranding');
      
      if (applyBtn) {
        applyBtn.addEventListener('click', applyBrandingToSystem);
      }
      
      if (resetBtn) {
        resetBtn.addEventListener('click', resetBrandingSettings);
      }
      
      if (exportBtn) {
        exportBtn.addEventListener('click', exportBrandingSettings);
      }
      
      if (importInput) {
        importInput.addEventListener('change', importBrandingSettings);
      }
    }

    function updateLivePreview() {
      const previewDashboard = document.getElementById('previewDashboard');
      if (!previewDashboard) return;
      
      // Aplicar cores
      previewDashboard.style.setProperty('--preview-primary', brandingSettings.primaryColor);
      previewDashboard.style.setProperty('--preview-secondary', brandingSettings.secondaryColor);
      previewDashboard.style.setProperty('--preview-accent', brandingSettings.accentColor);
      
      // Aplicar logo
      const logoPlaceholder = previewDashboard.querySelector('.logo-placeholder');
      if (logoPlaceholder) {
        if (brandingSettings.logo) {
          logoPlaceholder.innerHTML = `<img src="${brandingSettings.logo}" style="max-width: 100%; max-height: 100%; object-fit: contain;">`;
        } else {
          logoPlaceholder.textContent = 'LOGO';
        }
      }
      
      // Aplicar tema
      previewDashboard.className = `preview-dashboard theme-${brandingSettings.theme}`;
      
      // Aplicar cores aos elementos ativos
      const activeElements = previewDashboard.querySelectorAll('.nav-item.active, .logo-placeholder, .header-content, .preview-card::after');
      activeElements.forEach(el => {
        el.style.backgroundColor = brandingSettings.primaryColor;
      });
    }

    function applyBrandingToSystem() {
      // Aplicar as configurações ao sistema atual
      config.updateSetting('primaryColor', brandingSettings.primaryColor);
      config.updateSetting('accentColor', brandingSettings.accentColor);
      config.updateSetting('theme', brandingSettings.theme);
      
      // Aplicar logo ao sidebar se existir
      const sidebarLogo = document.querySelector('.sidebar .logo');
      if (sidebarLogo && brandingSettings.logo) {
        sidebarLogo.innerHTML = `<img src="${brandingSettings.logo}" style="max-height: ${brandingSettings.logoSize}px; object-fit: contain;">`;
      }
      
      showNotification('✨ Branding aplicado com sucesso!', 'success');
    }

    function resetBrandingSettings() {
      if (confirm('Tem certeza de que deseja restaurar as configurações padrão?')) {
        brandingSettings = {
          logo: null,
          logoSize: 120,
          logoPosition: 'left',
          primaryColor: '#3b82f6',
          secondaryColor: '#8b5cf6',
          accentColor: '#10b981',
          errorColor: '#ef4444',
          theme: 'dark',
          backgroundType: 'gradient',
          backgroundGradient: 'default',
          backgroundImage: null,
          backgroundOpacity: 20,
          backgroundPosition: 'center'
        };
        
        updateColorInputs();
        updateLogoPreview();
        updateLivePreview();
        saveBrandingSettings();
        
        showNotification('🔄 Configurações restauradas!', 'info');
      }
    }

    function exportBrandingSettings() {
      const dataStr = JSON.stringify(brandingSettings, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'orbion-branding-config.json';
      link.click();
      URL.revokeObjectURL(url);
      
      showNotification('📁 Configuração exportada!', 'success');
    }

    function importBrandingSettings(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const imported = JSON.parse(e.target.result);
            brandingSettings = {...brandingSettings, ...imported};
            
            updateColorInputs();
            updateLogoPreview();
            updateLivePreview();
            saveBrandingSettings();
            
            showNotification('📂 Configuração importada com sucesso!', 'success');
          } catch (error) {
            showNotification('❌ Erro ao importar configuração', 'error');
          }
        };
        reader.readAsText(file);
      }
    }

    function applyBrandingSettings() {
      // Aplicar configurações salvas aos elementos da interface
      updateColorInputs();
      updateLogoPreview();
      
      // Definir valores dos sliders e selects
      const logoSize = document.getElementById('logoSize');
      const logoPosition = document.getElementById('logoPosition');
      const bgOpacity = document.getElementById('bgOpacity');
      const bgPosition = document.getElementById('bgPosition');
      
      if (logoSize) {
        logoSize.value = brandingSettings.logoSize;
        document.querySelector('.logo-settings .range-value').textContent = brandingSettings.logoSize + 'px';
      }
      
      if (logoPosition) logoPosition.value = brandingSettings.logoPosition;
      if (bgOpacity) {
        bgOpacity.value = brandingSettings.backgroundOpacity;
        const rangeValue = document.querySelector('#imagePanel .range-value');
        if (rangeValue) rangeValue.textContent = brandingSettings.backgroundOpacity + '%';
      }
      if (bgPosition) bgPosition.value = brandingSettings.backgroundPosition;
      
      // Atualizar seleções ativas
      const themeOptions = document.querySelectorAll('.theme-option');
      themeOptions.forEach(option => {
        if (option.dataset.theme === brandingSettings.theme) {
          option.classList.add('active');
        } else {
          option.classList.remove('active');
        }
      });
      
      updateLivePreview();
    }
  </script>
</body>
</html>